(self.webpackChunktrello_client=self.webpackChunktrello_client||[]).push([[70128],{"./node_modules/@atlaskit/atlassian-context/dist/esm/common/constants/host-based-lookup/constants/index.js":(e,t,r)=>{"use strict";r.d(t,{Cj:()=>i,IJ:()=>l,e3:()=>a,hu:()=>o,jq:()=>n,wx:()=>s});var s="fedramp-moderate",n="commercial",o="fedramp-fedex",i="stg",a="prod",l="dev"},"./node_modules/@atlaskit/atlassian-context/dist/esm/services/host-based-lookup/is-fedramp/index.js":(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var s=r("./node_modules/@atlaskit/atlassian-context/dist/esm/common/constants/host-based-lookup/constants/index.js");function n(){var e,t=globalThis,r=t.MICROS_PERIMETER||t.UNSAFE_ATL_CONTEXT_BOUNDARY;if(r)return r===s.wx;var n=null==(e=t.location)||null==(e=e.hostname)?void 0:e.match(/atlassian-us-gov-mod\.(com|net)|atlassian-us-gov\.(com|net)|atlassian-fex\.(com|net)|atlassian-stg-fedm\.(com|net)/);return!!n&&n.length>0}},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/FeatureGates.js":(e,t,r)=>{"use strict";r.d(t,{Ay:()=>et});var s=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=r("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),l=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),c=r("./node_modules/@babel/runtime/regenerator/index.js"),u=r.n(c),d=r("./node_modules/@statsig/js-client/src/index.js"),h=r("./node_modules/eventemitter3/index.js"),p=r.n(h);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g="@all-features",y=(0,n.A)(function e(){(0,s.A)(this,e),(0,o.A)(this,"eventToValue",new Map),this.emitter=new(p())},[{key:"onGateUpdated",value:function(e,t,r,s){var n=this,o=r(e,f(f({},s),{},{fireGateExposure:!1}));void 0===this.eventToValue.get(t)&&this.eventToValue.set(t,o);var i=function(){var o=r(e,f(f({},s),{},{fireGateExposure:!1}));n.eventToValue.get(t)!==o&&(n.eventToValue.set(t,o),t(o))};return this.emitter.on(e,i),function(){n.emitter.off(e,i)}}},{key:"onExperimentValueUpdated",value:function(e,t,r,s,n,o){var i=this,a="".concat(e,".").concat(t),l=n(e,t,r,f(f({},o),{},{fireExperimentExposure:!1}));void 0===this.eventToValue.get(s)&&this.eventToValue.set(s,l);var c=function(){var a=n(e,t,r,f(f({},o),{},{fireExperimentExposure:!1}));i.eventToValue.get(s)!==a&&(i.eventToValue.set(s,a),s(a))};return this.emitter.on(a,c),function(){i.emitter.off(a,c)}}},{key:"onAnyUpdated",value:function(e){var t=this;return this.emitter.on(g,e),function(){t.emitter.off(g,e)}}},{key:"anyUpdated",value:function(){var e=this;this.emitter.emit(g),this.emitter.eventNames().filter(function(e){return e!==g}).forEach(function(t){e.emitter.emit(t)})}}]),b=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/DynamicConfig.js"),v=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/Layer.js"),_=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/types.js"),w=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/types.js"),C=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/version.js"),O=r("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),E=r("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),k=r("./node_modules/@babel/runtime/helpers/esm/inherits.js");function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}var A=function(e){function t(e){var r,n;return(0,s.A)(this,t),r=t,n=[e],r=(0,E.A)(r),(0,O.A)(this,S()?Reflect.construct(r,n||[],(0,E.A)(this).constructor):r.apply(this,n))}return(0,k.A)(t,e),(0,n.A)(t)}((0,r("./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js").A)(Error));function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}var j=function(){var e,t,r,i,a;function c(){(0,s.A)(this,c)}return(0,n.A)(c,null,[{key:"fetchClientSdk",value:(e=(0,l.A)(u().mark(function e(t){var r,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetApp,s="/api/v2/frontend/clientSdkKey/".concat(r),e.prev=2,e.next=5,this.fetchRequest(s,"GET",t);case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),!(e.t0 instanceof Error)){e.next=12;break}throw e.t0;case 12:throw Error("Failed to retrieve client sdk key");case 13:case"end":return e.stop()}},e,this,[[2,8]])})),function(t){return e.apply(this,arguments)})},{key:"fetchExperimentValues",value:(t=(0,l.A)(u().mark(function e(t,r,s){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={identifiers:r,customAttributes:s,targetApp:t.targetApp},e.prev=1,e.next=4,this.fetchRequest("/api/v2/frontend/experimentValues","POST",t,n);case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(e.t0 instanceof Error)){e.next=11;break}throw e.t0;case 11:throw Error("Failed to retrieve experiment values");case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(e,r,s){return t.apply(this,arguments)})},{key:"handleResponseError",value:(r=(0,l.A)(u().mark(function e(t){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,t.text();case 3:throw r=e.sent,new A("Non 2xx response status received, status: ".concat(t.status,", body: ").concat(JSON.stringify(r)));case 5:if(204!==t.status){e.next=7;break}throw new A("Unexpected 204 response");case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"extractResponseBody",value:(i=(0,l.A)(u().mark(function e(t){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return r=e.sent,e.abrupt("return",JSON.parse(r));case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"getBaseUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t)return"/gateway/api/flags";if(r===w.cd.FEDRAMP_MODERATE)switch(e){case w.jQ.Production:return"https://api.atlassian-us-gov-mod.com/flags";case w.jQ.Staging:return"https://api.stg.atlassian-us-gov-mod.com/flags";default:throw Error('Invalid environment "'.concat(e,'" for "').concat(r,'" perimeter'))}if(r===w.cd.COMMERCIAL)switch(e){case w.jQ.Development:return"https://api.dev.atlassian.com/flags";case w.jQ.Staging:var n=this.getApiUrl(s);if(null!==n)return n;return"https://api.stg.atlassian.com/flags";default:var o=this.getApiUrl(s);if(null!==o)return o;return"https://api.atlassian.com/flags"}throw Error('Invalid perimeter "'.concat(r,'"'))}},{key:"fetchRequest",value:(a=(0,l.A)(u().mark(function e(t,r,s,n){var i,a,l,d,h;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.getBaseUrl(s.environment,s.useGatewayURL,s.perimeter,s.isolationContextId),a=s.fetchTimeoutMs||5e3,AbortSignal.timeout?l=AbortSignal.timeout(a):AbortController&&(l=(d=new AbortController).signal,setTimeout(function(){return d.abort()},a)),e.next=5,fetch("".concat(i).concat(t),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:r,headers:{"Content-Type":"application/json","X-Client-Name":"feature-gate-js-client","X-Client-Version":C.f,"X-API-KEY":s.apiKey},signal:l},n&&{body:JSON.stringify(n)}));case 5:return h=e.sent,e.next=8,this.handleResponseError(h);case 8:return e.next=10,this.extractResponseBody(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)})),function(e,t,r,s){return a.apply(this,arguments)})},{key:"getApiUrl",value:function(e){var t=this.getWindowLocation();if(void 0===t)return e?"https://atlassian-statsig-proxy-archetype.atl-paas.%s.atl-ic.net".replace("%s",e):null;var r=t.protocol,s=t.hostname,n=s.match(/([^.]+)\.oasis-stg\.com$/);if(n)return"".concat(r,"//api.").concat(n[1],".").concat("oasis-stg.com/flags");var o=s.match(/([^.]+)\.atlassian-isolated\.net$/);return o?"".concat(r,"//api.").concat(o[1],".").concat("atlassian-isolated.net/flags"):null}},{key:"getWindowLocation",value:function(){if("undefined"!=typeof window&&window.location)return window.location}}])}(),x=r("./node_modules/@babel/runtime/helpers/esm/get.js");function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(D=function(){return!!e})()}var R=function(e){var t,r,i;function a(){var e,t,r;return(0,s.A)(this,a),t=a,r=["NoFetchDataAdapter","nofetch"],t=(0,E.A)(t),e=(0,O.A)(this,D()?Reflect.construct(t,r||[],(0,E.A)(this).constructor):t.apply(this,r)),(0,o.A)(e,"bootstrapResult",null),e}return(0,k.A)(a,e),(0,n.A)(a,[{key:"setBootstrapData",value:function(e){this.bootstrapResult=e?{source:"Bootstrap",data:JSON.stringify(e),receivedAt:Date.now(),stableID:d.StableID.get(this._getSdkKey()),fullUserHash:null}:null}},{key:"prefetchData",value:(t=(0,l.A)(u().mark(function e(t,r){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(e,r){return t.apply(this,arguments)})},{key:"getDataAsync",value:(r=(0,l.A)(u().mark(function e(t,r,s){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.bootstrapResult&&T(T({},this.bootstrapResult),{},{fullUserHash:(0,d._getFullUserHash)(r)}));case 1:case"end":return e.stop()}},e,this)})),function(e,t,s){return r.apply(this,arguments)})},{key:"getDataSync",value:function(e){return this.bootstrapResult&&T(T({},this.bootstrapResult),{},{fullUserHash:(0,d._getFullUserHash)(e)})}},{key:"_fetchFromNetwork",value:(i=(0,l.A)(u().mark(function e(t,r,s){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}},e)})),function(e,t,r){return i.apply(this,arguments)})},{key:"_getCacheKey",value:function(e){var t=(0,d._getStorageKey)(this._getSdkKey(),e);return"".concat(d.DataAdapterCachePrefix,".").concat(this._cacheSuffix,".").concat(t)}},{key:"_isCachedResultValidFor204",value:function(e,t){return!1}},{key:"setDataLegacy",value:function(e,t){var r,s;(r=this,s=(0,x.A)((0,E.A)(a.prototype),"setData",r),"function"==typeof s?function(e){return s.apply(r,e)}:s)([e,t])}},{key:"toJSON",value:function(){var e=T({},this);return delete e._options,delete e._inMemoryCache,delete e.bootstrapResult,e}}])}(d.DataAdapterCore),L=r("./node_modules/@statsig/client-core/src/index.js");function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}var F="LocalOverride:Recognized",B="STATSIG_JS_LITE_LOCAL_OVERRIDES",V=function(){return{gates:{},configs:{},layers:{}}},K=function(e,t){return t+":"+e},G=(0,n.A)(function e(t){(0,s.A)(this,e),this._overrides=V(),this._djb2Map=new Map,this._localStorageKey=t},[{key:"parseStoredOverrides",value:function(e){try{var t=window.localStorage.getItem(e);if(!t)return V();return JSON.parse(t)}catch(e){return V()}}},{key:"mergeOverrides",value:function(){for(var e=V(),t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];for(var n=0;n<r.length;n++){for(var o=r[n],i=0,l=Object.entries(null!=(c=o.gates)?c:{});i<l.length;i++){var c,u=(0,a.A)(l[i],2),d=u[0],h=u[1];e.gates[d]=h}for(var p=0,m=Object.entries(null!=(f=o.configs)?f:{});p<m.length;p++){var f,g=(0,a.A)(m[p],2),y=g[0],b=g[1];e.configs[y]=b}for(var v=0,_=Object.entries(null!=(w=o.layers)?w:{});v<_.length;v++){var w,C=(0,a.A)(_[v],2),O=C[0],E=C[1];e.layers[O]=E}}return e}},{key:"initFromStoredOverrides",value:function(){var e=this.mergeOverrides(this._overrides,this.parseStoredOverrides(B),this.parseStoredOverrides(this._localStorageKey));try{window.localStorage.removeItem(B)}catch(e){}for(var t=0,r=Object.values(e);t<r.length;t++){var s,n=r[t],o=new Set(Object.keys(n)),i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return M(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e))){r&&(e=r);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(o);try{for(i.s();!(s=i.n()).done;){var a=s.value,l=(0,L._DJB2)(a);o.has(l)&&delete n[l]}}catch(e){i.e(e)}finally{i.f()}}this.applyOverrides(e)}},{key:"saveOverrides",value:function(){try{window.localStorage.setItem(this._localStorageKey,JSON.stringify(this._overrides))}catch(e){}}},{key:"getOverrides",value:function(){return this.mergeOverrides(this._overrides)}},{key:"applyOverrides",value:function(e){var t=U(U({},V()),e);this._djb2Map.clear();for(var r=0,s=Object.entries(t);r<s.length;r++)for(var n=(0,a.A)(s[r],2),o=n[0],i=n[1],l=0,c=Object.entries(i);l<c.length;l++){var u=(0,a.A)(c[l],2),d=u[0],h=u[1];this._djb2Map.set(K((0,L._DJB2)(d),o),h)}this._overrides=t}},{key:"setOverrides",value:function(e){this.applyOverrides(e),this.saveOverrides()}},{key:"overrideGate",value:function(e,t){this._overrides.gates[e]=t,this._djb2Map.set(K((0,L._DJB2)(e),"gates"),t),this.saveOverrides()}},{key:"removeGateOverride",value:function(e){delete this._overrides.gates[e],this._djb2Map.delete(K((0,L._DJB2)(e),"gates")),this.saveOverrides()}},{key:"getGateOverride",value:function(e,t){var r,s=null!=(r=this._overrides.gates[e.name])?r:this._djb2Map.get(K(e.name,"gates"));return null==s?null:U(U({},e),{},{value:s,details:U(U({},e.details),{},{reason:F})})}},{key:"overrideDynamicConfig",value:function(e,t){this._overrides.configs[e]=t,this._djb2Map.set(K((0,L._DJB2)(e),"configs"),t),this.saveOverrides()}},{key:"removeDynamicConfigOverride",value:function(e){delete this._overrides.configs[e],this._djb2Map.delete(K((0,L._DJB2)(e),"configs")),this.saveOverrides()}},{key:"getDynamicConfigOverride",value:function(e,t){return this._getConfigOverride(e,this._overrides.configs)}},{key:"overrideExperiment",value:function(e,t){this._overrides.configs[e]=t,this._djb2Map.set(K((0,L._DJB2)(e),"configs"),t),this.saveOverrides()}},{key:"removeExperimentOverride",value:function(e){delete this._overrides.configs[e],this._djb2Map.delete(K((0,L._DJB2)(e),"configs")),this.saveOverrides()}},{key:"getExperimentOverride",value:function(e,t){return this._getConfigOverride(e,this._overrides.configs)}},{key:"overrideLayer",value:function(e,t){this._overrides.layers[e]=t,this._djb2Map.set(K((0,L._DJB2)(e),"layers"),t),this.saveOverrides()}},{key:"removeLayerOverride",value:function(e){delete this._overrides.layers[e],this._djb2Map.delete(K((0,L._DJB2)(e),"layers")),this.saveOverrides()}},{key:"removeAllOverrides",value:function(){this._overrides=V();try{window.localStorage.removeItem(this._localStorageKey)}catch(e){}}},{key:"getLayerOverride",value:function(e,t){var r,s=null!=(r=this._overrides.layers[e.name])?r:this._djb2Map.get(K(e.name,"layers"));return null==s?null:U(U({},e),{},{__value:s,get:(0,L._makeTypedGet)(e.name,s),details:U(U({},e.details),{},{reason:F})})}},{key:"_getConfigOverride",value:function(e,t){var r,s=null!=(r=t[e.name])?r:this._djb2Map.get(K(e.name,"configs"));return null==s?null:U(U({},e),{},{value:s,get:(0,L._makeTypedGet)(e.name,s),details:U(U({},e.details),{},{reason:F})})}}]),$=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/utils.js"),z=["sdkKey","environment","updateUserCompletionCallback","perimeter"];function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var H="client-default-key",J=function(){var e,t,r,c,h,p,m,f,g,O,E;return(0,n.A)(function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.localStorageKey,i=r.overrideAdapter;(0,s.A)(this,e),(0,o.A)(this,"initPromise",null),(0,o.A)(this,"initCompleted",!1),(0,o.A)(this,"initWithDefaults",!1),(0,o.A)(this,"hasCheckGateErrorOccurred",!1),(0,o.A)(this,"hasGetExperimentErrorOccurred",!1),(0,o.A)(this,"hasGetExperimentValueErrorOccurred",!1),(0,o.A)(this,"hasGetLayerErrorOccurred",!1),(0,o.A)(this,"hasGetLayerValueErrorOccurred",!1),(0,o.A)(this,"subscriptions",new y),(0,o.A)(this,"dataAdapter",new R),(0,o.A)(this,"statsigValuesUpdated",function(){t.user&&t.statsigClient.updateUserSync(t.user,{disableBackgroundCacheRefresh:!0}),t.subscriptions.anyUpdated()}),this.overrideAdapter=i||new G(void 0===n?"STATSIG_OVERRIDES":n)},[{key:"initialize",value:(e=(0,l.A)(u().mark(function e(t,r,s){var n,o,i=this;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,$.vd)(t),!this.initPromise){e.next=4;break}return(0,$.Gh)(n,this.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),e.abrupt("return",this.initPromise);case 4:return o=performance.now(),this.initOptions=n,this.initPromise=this.init(n,r,s).then(function(){i.initCompleted=!0,i.initWithDefaults=!0}).finally(function(){var e=performance.now()-o;i.fireClientEvent(o,e,"initialize",i.initCompleted,n.apiKey)}),e.abrupt("return",this.initPromise);case 8:case"end":return e.stop()}},e,this)})),function(t,r,s){return e.apply(this,arguments)})},{key:"initializeWithProvider",value:(t=(0,l.A)(u().mark(function e(t,r,s,n){var o,i,a=this;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,$.vd)(t),!this.initPromise){e.next=4;break}return(0,$.Gh)(o,this.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),e.abrupt("return",this.initPromise);case 4:return i=performance.now(),this.initOptions=o,this.provider=r,this.provider.setClientVersion(C.f),this.provider.setApplyUpdateCallback&&this.provider.setApplyUpdateCallback(this.applyUpdateCallback.bind(this)),this.initPromise=this.initWithProvider(o,r,s,n).then(function(){a.initCompleted=!0,a.initWithDefaults=!0}).finally(function(){var e=performance.now()-i;a.fireClientEvent(i,e,"initializeWithProvider",a.initCompleted,r.getApiKey?r.getApiKey():void 0)}),e.abrupt("return",this.initPromise);case 11:case"end":return e.stop()}},e,this)})),function(e,r,s,n){return t.apply(this,arguments)})},{key:"applyUpdateCallback",value:function(e){try{(this.initCompleted||this.initWithDefaults)&&(this.assertInitialized(this.statsigClient),this.dataAdapter.setBootstrapData(e.experimentValues),this.dataAdapter.setData(JSON.stringify(e.experimentValues)),this.statsigValuesUpdated())}catch(e){console.warn("Error when attempting to apply update",e)}}},{key:"fireClientEvent",value:function(e,t,r,s){var n,o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;null==(n=this.initOptions.analyticsWebClient)||n.then(function(n){var a=q({targetApp:o.initOptions.targetApp,clientVersion:C.f,success:s,startTime:e,totalTime:t},i&&{apiKey:i});n.sendOperationalEvent({action:r,actionSubject:"featureGatesClient",attributes:a,tags:["measurement"],source:"@atlaskit/feature-gate-js-client"})}).catch(function(e){o.initOptions.environment!==w.jQ.Production&&console.error("Analytics web client promise did not resolve",e)})}},{key:"initializeFromValues",value:(r=(0,l.A)(u().mark(function e(t,r,s){var n,o,i,a=this,l=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>3&&void 0!==l[3]?l[3]:{},o=(0,$.vd)(t),!this.initPromise){e.next=5;break}return(0,$.Gh)(o,this.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),e.abrupt("return",this.initPromise);case 5:return Object.prototype.hasOwnProperty.call(n,"has_updates")||(n.has_updates=!0),i=performance.now(),this.initOptions=o,this.initPromise=this.initFromValues(o,r,s,n).then(function(){a.initCompleted=!0,a.initWithDefaults=!0}).finally(function(){var e=performance.now()-i;a.fireClientEvent(i,e,"initializeFromValues",a.initCompleted)}),e.abrupt("return",this.initPromise);case 10:case"end":return e.stop()}},e,this)})),function(e,t,s){return r.apply(this,arguments)})},{key:"assertInitialized",value:function(e){if(!e)throw Error("Client must be initialized before using this method")}},{key:"updateUser",value:(c=(0,l.A)(u().mark(function e(t,r,s){var n,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertInitialized(this.statsigClient),n=(0,$.vd)(t),o=function(){return j.fetchExperimentValues(n,r,s).then(function(e){return{experimentValues:e.experimentValues,customAttributesFromFetch:e.customAttributes}})},e.next=5,this.updateUserUsingInitializeValuesProducer(o,r,s);case 5:case"end":return e.stop()}},e,this)})),function(e,t,r){return c.apply(this,arguments)})},{key:"updateUserWithProvider",value:(h=(0,l.A)(u().mark(function e(t,r){var s=this;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assertInitialized(this.statsigClient),this.provider){e.next=3;break}throw Error("Cannot update user using provider as the client was not initialised with a provider");case 3:return e.next=5,this.provider.setProfile(this.initOptions,t,r);case 5:return e.next=7,this.updateUserUsingInitializeValuesProducer(function(){return s.provider.getExperimentValues()},t,r);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"updateUserWithValues",value:(p=(0,l.A)(u().mark(function e(t,r){var s,n,o=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.length>2&&void 0!==o[2]?o[2]:{},this.assertInitialized(this.statsigClient),n=function(){return Promise.resolve({experimentValues:s,customAttributesFromFetch:r})},e.next=5,this.updateUserUsingInitializeValuesProducer(n,t,r);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return p.apply(this,arguments)})},{key:"initializeCalled",value:function(){return null!=this.initPromise}},{key:"initializeCompleted",value:function(){return this.initCompleted}},{key:"checkGate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{this.assertInitialized(this.statsigClient);var r=t.fireGateExposure;return this.statsigClient.checkGate(e,{disableExposureLog:!(void 0===r||r)})}catch(t){return this.hasCheckGateErrorOccurred||(console.warn({msg:"An error has occurred checking the feature gate. Only the first occurrence of this error is logged.",gateName:e,error:t}),this.hasCheckGateErrorOccurred=!0),!1}}},{key:"isGateExist",value:function(e){try{return this.assertInitialized(this.statsigClient),!this.statsigClient.getFeatureGate(e,{disableExposureLog:!0}).details.reason.includes("Unrecognized")}catch(e){return console.error("Error occurred when trying to check FeatureGate: ".concat(e)),!0}}},{key:"isExperimentExist",value:function(e){try{return this.assertInitialized(this.statsigClient),!this.statsigClient.getExperiment(e,{disableExposureLog:!0}).details.reason.includes("Unrecognized")}catch(e){return console.error("Error occurred when trying to check Experiment: ".concat(e)),!0}}},{key:"manuallyLogGateExposure",value:function(e){this.assertInitialized(this.statsigClient),this.statsigClient.checkGate(e)}},{key:"getExperiment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{this.assertInitialized(this.statsigClient);var r=t.fireExperimentExposure;return b.i.fromExperiment(this.statsigClient.getExperiment(e,{disableExposureLog:!(void 0===r||r)}))}catch(t){return this.hasGetExperimentErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment. Only the first occurrence of this error is logged.",experimentName:e,error:t}),this.hasGetExperimentErrorOccurred=!0),new b.i(e,{},"",{time:Date.now(),reason:_.f.Error})}}},{key:"getExperimentValue",value:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getExperiment(e,s);try{var o=s.typeGuard;return n.get(t,r,o)}catch(t){return this.hasGetExperimentValueErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment value. Only the first occurrence of this error is logged.",experimentName:e,defaultValue:r,options:s,error:t}),this.hasGetExperimentValueErrorOccurred=!0),r}}},{key:"manuallyLogExperimentExposure",value:function(e){this.assertInitialized(this.statsigClient),this.statsigClient.getExperiment(e)}},{key:"manuallyLogLayerExposure",value:function(e,t){var r;this.assertInitialized(this.statsigClient),null==(r=this.statsigClient.getLayer(e))||r.get(t)}},{key:"shutdownStatsig",value:function(){this.assertInitialized(this.statsigClient),this.statsigClient.shutdown()}},{key:"overrideGate",value:function(e,t){if(this.overrideAdapter.overrideGate(e,t),this.user){var r;null==(r=this.statsigClient)||r.updateUserSync(this.user,{disableBackgroundCacheRefresh:!0})}this.statsigValuesUpdated()}},{key:"clearGateOverride",value:function(e){this.overrideAdapter.removeGateOverride(e),this.statsigValuesUpdated()}},{key:"overrideConfig",value:function(e,t){this.overrideAdapter.overrideDynamicConfig(e,t),this.statsigValuesUpdated()}},{key:"clearConfigOverride",value:function(e){this.overrideAdapter.removeDynamicConfigOverride(e),this.statsigValuesUpdated()}},{key:"setOverrides",value:function(e){this.overrideAdapter.setOverrides(e),this.statsigValuesUpdated()}},{key:"getOverrides",value:function(){return this.overrideAdapter.getOverrides()}},{key:"clearAllOverrides",value:function(){this.overrideAdapter.removeAllOverrides(),this.statsigValuesUpdated()}},{key:"isCurrentUser",value:function(e,t){return(0,$.Gh)(this.currentIdentifiers,e)&&(0,$.Gh)(this.currentAttributes,t)}},{key:"onGateUpdated",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.subscriptions.onGateUpdated(e,function(n){var o=s.fireGateExposure;(void 0===o||o)&&r.manuallyLogGateExposure(e);try{t(n)}catch(t){console.warn("Error calling callback for gate ".concat(e," with value ").concat(n),t)}},this.checkGate.bind(this),s)}},{key:"onExperimentValueUpdated",value:function(e,t,r,s){var n=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.subscriptions.onExperimentValueUpdated(e,t,r,function(t){var r=o.fireExperimentExposure;(void 0===r||r)&&n.manuallyLogExperimentExposure(e);try{s(t)}catch(r){console.warn("Error calling callback for experiment ".concat(e," with value ").concat(t),r)}},this.getExperimentValue.bind(this),o)}},{key:"onAnyUpdated",value:function(e){return this.subscriptions.onAnyUpdated(e)}},{key:"init",value:(m=(0,l.A)(u().mark(function e(t,r,s){var n,o,i,l,c,d,h;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=q({},t),e.prev=1,l=j.fetchClientSdk(t).then(function(e){return n.sdkKey=e.clientSdkKey}),c=j.fetchExperimentValues(t,r,s),e.next=6,Promise.all([l,c]);case 6:d=e.sent,o=(h=(0,a.A)(d,2)[1]).experimentValues,i=h.customAttributes,e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("Error occurred when trying to fetch the Feature Gates client values, error: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)),console.warn("Initialising Statsig client without values"),e.next=19,this.initFromValues(n,r,s);case 19:throw e.t0;case 20:return e.abrupt("return",this.initFromValues(n,r,i,o));case 21:case"end":return e.stop()}},e,this,[[1,13]])})),function(e,t,r){return m.apply(this,arguments)})},{key:"initWithProvider",value:(f=(0,l.A)(u().mark(function e(t,r,s,n){var o,i,l,c,d,h,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=q(q({},t),{},{disableCurrentPageLogging:!0}),e.prev=1,e.next=4,r.setProfile(t,s,n);case 4:return c=r.getClientSdkKey().then(function(e){return o.sdkKey=e}),d=r.getExperimentValues(),e.next=8,Promise.all([c,d]);case 8:h=e.sent,i=(p=(0,a.A)(h,2)[1]).experimentValues,l=p.customAttributesFromFetch,e.next=22;break;case 15:return e.prev=15,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("Error occurred when trying to fetch the Feature Gates client values, error: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)),console.warn("Initialising Statsig client without values"),e.next=21,this.initFromValues(o,s,n);case 21:throw e.t0;case 22:return e.abrupt("return",this.initFromValues(o,s,l,i));case 23:case"end":return e.stop()}},e,this,[[1,15]])})),function(e,t,r,s){return f.apply(this,arguments)})},{key:"initFromValues",value:(g=(0,l.A)(u().mark(function e(t,r,s){var n,o,a,l,c,h,p,m=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=m.length>3&&void 0!==m[3]?m[3]:{},this.overrideAdapter.initFromStoredOverrides(),this.currentIdentifiers=r,this.currentAttributes=s,(a=(0,$.M1)(t)).sdkKey||(a.sdkKey=H),null!=(n=a.networkConfig)&&n.logEventUrl||(a.networkConfig=q(q({},a.networkConfig),{},{logEventUrl:"https://xp.atlassian.com/v1/rgstr"})),a.perimeter===w.cd.FEDRAMP_MODERATE&&(a.disableLogging=!0),l=a.sdkKey,c=a.environment,a.updateUserCompletionCallback,a.perimeter,h=(0,i.A)(a,z),this.user=(0,$.OA)(r,s),p=q(q({},h),{},{environment:{tier:c},includeCurrentPageUrlWithEvents:!1,dataAdapter:this.dataAdapter,overrideAdapter:this.overrideAdapter,logEventCompressionMode:d.LogEventCompressionMode.Forced}),r.stableId?d.StableID.setOverride(r.stableId,l):p.disableStableID=!0,e.prev=12,this.statsigClient=new d.StatsigClient(l,this.user,p),this.dataAdapter.setBootstrapData(o),e.next=17,this.statsigClient.initializeAsync();case 17:e.next=29;break;case 19:return e.prev=19,e.t0=e.catch(12),e.t0 instanceof Error&&console.error("Error occurred when trying to initialise the Statsig client, error: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)),console.warn("Initialising Statsig client with default sdk key and without values"),this.statsigClient=new d.StatsigClient(H,this.user,p),this.dataAdapter.setBootstrapData(),e.next=27,this.statsigClient.initializeAsync();case 27:throw this.initWithDefaults=!0,e.t0;case 29:case"end":return e.stop()}},e,this,[[12,19]])})),function(e,t,r){return g.apply(this,arguments)})},{key:"updateUserUsingInitializeValuesProducer",value:(O=(0,l.A)(u().mark(function e(t,r,s){var n,o,i,a=this;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assertInitialized(this.statsigClient),this.initPromise){e.next=3;break}throw Error("The client must be initialized before you can update the user.");case 3:if(!this.isCurrentUser(r,s)){e.next=5;break}return e.abrupt("return",this.initPromise);case 5:return n=this.initPromise,e.prev=6,e.next=9,this.initPromise;case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return o=t(),i=this.updateStatsigClientUser(o,r,s),this.initPromise=i.catch((0,l.A)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.initPromise=n,!a.provider){e.next=4;break}return e.next=4,a.provider.setProfile(a.initOptions,a.currentIdentifiers,a.currentAttributes);case 4:case"end":return e.stop()}},e)}))),e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this,[[6,11]])})),function(e,t,r){return O.apply(this,arguments)})},{key:"updateStatsigClientUser",value:(E=(0,l.A)(u().mark(function e(t,r,s){var n,o,i,a,l,c,d,h,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertInitialized(this.statsigClient),e.prev=1,e.next=4,t;case 4:i=e.sent,a=(0,$.OA)(r,i.customAttributesFromFetch),e.next=13;break;case 8:throw e.prev=8,e.t0=e.catch(1),d=e.t0 instanceof Error?e.t0.message:JSON.stringify(e.t0),null==(l=(c=this.initOptions).updateUserCompletionCallback)||l.call(c,!1,d),e.t0;case 13:return h=!0,p=null,e.prev=15,this.dataAdapter.setBootstrapData(i.experimentValues),this.user=a,e.next=20,this.statsigClient.updateUserAsync(this.user);case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(15),h=!1,p=String(e.t1);case 26:if(null==(n=this.initOptions)||null==(o=n.updateUserCompletionCallback)||o.call(n,h,p),!h){e.next=33;break}this.currentIdentifiers=r,this.currentAttributes=s,this.subscriptions.anyUpdated(),e.next=34;break;case 33:throw Error("Failed to update user. An unexpected error occured.");case 34:case"end":return e.stop()}},e,this,[[1,8],[15,22]])})),function(e,t,r){return E.apply(this,arguments)})},{key:"getPackageVersion",value:function(){return C.f}},{key:"getLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{this.assertInitialized(this.statsigClient);var r=t.fireLayerExposure;return v.W.fromLayer(this.statsigClient.getLayer(e,{disableExposureLog:!(void 0===r||r)}))}catch(t){return this.hasGetLayerErrorOccurred||(console.warn({msg:"An error has occurred getting the layer. Only the first occurrence of this error is logged.",layerName:e,error:t}),this.hasGetLayerErrorOccurred=!0),v.W.fromLayer((0,d._makeLayer)(e,{reason:"Error"},null))}}},{key:"getLayerValue",value:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getLayer(e,s);try{var o=s.typeGuard;return n.get(t,r,o)}catch(t){return this.hasGetLayerValueErrorOccurred||(console.warn({msg:"An error has occurred getting the layer value. Only the first occurrence of this error is logged.",layerName:e,defaultValue:r,options:s,error:t}),this.hasGetLayerValueErrorOccurred=!0),r}}}])}(),Q=(0,n.A)(function e(){(0,s.A)(this,e)},null,[{key:"isGateExists",value:function(e){return this.client.isGateExist(e)}},{key:"isExperimentExists",value:function(e){return this.client.isExperimentExist(e)}}]);(0,o.A)(Q,"client",new J),(0,o.A)(Q,"hasCheckGateErrorOccurred",!1),(0,o.A)(Q,"hasGetExperimentValueErrorOccurred",!1),(0,o.A)(Q,"checkGate",function(e,t){try{if("undefined"!=typeof window&&window.__CRITERION__&&"function"==typeof window.__CRITERION__.getFeatureFlagOverride){var r=window.__CRITERION__.getFeatureFlagOverride(e);if(void 0!==r)return r}}catch(t){Q.hasCheckGateErrorOccurred||(console.warn({msg:"An error has occurred checking the feature gate from criterion override. Only the first occurrence of this error is logged.",gateName:e,error:t}),Q.hasCheckGateErrorOccurred=!0)}return Q.client.checkGate(e,t)}),(0,o.A)(Q,"getExperimentValue",function(e,t,r,s){try{if("undefined"!=typeof window&&window.__CRITERION__&&"function"==typeof window.__CRITERION__.getExperimentValueOverride){var n=window.__CRITERION__.getExperimentValueOverride(e,t);if(null!=n)return n}}catch(t){return Q.hasGetExperimentValueErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment value from criterion override. Only the first occurrence of this error is logged.",experimentName:e,defaultValue:r,options:s,error:t}),Q.hasGetExperimentValueErrorOccurred=!0),r}return Q.client.getExperimentValue(e,t,r,s)}),(0,o.A)(Q,"initializeCalled",Q.client.initializeCalled.bind(Q.client)),(0,o.A)(Q,"initializeCompleted",Q.client.initializeCompleted.bind(Q.client)),(0,o.A)(Q,"initialize",Q.client.initialize.bind(Q.client)),(0,o.A)(Q,"initializeWithProvider",Q.client.initializeWithProvider.bind(Q.client)),(0,o.A)(Q,"initializeFromValues",Q.client.initializeFromValues.bind(Q.client)),(0,o.A)(Q,"manuallyLogGateExposure",Q.client.manuallyLogGateExposure.bind(Q.client)),(0,o.A)(Q,"getExperiment",Q.client.getExperiment.bind(Q.client)),(0,o.A)(Q,"manuallyLogExperimentExposure",Q.client.manuallyLogExperimentExposure.bind(Q.client)),(0,o.A)(Q,"manuallyLogLayerExposure",Q.client.manuallyLogLayerExposure.bind(Q.client)),(0,o.A)(Q,"shutdownStatsig",Q.client.shutdownStatsig.bind(Q.client)),(0,o.A)(Q,"overrideGate",Q.client.overrideGate.bind(Q.client)),(0,o.A)(Q,"clearGateOverride",Q.client.clearGateOverride.bind(Q.client)),(0,o.A)(Q,"overrideConfig",Q.client.overrideConfig.bind(Q.client)),(0,o.A)(Q,"clearConfigOverride",Q.client.clearConfigOverride.bind(Q.client)),(0,o.A)(Q,"setOverrides",Q.client.setOverrides.bind(Q.client)),(0,o.A)(Q,"getOverrides",Q.client.getOverrides.bind(Q.client)),(0,o.A)(Q,"clearAllOverrides",Q.client.clearAllOverrides.bind(Q.client)),(0,o.A)(Q,"isCurrentUser",Q.client.isCurrentUser.bind(Q.client)),(0,o.A)(Q,"onGateUpdated",Q.client.onGateUpdated.bind(Q.client)),(0,o.A)(Q,"onExperimentValueUpdated",Q.client.onExperimentValueUpdated.bind(Q.client)),(0,o.A)(Q,"onAnyUpdated",Q.client.onAnyUpdated.bind(Q.client)),(0,o.A)(Q,"updateUser",Q.client.updateUser.bind(Q.client)),(0,o.A)(Q,"updateUserWithProvider",Q.client.updateUserWithProvider.bind(Q.client)),(0,o.A)(Q,"updateUserWithValues",Q.client.updateUserWithValues.bind(Q.client)),(0,o.A)(Q,"getPackageVersion",Q.client.getPackageVersion.bind(Q.client)),(0,o.A)(Q,"getLayer",Q.client.getLayer.bind(Q.client)),(0,o.A)(Q,"getLayerValue",Q.client.getLayerValue.bind(Q.client));var Y=Q;if("undefined"!=typeof window)if(void 0===window.__FEATUREGATES_JS__)window.__FEATUREGATES_JS__=Q;else{var X,Z,ee=(null==(X=Y=window.__FEATUREGATES_JS__)||null==(Z=X.getPackageVersion)?void 0:Z.call(X))||"4.10.0 or earlier";ee!==C.f&&console.warn(`Multiple versions of FeatureGateClients found on the current page.
      The currently bound version is `.concat(ee," when module version ").concat(C.f," was loading."))}let et=Y},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/DynamicConfig.js":(e,t,r)=>{"use strict";r.d(t,{i:()=>a});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/utils.js"),a=function(){function e(t,r,s,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,n.A)(this,e),this.value=r,this._name=t,this._ruleID=s,this._secondaryExposures=i,this._allocatedExperimentName=a,this._evaluationDetails=o,this._onDefaultValueFallback=l}return(0,o.A)(e,[{key:"get",value:function(e,t,r){var n,o,i=this.getValue(e,t);if(null==i)return t;var a=Array.isArray(t)?"array":(0,s.A)(t),l=Array.isArray(i)?"array":(0,s.A)(i);return r?r(i)?(this.fireExposure(e),i):(null==(o=this._onDefaultValueFallback)||o.call(this,this,e,a,l),t):null==t||a===l?(this.fireExposure(e),i):(null==(n=this._onDefaultValueFallback)||n.call(this,this,e,a,l),t)}},{key:"getValue",value:function(e,t){return null==e?this.value:(null==t&&(t=null),null==this.value[e])?t:(this.fireExposure(e),this.value[e])}},{key:"fireExposure",value:function(e){this.experiment&&this.experiment.get(e)}}],[{key:"fromExperiment",value:function(t){var r,s,n,o=new e(t.name,t.value,t.ruleID,(0,i.MW)(t.details),(0,i.aj)(null!=(r=null==(s=t.__evaluation)?void 0:s.secondary_exposures)?r:[]),null!=(n=t.groupName)?n:void 0);return o.experiment=t,o}}])}()},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/Layer.js":(e,t,r)=>{"use strict";r.d(t,{W:()=>a});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/utils.js"),a=function(){function e(t,r,s,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];(0,n.A)(this,e),this._logParameterFunction=i,this._name=t,this._value=JSON.parse(JSON.stringify(null!=r?r:{})),this._ruleID=null!=s?s:"",this._evaluationDetails=o,this._secondaryExposures=a,this._undelegatedSecondaryExposures=l,this._allocatedExperimentName=c,this._explicitParameters=u}return(0,o.A)(e,[{key:"get",value:function(e,t,r){var n=this,o=this._value[e];if(null==o)return t;var i=function(){return n._logLayerParameterExposure(e),o};return r?r(o)?i():t:null==t||(0,s.A)(o)===(0,s.A)(t)&&Array.isArray(t)===Array.isArray(o)?i():t}},{key:"getValue",value:function(e,t){void 0==t&&(t=null);var r=this._value[e];return null!=r&&this._logLayerParameterExposure(e),null!=r?r:t}},{key:"_logLayerParameterExposure",value:function(e){var t;null==(t=this._logParameterFunction)||t.call(this,this,e)}}],[{key:"fromLayer",value:function(t){var r,s,n,o,a,l;return new e(t.name,t.__value,t.ruleID,(0,i.MW)(t.details),function(e,r){return t.get(r)},(0,i.aj)(null!=(r=null==(s=t.__evaluation)?void 0:s.secondary_exposures)?r:[]),(0,i.aj)(null!=(n=null==(o=t.__evaluation)?void 0:o.undelegated_secondary_exposures)?n:[]),null==(a=t.__evaluation)?void 0:a.allocated_experiment_name,null==(l=t.__evaluation)?void 0:l.explicit_parameters)}}])}()},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/types.js":(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var s=function(e){return e.Error="Error",e.LocalOverride="LocalOverride",e.Unrecognized="Unrecognized",e.Uninitialized="Uninitialized",e.NetworkNotModified="NetworkNotModified",e.Network="Network",e.InvalidBootstrap="InvalidBootstrap",e.Bootstrap="Bootstrap",e.Cache="Cache",e.Unknown="Unknown",e}({})},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/types.js":(e,t,r)=>{"use strict";r.d(t,{cd:()=>n,jQ:()=>s});var s=function(e){return e.Development="development",e.Staging="staging",e.Production="production",e}({}),n=function(e){return e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e}({})},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/utils.js":(e,t,r)=>{"use strict";r.d(t,{Gh:()=>p,M1:()=>f,MW:()=>y,OA:()=>m,aj:()=>b,vd:()=>h});var s=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),n=r("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./node_modules/@atlaskit/atlassian-context/dist/esm/services/host-based-lookup/is-fedramp/index.js"),a=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/compat/types.js"),l=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/types.js"),c=["api","disableCurrentPageLogging","loggingIntervalMillis","loggingBufferMaxSize","localMode","eventLoggingApi","eventLoggingApiForRetries","disableLocalStorage","ignoreWindowUndefined","disableAllLogging","initTimeoutMs","disableNetworkKeepalive","overrideStableID","disableErrorLogging","disableAutoMetricsLogging"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(e){return d({perimeter:(0,i.E)()?l.cd.FEDRAMP_MODERATE:l.cd.COMMERCIAL},e)},p=function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var r=Object.entries(e),s=Object.entries(t);if(r.length!==s.length)return!1;var o=function(e,t){var r=(0,n.A)(e,1)[0],s=(0,n.A)(t,1)[0];return r.localeCompare(s)};r.sort(o),s.sort(o);for(var i=0;i<r.length;i++)if((0,n.A)(r[i],2)[1]!==(0,n.A)(s[i],2)[1])return!1;return!0},m=function(e,t){var r={customIDs:e,custom:t};return e.atlassianAccountId&&(r.userID=e.atlassianAccountId),r},f=function(e){var t=e.api,r=e.disableCurrentPageLogging,n=e.loggingIntervalMillis,o=e.loggingBufferMaxSize,i=e.localMode,a=e.eventLoggingApi,l=e.eventLoggingApiForRetries,u=e.disableLocalStorage,h=e.ignoreWindowUndefined,p=e.disableAllLogging;return d(d({},(e.initTimeoutMs,e.disableNetworkKeepalive,e.overrideStableID,e.disableErrorLogging,e.disableAutoMetricsLogging,(0,s.A)(e,c))),{},{networkConfig:{api:t,logEventUrl:a?a+"rgstr":void 0,logEventFallbackUrls:l?[l]:void 0,preventAllNetworkTraffic:i||!h&&"undefined"==typeof window},includeCurrentPageUrlWithEvents:!r,loggingIntervalMs:n,loggingBufferMaxSize:o,disableStorage:void 0===u?i:u,disableLogging:void 0===p?i:p})},g=Object.entries(a.f).map(function(e){var t=(0,n.A)(e,2),r=t[0],s=t[1];return[r.toLowerCase(),s]}),y=function(e){var t,r,s,o=e.reason.toLowerCase();return{reason:null!=(t=null==(r=g.find(function(e){var t=(0,n.A)(e,1)[0];return o.includes(t)}))?void 0:r[1])?t:a.f.Unknown,time:null!=(s=e.receivedAt)?s:Date.now()}},b=function(e){return e.map(function(e){return"string"==typeof e?{gate:e}:e})}},"./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/version.js":(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var s="5.5.1"},"./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js":(e,t,r)=>{"use strict";r.d(t,{fg:()=>g,D:()=>f});var s,n,o=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/FeatureGates.js"),i=(null==globalThis||null==(s=globalThis.process)||null==(s=s.env)?void 0:s.JEST_WORKER_ID)===void 0&&(null==globalThis||null==(n=globalThis.process)||null==(n=n.env)?void 0:n.NODE_ENV)!=="production",a=function(){var e;i&&(e=console).debug.apply(e,arguments)},l=r("./node_modules/process/browser.js"),c="__PLATFORM_FEATURE_FLAGS__",u=void 0!==l&&void 0!==l.env,d=!!u&&"true"===l.env.ENABLE_PLATFORM_FF,h=!!u&&"true"===l.env.STORYBOOK_ENABLE_PLATFORM_FF,p=d||h,m="undefined"!=typeof window?window:globalThis;function f(e){m[c].booleanResolver=e}function g(e){if(p)return a('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',"@atlaskit/platform-feature-flags",e),!0;try{if((null==(t=m[c])?void 0:t.booleanResolver)===void 0||(null==(r=m[c])?void 0:r.booleanResolver)===null)return o.Ay.checkGate(e);var t,r,s,n=null==(s=m[c])?void 0:s.booleanResolver(e);if("boolean"!=typeof n)return console.warn("".concat(e," resolved to a non-boolean value, returning false for safety")),!1;return n}catch(e){return!1}}m[c]=m[c]||{booleanResolver:void 0}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js":(e,t,r)=>{"use strict";r.d(t,{IC:()=>P,vr:()=>T,ff:()=>R,oG:()=>L,rY:()=>D});var s,n,o=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js"),a=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),u=r("./node_modules/process/browser.js"),d=null!=(s=null==u?void 0:u.env._PACKAGE_NAME_)?s:"",h=null!=(n=null==u?void 0:u.env._PACKAGE_VERSION_)?n:"",p=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),m=r("./node_modules/@babel/runtime/regenerator/index.js"),f=r.n(m),g=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),y=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),b=new((0,r("./node_modules/@babel/runtime/helpers/esm/createClass.js").A)(function e(){(0,y.A)(this,e)},[{key:"cachedSamplingConfig",get:function(){return this.cache},set:function(e){this.cache=e}}])),v=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),_={usedGetCookie:1e5,usedGetCookieError:1,usedSetCookie:1e3,usedSetCookieError:1,usedSetStrictlyNecessaryCookie:1e4,usedSetStrictlyNecessaryCookieError:1,usedDeleteCookie:10,usedDeleteCookieError:1,usedCheckThirdParty:1e5,checkThirdPartyError:1,usedDocumentCookie:100,usedDocumentCookieError:1,initializeControlsError:1,loadStorageControlsError:1,updatePreferencesError:1,fetchConsentPreferencesError:1,saveConsentPreferencesError:1,usedAtlBrowserStorageGetItem:100,usedAtlBrowserStorageGetItemError:1,usedAtlBrowserStorageSetItem:100,usedAtlBrowserStorageSetItemError:1,usedAtlBrowserStorageSetStrictlyNecessaryItem:100,usedAtlBrowserStorageSetStrictlyNecessaryItemError:1,usedCheckIfSetByPackageError:1,renderConsentBannerError:1,bannerAppearanceAfterDismissal:1},w=["loadStorageControlsError"];function C(){return(C=(0,p.A)(f().mark(function e(){var t,r,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.cachedSamplingConfig){e.next=2;break}return e.abrupt("return",b.cachedSamplingConfig);case 2:if(!(0,v.f)()){e.next=4;break}return e.abrupt("return",void 0);case 4:return t=(0,l.re)().loadCache,e.next=7,t(g.kU.Cookies);case 7:return b.cachedSamplingConfig=s=null==(r=e.sent)?void 0:r.analyticsSamplingRatio,e.abrupt("return",s);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=(0,p.A)(f().mark(function e(t){var r,s,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.includes(t)){e.next=2;break}return e.abrupt("return",_[t]);case 2:return e.next=4,function(){return C.apply(this,arguments)}();case 4:return n=(null==(s=null!=(r=e.sent)?r:_)?void 0:s[t])!==void 0?s[t]:_[t],e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=(0,p.A)(f().mark(function e(t,r){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return O.apply(this,arguments)}(t);case 2:var s;s=e.sent,Math.floor(Math.random()*s)||r();case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A=function(){var e=window.location.hostname;return e.includes(".dev.")||e.includes(".stg.")?i.sR.STAGING:e.includes("localhost")||e.includes("ngrok")||e.includes("atlastunnel")?i.sR.DEV:i.sR.PROD},I=function(e){var t="";if(!e)return t;var r=function(t){return new RegExp("^".concat(t,"(/|$)")).test(String(e))};return r("/wiki")&&(t="/wiki"),r("/jira")&&(t="/jira"),r("/compass")&&(t="/compass"),r("/canvas")&&(t="/canvas"),(r("/servicedesk")||r("/jira/servicedesk"))&&(t="/servicedesk"),t},j=function(){var e=window.location,t=e.origin,r=I(e.pathname),s="".concat(t).concat(r),n=("https://trello.com"===s?"trello":null)||r.slice(1);return{domain:s,product:n}},x=function(e){var t,r,s=j(),n=s.domain,o=s.product;return S({packageName:d,packageVersion:h,domain:n,product:null!=(t=null==(r=(0,l.re)().product)?void 0:r.toLowerCase())?t:o},e&&e)},P=function(){var e;return function(){try{!e&&(0,l.re)().analyticsEnabled&&(e=new a.Ay({env:A(),product:"atlassianCookies"},{useLegacyUrl:!1,disableCookiePersistence:!0}))}catch(e){c.V.error("Failed to initialize AnalyticsWebClient. ".concat(e))}if((0,l.re)().analyticsEnabled)return e}}();function T(e){!function(e,t){E.apply(this,arguments)}(e.action,function(){var t;return null==(t=P())?void 0:t.sendOperationalEvent({source:"package",actionSubject:"package",action:e.action,attributes:x(e.attributes)})})}function D(e){var t;null==(t=P())||t.sendUIEvent(S(S({},e),{},{attributes:x(e.attributes)}))}function R(e){var t;null==(t=P())||t.sendScreenEvent(S(S({},e),{},{attributes:x(e.attributes)}))}function L(e){var t;null==(t=P())||t.sendTrackEvent(S(S({},e),{},{attributes:x(e.attributes)}))}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js":(e,t,r)=>{"use strict";r.d(t,{re:()=>T,B_:()=>D});var s,n,o,i,a,l,c,u,d,h,p=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),m=r("./node_modules/@babel/runtime/regenerator/index.js"),f=r.n(m),g=r("./node_modules/js-cookie/src/js.cookie.js"),y=r.n(g),b=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),v=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),_=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),w=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),C=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),O=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),E="https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories_COOKIE.json",k="https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories_LOCAL_STORAGE.json",S="https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories_SESSION_STORAGE.json",A=(0,O.A)((0,O.A)((0,O.A)({},v.kU.Cookies,E),v.kU.LocalStorage,k),v.kU.SessionStorage,S),I={commercial:A,"fedramp-moderate":(0,O.A)((0,O.A)((0,O.A)({},v.kU.Cookies,"https://atlassian-cookies--categories.us-east-1.prod.cdn.atlassian-us-gov-mod.com/categories_COOKIE.json"),v.kU.LocalStorage,"https://atlassian-cookies--categories.us-east-1.prod.cdn.atlassian-us-gov-mod.com/categories_LOCAL_STORAGE.json"),v.kU.SessionStorage,"https://atlassian-cookies--categories.us-east-1.prod.cdn.atlassian-us-gov-mod.com/categories_SESSION_STORAGE.json")},j=function(){var e,t;return(0,w.A)(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commercial";if((0,_.A)(this,e),(0,b.fg)("fedramp-cookies-controls")){var s=I[r]||A;this.cacheUrl=s[t]}else switch(t){case v.kU.Cookies:this.cacheUrl=E;break;case v.kU.LocalStorage:this.cacheUrl=k;break;case v.kU.SessionStorage:this.cacheUrl=S;break;default:this.cacheUrl="https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories.json"}},[{key:"clearStorageControlsDataCache",value:function(){this.localResponseCache=void 0,this.localResponsePromiseCache=void 0,this.localResponseJsonPromiseCache=void 0}},{key:"handleCategoriesResponse",value:(e=(0,p.A)(f().mark(function e(t){var r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("Failed to fetch Cookies Cache! Cached promise was undefined");case 2:return e.next=4,t;case 4:if((r=e.sent).ok){e.next=7;break}throw Error("Failed to fetch Cookies Cache! status: ".concat(r.status));case 7:return this.localResponseJsonPromiseCache=this.localResponseJsonPromiseCache||(null==r?void 0:r.json()),e.abrupt("return",this.localResponseJsonPromiseCache);case 9:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"loadStorageControlsData",value:(t=(0,p.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.localResponseCache){e.next=4;break}return e.abrupt("return",this.localResponseCache);case 4:return e.prev=4,this.localResponsePromiseCache||(C.V.debug("Loading cache ".concat(this.cacheUrl)),this.localResponsePromiseCache=fetch(this.cacheUrl)),e.next=8,this.handleCategoriesResponse(this.localResponsePromiseCache);case 8:return this.localResponseCache=e.sent,e.abrupt("return",this.localResponseCache);case 12:e.prev=12,e.t0=e.catch(4),C.V.errorWithOperationalEvent({action:"loadStorageControlsError",message:e.t0.message||""}),this.clearStorageControlsDataCache();case 16:case"end":return e.stop()}},e,this,[[4,12]])})),function(){return t.apply(this,arguments)})}])}(),x=!1,P=function(){var e=(0,p.A)(f().mark(function e(t){var r,s,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===v.kU.Cookies?3:e.t0===v.kU.LocalStorage?6:e.t0===v.kU.SessionStorage?9:12;break;case 3:return e.next=5,null==(r=u)?void 0:r.loadStorageControlsData();case 5:case 8:case 11:return e.abrupt("return",e.sent);case 6:return e.next=8,null==(s=d)?void 0:s.loadStorageControlsData();case 9:return e.next=11,null==(n=h)?void 0:n.loadStorageControlsData();case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),T=function(){return{analyticsEnabled:null==s||s,product:n,perimeter:o,webStorageEnabled:null!=i&&i,localConsentMode:null!=a&&a,packageDebugMode:l,allowUncategorizedCookiesInOverrides:null!=c&&c,cookiesCacheLoader:u,localStorageCacheLoader:d,sessionStorageCacheLoader:h,loadCache:P,hasInitialized:x}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.webStorageEnabled,r=e.allowUncategorizedCookiesInOverrides,p=e.localConsentMode,m=void 0!==p&&p,f=e.product,g=void 0===f?"all":f,_=e.perimeter,w=void 0===_?"commercial":_,O=e.analyticsEnabled;C.V.debug("Initialize global state invoked"),(!n||null==n||"all"===n)&&g&&(n=g),void 0!==t&&void 0===i&&(i=t&&!(0,b.fg)("platform_moonjelly_bsc_master_killswitch")&&!(0,b.fg)("platform_moonjelly_bsc_web_storage_killswitch")),void 0!==r&&void 0===c&&(c=r),x||(a=(0,b.fg)("fedramp-cookies-controls")?m||"fedramp-moderate"===w:m,s=void 0===O||O,o=w,u=new j(v.kU.Cookies,w),d=new j(v.kU.LocalStorage,w),h=new j(v.kU.SessionStorage,w),(0,b.fg)("platform_moonjelly_bsc_debug_mode")&&(l=!!y().get("atl-bsc-debug-mode")),x=!0)}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/helpers.js":(e,t,r)=>{"use strict";r.d(t,{J:()=>n,l:()=>s});var s=function(e){return Number(e).toString()},n=function(e){if(e)return!!Number(e)}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js":(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var s=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),n=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),o=function(){var e="undefined"==typeof document||"undefined"==typeof window||!Document||!Document.prototype||!Object||!Object.defineProperty,t=!n.fg,r=!s.Ay;return!!e||!!t||!!r}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/item-processing/index.js":(e,t,r)=>{"use strict";r.d(t,{XA:()=>g});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("./node_modules/@babel/runtime/regenerator/index.js"),i=r.n(o),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/preferences-controls/get-preferences/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(e,t){for(var r=t,s=0;s<e.length;){var n=r[e[s]];if(void 0===n)break;if("number"==typeof n)return n;r=n,s++}return null},p=function(e,t){for(var r=0;r<e.length;){var s=function(e){for(var r,s=t,n="",o=0;o<e.length;o++){var i=e[o];if(void 0===(s=s[i]))break;if(n+=i,"number"==typeof s){r=s;break}}return n===e?r:void 0}(e.slice(r));if(void 0!==s)return s;r++}return null},m=function(e,t,r){var s=null==r?void 0:r.toLowerCase(),o=null,i=t.categories,a=t.patterns,c=d(d({},t.keys.all),s?t.keys[s]:{}),u=d(d({},a.startsWith.all),s?a.startsWith[s]:{}),m=d(d({},a.endsWith.all),s?a.endsWith[s]:{});Object.keys(c).includes(e)?o=c[e]:null===(o=h(e,u))&&(o=p(e,m));var f=(0,n.A)((0,n.A)((0,n.A)((0,n.A)((0,n.A)({},i.STRICTLY_NECESSARY,l.A7.StrictlyNecessary),i.FUNCTIONAL,l.A7.Functional),i.ANALYTICS,l.A7.Analytics),i.MARKETING,l.A7.Marketing),i.UNKNOWN,l.A7.Unknown);return null!==o?f[o]:null},f=function(){var e=(0,s.A)(i().mark(function e(t,r,s){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.re)().loadCache(r);case 2:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",m(t,n,s));case 8:case"end":return e.stop()}},e)}));return function(t,r,s){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.A)(i().mark(function e(t){var r,s,n,o,c,u,d,h,p,m,g;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.itemKey,n=void 0===(s=t.allowedCallback)?function(){}:s,c=void 0===(o=t.blockedCallback)?function(){}:o,u=t.storageType,d=t.productName,e.next=3,f(r,u,d);case 3:if((p=e.sent)!==l.A7.StrictlyNecessary){e.next=8;break}h=!0,e.next=14;break;case 8:return e.next=10,(0,a.l)();case 10:m=e.sent,g=!1,m&&p&&(g=m[p]),h=g;case 14:return h?null==n||n():null==c||c({itemHasCategory:null!=p}),e.abrupt("return",h);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js":(e,t,r)=>{"use strict";r.d(t,{V:()=>d});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}var u="[browser-storage-controls]",d=(0,o.A)(function e(){(0,n.A)(this,e)},null,[{key:"info",value:function(e,t){console.log("".concat(u,": ").concat(e),t?JSON.stringify(t):"")}},{key:"error",value:function(e,t){console.error("".concat(u,": ").concat(e),t?JSON.stringify(t):"")}},{key:"errorWithOperationalEvent",value:function(e){var t=e.action,r=e.attributes,n=e.message,o=e.metadata;try{(0,a.vr)({action:t,attributes:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({error:n},void 0===r?{}:r)})}catch(e){this.error("Failed to send operational event on error: ".concat(t,". ").concat(e.message||""))}this.error(n,o?JSON.stringify(o):"")}},{key:"warn",value:function(e,t){console.warn("".concat(u,": ").concat(e),t?JSON.stringify(t):"")}},{key:"debug",value:function(e,t){(0,l.re)().packageDebugMode&&(0,i.fg)("platform_moonjelly_bsc_debug_mode")&&console.debug("".concat(u,": DEBUG ").concat(e),t?JSON.stringify(t):"")}}])},"./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js":(e,t,r)=>{"use strict";r.d(t,{Ao:()=>f,Bk:()=>b,CK:()=>d,Iw:()=>p,OF:()=>a,PN:()=>h,bK:()=>u,bT:()=>l,dx:()=>g,gV:()=>m,oG:()=>y,sD:()=>v,vk:()=>c});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var a="atl-gdpr-consent",l="atl-bsc-consent-token",c="atl-bsc-show-banner",u="atl-bsc-current-locale",d="atl-bsc-consent-token-fallback",h="atl-testing-consents",p="atl-bsc-banner-dismissed-time",m=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},n.A7.StrictlyNecessary,!0),n.A7.Functional,!0),n.A7.Marketing,!0),n.A7.Analytics,!0),n.A7.Unknown,!0),f=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},n.A7.StrictlyNecessary,!0),n.A7.Functional,!1),n.A7.Marketing,!1),n.A7.Analytics,!1),n.A7.Unknown,!1),g=i(i({},f),{},(0,s.A)((0,s.A)((0,s.A)({},n.RK.ConsentsAreDefault,!0),n.RK.UserIsAuthenticated,!1),n.RK.ConsentDataUnavailable,!0)),y="001",b="002",v="003"},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/banner-controls/get-banner-visibility/index.js":(e,t,r)=>{"use strict";r.d(t,{H:()=>m});var s=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/helpers.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/utils.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/transformer/index.js"),c=function(e){var t=(0,l.Eu)(e).isV002,r=e[8];return t&&(r="1"===e[7]?"0":"1"),r},u=function(e){if(e){var t=c(e),r=!(0,n.J)(t),s=!(0,i.gy)(e);if(r&&s)return!s;if(!r&&s)return!1}return!0},d=function(e){var t=e.consentToken,r=e.fallbackConsentToken,s=!!(0,i.gy)(t);return s?u(r):!(0,i.yl)(t)&&!!s||!r},h=function(e){if(e){var t=c(e),r=!(0,n.J)(t);if(!(0,i.gy)(e))return!!r}return!0},p=function(e){var t=e.consentToken,r=e.consentTimestamp,s=e.fallbackConsentToken;return(0,i.gy)(t)?h(s):r?(0,i.SA)(r):!s},m=function(e){var t=e.consentToken,r=e.consentTimestamp,i=e.fallbackConsentToken,l=(0,s.f)()?i:i||(0,a.R)(o.CK),u=c(t),h=!(0,n.J)(u);return h?d({consentToken:t,fallbackConsentToken:l}):p({consentToken:t,fallbackConsentToken:l,consentTimestamp:r})}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/delete-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var s=r("./node_modules/js-cookie/src/js.cookie.js"),n=r.n(s),o=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),l=function(e,t){if((0,o.fg)("platform_moonjelly_bsc_master_killswitch"))n().remove(e,t);else try{(0,i.vr)({action:"usedDeleteCookie",attributes:{cookieKey:e}}),n().remove(e,t)}catch(t){a.V.errorWithOperationalEvent({action:"usedDeleteCookieError",attributes:{cookieKey:e},message:"Failed to use delete cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-consent-token/utils.js":(e,t,r)=>{"use strict";r.d(t,{L:()=>u});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/regenerator/index.js"),o=r.n(n),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/index.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/transformer/index.js"),u=function(){var e=(0,s.A)(o().mark(function e(t){var r,s,n,u,d,h,p;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.fy)();case 2:return s=(r=e.sent).consentToken,n=r.consentTimestamp,u=r.consentHubInaccessible,(d=(0,c.Eu)(s).isValid)&&u&&(t?s=t:(0,i.fg)("platform_moonjelly_bsc_fallback_token_audit")?(h=a.sD,p=s.slice(3,7),s="".concat(h).concat(p).concat("111")):s="".concat(s.slice(0,8),"1111")),e.abrupt("return",d?{consentToken:s,consentTimestamp:n}:void 0);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{R:()=>l});var s=r("./node_modules/js-cookie/src/js.cookie.js"),n=r.n(s),o=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js");function l(e){if((0,o.fg)("platform_moonjelly_bsc_master_killswitch"))return e?n().get(e):n().get();try{return(0,i.vr)({action:"usedGetCookie",attributes:{cookieKey:e}}),e?n().get(e):n().get()}catch(t){a.V.errorWithOperationalEvent({action:"usedGetCookieError",attributes:{cookieKey:e},message:"Failed to use get cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/initialize-controls/index.js":(e,t,r)=>{"use strict";r.d(t,{bX:()=>_});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/regenerator/index.js"),o=r.n(n),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),u=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),d=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/types.js"),h=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/item-processing/index.js"),p=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),m=function(e){return function(t){var r=t.includes("atl-set-cookie");if(r)try{return e.apply(document,[t])}catch(e){a.V.errorWithOperationalEvent({action:"usedDocumentCookieError",message:"document.cookie setter failed to set cookie set by package. ".concat(e.message||""),attributes:{outsidePackage:!1}})}try{var s=t.slice(0,t.indexOf("="))||"";(0,c.vr)({action:"usedDocumentCookie",attributes:{cookieKey:s,outsidePackage:!r}});try{var n=(0,u.re)().product;(0,h.XA)({itemKey:s,allowedCallback:function(){return e.apply(document,[t])},blockedCallback:function(r){var s=r.itemHasCategory;return(0,u.re)().allowUncategorizedCookiesInOverrides&&!s?e.apply(document,[t]):void 0},storageType:p.kU.Cookies,productName:n})}catch(e){a.V.errorWithOperationalEvent({action:"usedDocumentCookieError",message:"Failed to set cookie. ".concat(e.message||""),attributes:{cookieKey:s}})}}catch(e){a.V.errorWithOperationalEvent({action:"usedDocumentCookieError",message:"Failed to send document.cookie setter event. ".concat(e.message||"")})}}},f=function(){var e=(0,s.A)(o().mark(function e(){var t,r,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==(t=Object.getOwnPropertyDescriptor(Document.prototype,"cookie"))?void 0:t.set,s=null==t?void 0:t.get,!(!r||!s)){e.next=6;break}return a.V.warn("No document.cookie capabilities found"),e.abrupt("return");case 6:Object.defineProperty(document,"cookie",{get:s,set:m(r),configurable:!0});case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),g=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/indexed-db-service/index.js"),y=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/index.js"),b=function(e,t,r){return function(s,n){var o=e.storage,i=!1;if(e.checkIfSetByPackage({itemKey:s,isSetCallback:function(){i=!0},isNotSetCallback:function(){i=!1}}),i)try{return t.apply(o,[s,n])}catch(e){a.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageSetItemError",message:"".concat(r," failed to setItem. ").concat(e.message||""),attributes:{outsidePackage:!1,storageType:r}})}try{(0,c.vr)({action:"usedAtlBrowserStorageSetItem",attributes:{itemKey:s,outsidePackage:!i,storageType:r}});try{var l=(0,u.re)().product;(0,h.XA)({itemKey:s,allowedCallback:function(){t.apply(o,[s,n])},blockedCallback:function(e){var r=e.itemHasCategory;(0,u.re)().allowUncategorizedCookiesInOverrides&&!r&&t.apply(o,[s,n])},storageType:r===d.E.LocalStorage?p.kU.LocalStorage:p.kU.SessionStorage,productName:l})}catch(e){a.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageSetItemError",message:"Failed to set item. ".concat(e.message||""),attributes:{itemKey:s,storageType:r}})}}catch(e){a.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageSetItemError",message:"Failed to send ".concat(r," setter event. ").concat(e.message||"")})}}},v=function(){var e=(0,s.A)(o().mark(function e(t){var r,s,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=(0,y.wG)(t)).isAvailable){e.next=4;break}return a.V.warn("No ".concat(t," capabilities found")),e.abrupt("return");case 4:if(g.W.isAvailable){e.next=7;break}return a.V.warn("IndexedDB is not available"),e.abrupt("return");case 7:if(g.W.isBooted){e.next=10;break}return e.next=10,g.W.boot();case 10:s=r.storage.setItem,n={clear:r.clear.bind(r),key:r.key.bind(r),length:r.length.bind(r),removeItem:r.removeItem.bind(r),getItem:r.getItem.bind(r),setItem:b(r,s,t)},Object.defineProperty(window,t===d.E.LocalStorage?"localStorage":"sessionStorage",{value:n,writable:!0,configurable:!0});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,s.A)(o().mark(function e(){var t,r,s=arguments;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{analyticsEnabled:!0},!(0,i.fg)("platform_moonjelly_bsc_master_killswitch")){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,a.V.debug("initializeControls invoked"),(0,u.B_)(t),!(0,l.f)()){e.next=8;break}return e.abrupt("return");case 8:if(r=!!(0,c.IC)(),!(t.analyticsEnabled&&!r)){e.next=12;break}throw Error("Failed to initialize AnalyticsWebClient. Analytics logging will not be set for native method overrides.");case 12:return e.next=14,f();case 14:if((0,u.re)().webStorageEnabled){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,v(d.E.LocalStorage);case 19:return e.next=21,v(d.E.SessionStorage);case 21:a.V.debug("initiizeControls finished"),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),a.V.errorWithOperationalEvent({action:"initializeControlsError",message:"Failed to initialize browser storage controls. ".concat(e.t0.message||"")});case 27:case"end":return e.stop()}},e,null,[[3,24]])}));return function(){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{T:()=>y});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),o=r("./node_modules/@babel/runtime/regenerator/index.js"),i=r.n(o),a=r("./node_modules/js-cookie/src/js.cookie.js"),l=r.n(a),c=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),u=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),d=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),h=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/item-processing/index.js"),p=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),m=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(){var e=(0,n.A)(i().mark(function e(t,r,s){var n,o,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.fg)("platform_moonjelly_bsc_master_killswitch")){e.next=3;break}return l().set(t,r,g(g({},s),{},{"atl-set-cookie":!0})),e.abrupt("return",m.nW.SUCCESS);case 3:return n=(0,u.re)().product,e.next=6,(0,h.XA)({itemKey:t,storageType:m.kU.Cookies,productName:n});case 6:if(a={wasRejected:!(o=e.sent),cookieKey:t},e.prev=8,(0,d.vr)({action:"usedSetCookie",attributes:a}),!o){e.next=15;break}return l().set(t,r,g(g({},s),{},{"atl-set-cookie":!0})),e.abrupt("return",m.nW.SUCCESS);case 15:return e.abrupt("return",m.nW.BLOCKED);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(8),p.V.errorWithOperationalEvent({action:"usedSetCookieError",attributes:a,message:"Failed to use set cookie. ".concat(e.t0.message||"")}),e.abrupt("return",m.nW.BLOCKED);case 22:case"end":return e.stop()}},e,null,[[8,18]])}));return function(t,r,s){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-required-consent-cookies/index.js":(e,t,r)=>{"use strict";r.d(t,{BU:()=>u,SG:()=>c,pT:()=>d,ub:()=>l});var s=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/helpers.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/banner-controls/get-banner-visibility/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-strictly-necessary-cookie/index.js"),l=function(e){var t=new Date;t.setTime(t.getTime()+6e5),(0,a.G)(o.bT,e,{expires:t,path:"/"}),s.V.debug("Set Consent Token ".concat(o.bT," ").concat(e))},c=function(e){var t=new Date;t.setFullYear(t.getFullYear()+1),(0,a.G)(o.CK,e,{expires:t,path:"/"}),s.V.debug("set fallback consent token: ".concat(o.CK," ").concat(e))},u=function(e,t){var r=(0,i.H)({consentToken:e,consentTimestamp:t}),l=(0,n.l)(!!r),c=new Date;c.setTime(c.getTime()+6e5),(0,a.G)(o.vk,l,{expires:c,path:"/"}),s.V.debug("set shouldShowBannerCookie: ".concat(o.vk," ").concat(l))},d=function(e,t){l(e),u(e,t)}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-strictly-necessary-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{G:()=>d});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/js-cookie/src/js.cookie.js"),o=r.n(n),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=function(e,t,r){if((0,i.fg)("platform_moonjelly_bsc_master_killswitch"))o().set(e,t,u(u({},r),{},{"atl-set-cookie":!0}));else try{(0,a.vr)({action:"usedSetStrictlyNecessaryCookie",attributes:{cookieKey:e}}),o().set(e,t,u(u({},r),{},{"atl-set-cookie":!0}))}catch(t){l.V.errorWithOperationalEvent({action:"usedSetStrictlyNecessaryCookieError",attributes:{cookieKey:e},message:"Failed to use set strictly necessary cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/transformer/index.js":(e,t,r)=>{"use strict";r.d(t,{Eu:()=>d,HD:()=>w,Z$:()=>C,Z3:()=>v,wd:()=>_});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/helpers.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/utils.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=function(e){if(e.length<3)return{isValid:!1,isV001:!1,isV002:!1,isV003:!1};var t=e[0]+e[1]+e[2],r=t===i.oG&&7===e.length,s=t===i.Bk&&12===e.length,n=t===i.sD&&10===e.length;return{isValid:[i.oG,i.Bk,i.sD].includes(t)&&(r||s||n),isV001:r,isV002:s,isV003:n}},h=function(e){return[i.oG,(0,o.l)(e.FUNCTIONAL),(0,o.l)(e.ANALYTICS),(0,o.l)(e.MARKETING),(0,o.l)(e.UNKNOWN)].join("")},p=function(e){if(7===e.length)return(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},l.A7.StrictlyNecessary,!0),l.A7.Functional,"1"===e[3]),l.A7.Analytics,"1"===e[4]),l.A7.Marketing,"1"===e[5]),l.A7.Unknown,"1"===e[6])},m=function(e){var t=i.sD,r=e[l.uG.ConsentedUnderGDPR]||e[l.uG.ConsentedUnderCPRA]||e[l.uG.ConsentedUnderLGPD]||e[l.uG.ConsentedUnderFADP],s=e[l.RK.ConsentDataUnavailable];return[t,(0,o.l)(e[l.A7.Functional]),(0,o.l)(e[l.A7.Analytics]),(0,o.l)(e[l.A7.Marketing]),(0,o.l)(e[l.A7.Unknown]),(0,o.l)(!r),(0,o.l)(!s),(0,o.l)(s)].join("")},f=function(e){var t=(0,a.gy)(e),r="1"===e[7];return u(u({},g(e)),{},(0,s.A)((0,s.A)((0,s.A)({},l.RK.ConsentsAreDefault,!!t),l.RK.UserIsAuthenticated,!r),l.RK.ConsentDataUnavailable,r))},g=function(e){return(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},l.A7.StrictlyNecessary,!0),l.A7.Functional,"1"===e[3]),l.A7.Analytics,"1"===e[4]),l.A7.Marketing,"1"===e[5]),l.A7.Unknown,"1"===e[6]),l.RK.ConsentsAreDefault,"1"===e[7]),l.RK.UserIsAuthenticated,"1"===e[8]),l.RK.ConsentDataUnavailable,"1"===e[9])},y=[l.RK.ConsentDataUnavailable,l.uG.ConsentedUnderGDPR,l.uG.ConsentedUnderCPRA,l.uG.ConsentedUnderLGPD,l.uG.ConsentedUnderFADP],b=[l.RK.ConsentsAreDefault,l.RK.UserIsAuthenticated,l.RK.ConsentDataUnavailable];function v(e){if((0,n.re)().localConsentMode)return h(e);if(y.every(function(t){return t in e}))return m(e);if(b.every(function(t){return t in e}))return[i.sD,(0,o.l)(e[l.A7.Functional]),(0,o.l)(e[l.A7.Analytics]),(0,o.l)(e[l.A7.Marketing]),(0,o.l)(e[l.A7.Unknown]),(0,o.l)(e[l.RK.ConsentsAreDefault]),(0,o.l)(e[l.RK.UserIsAuthenticated]),(0,o.l)(e[l.RK.ConsentDataUnavailable])].join("");return h(e)}function _(e){if((0,n.re)().localConsentMode)return e.length<3?void 0:e[0]+e[1]+e[2]===i.oG?p(e):void 0;var t=d(e),r=t.isValid,s=t.isV001,o=t.isV002,a=t.isV003;if(r){if(s)return p(e);if(o)return f(e);if(a)return g(e)}}var w=function(e){return!e||0===Object.keys(e).length},C=function(e){if(e!==l.hZ.INTERNAL){if(w(e))return{prefs:void 0,isPrefetchedPrefsInternalState:!0};var t=e&&"consentToken"in e&&e.consentToken;if(t){var r=_(t);return{prefs:r,isPrefetchedPrefsInternalState:!r}}if(e&&"consents"in e){var s=_((0,a.Ol)(e));return{prefs:s,isPrefetchedPrefsInternalState:!s}}}return e===l.hZ.INTERNAL?{prefs:void 0,isPrefetchedPrefsInternalState:!0}:{prefs:void 0,isPrefetchedPrefsInternalState:!1}}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/preferences-controls/get-preferences/index.js":(e,t,r)=>{"use strict";r.d(t,{l:()=>m});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/regenerator/index.js"),o=r.n(n),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js"),u=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-required-consent-cookies/index.js"),d=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-consent-token/utils.js"),h=function(){var e=(0,s.A)(o().mark(function e(){var t,r,s,n,i,a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,c.R)(l.CK),e.next=3,(0,d.L)(t);case 3:var o;if(!(r=e.sent)){e.next=15;break}if(s=r.consentToken,n=r.consentTimestamp,o=s,i=(0,c.R)(l.PN)||o,!((a=(0,c.R)(l.PN))||""===a)){e.next=13;break}return(0,u.BU)(i),(0,u.ub)(i),e.abrupt("return",""===i?void 0:i);case 13:return(0,u.pT)(i,n),e.abrupt("return",s);case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),p=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/transformer/index.js");function m(){return f.apply(this,arguments)}function f(){return(f=(0,s.A)(o().mark(function e(){var t,r,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.re)().localConsentMode){e.next=7;break}if(t=(0,c.R)(l.OF)){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.abrupt("return",(0,p.wd)(t));case 7:if(r=(0,c.R)(l.bT)){e.next=14;break}return e.next=11,h();case 11:return s=e.sent,(0,a.f)()&&s&&(window.__COOKIE_CONSENT_PREFERENCES__=Object.assign(window.__COOKIE_CONSENT_PREFERENCES__||{},{consentToken:s})),e.abrupt("return",s?(0,p.wd)(s):void 0);case 14:return e.abrupt("return",(0,p.wd)(r));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/third-party-controls/check-third-party/index.js":(e,t,r)=>{"use strict";r.d(t,{W:()=>p});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/regenerator/index.js"),o=r.n(n),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),l=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),u=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),d=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/preferences-controls/get-preferences/index.js"),h=function(){var e=(0,s.A)(o().mark(function e(t){var r,s,n,i,a,h,p,m,f,g,y;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.l)();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",Promise.resolve(!1));case 5:return s=!1,i=(0,c.re)().loadCache,e.next=9,i(u.kU.Cookies);case 9:return(n=e.sent)&&(h=(a=n).thirdPartyKeys,p=a.categories,m=h[t],f=(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},p.STRICTLY_NECESSARY,u.A7.StrictlyNecessary),p.FUNCTIONAL,u.A7.Functional),p.ANALYTICS,u.A7.Analytics),p.MARKETING,u.A7.Marketing),p.UNKNOWN,u.A7.Unknown),g=null!==m?f[m]:null,y=!1,g&&(y=r[g]),s=y),e.abrupt("return",Promise.resolve(s));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.A)(o().mark(function e(t,r,s){var n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t);case 3:return n=e.sent,(0,i.vr)({action:"usedCheckThirdParty",attributes:{wasRejected:!n,thirdParty:t}}),e.abrupt("return",n?r():null==s?void 0:s());case 8:e.prev=8,e.t0=e.catch(0),a.V.errorWithOperationalEvent({action:"checkThirdPartyError",attributes:{wasRejected:!0,thirdParty:t},message:"Failed to use check third party. ".concat(e.t0.message||"")});case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,r,s){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/index.js":(e,t,r)=>{"use strict";r.d(t,{bE:()=>u,fy:()=>d,im:()=>p});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/regenerator/index.js"),o=r.n(n),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/utils.js"),l="".concat("/gateway/api/consenthub/session","/user"),c="".concat(l,"/consents/cookies"),u=function(e){return e?{consentToken:(0,a.Ol)(e),consentTimestamp:(0,a.h)(e)}:{consentToken:(0,a.Ol)({}),consentHubInaccessible:!0}},d=function(){var e=(0,s.A)(o().mark(function e(){var t,r,s,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin,r="".concat(t).concat(c),e.prev=2,e.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((s=e.sent).ok){e.next=8;break}throw Error("Failed to fetch preferences from ConsentHub with status: ".concat(s.status));case 8:return e.next=10,s.json();case 10:return n=e.sent,e.abrupt("return",u(n));case 14:return e.prev=14,e.t0=e.catch(2),i.V.errorWithOperationalEvent({action:"fetchConsentPreferencesError",message:e.t0.message||""}),e.abrupt("return",u());case 18:case"end":return e.stop()}},e,null,[[2,14]])}));return function(){return e.apply(this,arguments)}}(),h=function(e,t){var r=window.location,s=r.origin,n=r.pathname,o=(0,a.zm)(e,t);return JSON.stringify({action:"CONSENT_DATA_UNAVAILABLE"in e&&e.CONSENT_DATA_UNAVAILABLE?"FORM_FILL":"UPDATE_PREFERENCES",consents:o,formUrl:"".concat(s).concat(n),locale:"UNKNOWN",site:"atlassian",source:"COOKIE_PREFERENCES"})},p=function(){var e=(0,s.A)(o().mark(function e(t,r){var s,n,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="".concat(window.location.origin).concat(l),e.prev=1,e.next=4,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:h(t,r)});case 4:if(!(!(n=e.sent).ok||202!==n.status&&200!==n.status)){e.next=9;break}throw c="Failed to save preferences to ConsentHub with status: ".concat(n.status),new a.CY(c,n.status);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(1),i.V.errorWithOperationalEvent({action:"saveConsentPreferencesError",message:e.t0.message||""}),e.t0;case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,r){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/services/consent-hub-service/utils.js":(e,t,r)=>{"use strict";r.d(t,{CY:()=>A,SA:()=>S,gy:()=>_,zm:()=>E,h:()=>k,yl:()=>v,Ol:()=>O});var s=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),i=r("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),a=r("./node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js"),c=r("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),u=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=r("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),h=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/helpers.js"),p=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/constants.js"),m=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js"),f=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),g=function(e){return e.StrictlyNecessary="strictlyNecessaryCookies",e.Functional="functionalCookies",e.Analytics="performanceCookies",e.Marketing="targetingCookies",e.Unknown="unknownCookies",e}({});function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}var b=function(e){return e[0]+e[1]+e[2]===p.Bk},v=function(e){if(b(e)){var t="1"===e[8],r="1"===e[9],s="1"===e[10],n="1"===e[11];return t||r||s||n}return!1},_=function(e){var t=e[0]+e[1]+e[2]===p.oG,r=b(e);return!t&&(r?!v(e):(0,h.J)(e[7]))},w=function(e){var t=p.sD,r=Object.entries(p.dx).reduce(function(t,r){var s=(0,d.A)(r,2),n=s[0],o=s[1];return n===f.A7.StrictlyNecessary?t:n===f.RK.UserIsAuthenticated?t+(0,h.l)(!e):n===f.RK.ConsentDataUnavailable?t+(0,h.l)(!!e):t+(0,h.l)(o)},"");return"".concat(t).concat(r)},C=function(e){var t,r,s,n;return""+p.sD+(0,h.l)(!!(null!=(t=e.find(function(e){return e.key===g.Functional}))&&t.granted))+(0,h.l)(!!(null!=(r=e.find(function(e){return e.key===g.Analytics}))&&r.granted))+(0,h.l)(!!(null!=(s=e.find(function(e){return e.key===g.Marketing}))&&s.granted))+(0,h.l)(!!(null!=(n=e.find(function(e){return e.key===g.Unknown}))&&n.granted))+"010"},O=function(e){var t=e.consents;if(t)if(0===t.length)return w();else return C(t);var r=(0,m.R)(p.CK);return r||w(!0)},E=function(e,t){var r=[f.A7.StrictlyNecessary,f.A7.Functional,f.A7.Analytics,f.A7.Marketing,f.A7.Unknown],s=(0,u.A)((0,u.A)((0,u.A)((0,u.A)((0,u.A)({},f.A7.StrictlyNecessary,g.StrictlyNecessary),f.A7.Functional,g.Functional),f.A7.Analytics,g.Analytics),f.A7.Marketing,g.Marketing),f.A7.Unknown,g.Unknown);return r.map(function(r){return{key:s[r],granted:!!e[r],gatheredTs:new Date().toISOString(),displayedText:t[r]}})},k=function(e){var t=e.consents;if(t&&t.length){var r=t.map(function(e){return new Date(e.updatedTs).getTime()});return new Date(Math.max.apply(Math,(0,c.A)(r))).toISOString()}},S=function(e){var t=!1;if(e){var r=new Date;r.setFullYear(r.getFullYear()-1),t=new Date(e)<r}return t},A=function(e){function t(e,r){var s,a,l;return(0,n.A)(this,t),a=t,l=[e],a=(0,i.A)(a),(s=(0,o.A)(this,y()?Reflect.construct(a,l||[],(0,i.A)(this).constructor):a.apply(this,l))).status=r,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,t),s.name="StatusCodeError",s}return(0,a.A)(t,e),(0,s.A)(t)}((0,l.A)(Error))},"./node_modules/@atlassian/browser-storage-controls/dist/esm/services/indexed-db-service/index.js":(e,t,r)=>{"use strict";r.d(t,{W:()=>d});var s=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),n=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=r("./node_modules/@babel/runtime/regenerator/index.js"),l=r.n(a),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),u=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),d=new(function(){var e,t,r,a;return(0,o.A)(function e(t,r){var s=this;(0,n.A)(this,e),(0,i.A)(this,"db",null),(0,i.A)(this,"isBooted",!1),(0,i.A)(this,"isAvailable",!1),(0,i.A)(this,"onConnectionErrorHandler",function(e){return function(t){u.V.warn("Error opening database."),e(t)}}),(0,i.A)(this,"onConnectionSuccessHandler",function(e,t){return function(){s.db=e.result,t()}}),(0,i.A)(this,"onConnectionUpgradeNeededHandler",function(e){return function(){s.db=e.result,s.db.createObjectStore(s.storeName,{keyPath:"id"})}}),(0,i.A)(this,"onGetRecordErrorHandler",function(e){return function(){var t="Failed to perform a get transaction on IndexedDB: ".concat(s.dbName," + ").concat(s.storeName);u.V.warn(t),e(t)}}),(0,i.A)(this,"onGetRecordSuccessHandler",function(e,t){return function(){t(e.result)}}),(0,i.A)(this,"onSetRecordErrorHandler",function(e){return function(){var t="Failed to perform a set transaction on IndexedDB: ".concat(s.dbName," + ").concat(s.storeName);u.V.warn(t),e(t)}}),(0,i.A)(this,"onSetRecordSuccessHandler",function(e){return function(){e()}}),this.dbName=t,this.storeName=r,this.isAvailable=this.getIsDBAvailable(),this.isBooted=!1,this.bootUpPromiseCache=null},[{key:"boot",value:(e=(0,s.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAvailable){e.next=3;break}return u.V.warn("IndexedDB is not available"),e.abrupt("return");case 3:if(!this.isBooted){e.next=5;break}return e.abrupt("return");case 5:if(this.bootUpPromiseCache){e.next=18;break}return this.bootUpPromiseCache=this.openDB(),e.prev=7,e.next=10,this.bootUpPromiseCache;case 10:this.isBooted=!0,e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(7),this.isBooted=!1,u.V.warn("Error booting up IndexedDB."),e.t0;case 18:case"end":return e.stop()}},e,this,[[7,13]])})),function(){return e.apply(this,arguments)})},{key:"getIsDBAvailable",value:function(){return!(0,c.f)()&&!!window.indexedDB}},{key:"openDB",value:(t=(0,s.A)(l().mark(function e(){var t=this;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var s=indexedDB.open(t.dbName,2);s.onerror=t.onConnectionErrorHandler(r),s.onsuccess=t.onConnectionSuccessHandler(s,e),s.onupgradeneeded=t.onConnectionUpgradeNeededHandler(s)}));case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"getRecord",value:(r=(0,s.A)(l().mark(function e(t){var r,s,n=this;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isBooted){e.next=4;break}return e.next=4,this.boot();case 4:if(this.db){e.next=6;break}throw Error("Database is not opened");case 6:return r=this.db.transaction([this.storeName]).objectStore(this.storeName),s=new Promise(function(e,s){var o=r.get(t);o.onerror=n.onGetRecordErrorHandler(s),o.onsuccess=n.onGetRecordSuccessHandler(o,e)}),e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(0),u.V.error("Error fetching record from database. ".concat(e.t0.message||"")),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,12]])})),function(e){return r.apply(this,arguments)})},{key:"setRecord",value:(a=(0,s.A)(l().mark(function e(t){var r,s=this;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isBooted){e.next=4;break}return e.next=4,this.boot();case 4:if(this.db){e.next=6;break}throw Error("Database is not opened");case 6:return r=new Promise(function(e,r){var n=s.db.transaction([s.storeName],"readwrite").objectStore(s.storeName),o={atlSetItem:"SET-BY-PACKAGE",id:t},i=n.put(o);i.onerror=s.onSetRecordErrorHandler(r),i.onsuccess=s.onSetRecordSuccessHandler(e)}),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),u.V.warn("Error setting record in database. ".concat(e.t0.message||"")),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return a.apply(this,arguments)})}])}())("BSCIndexedDB","InternalStorageKeys")},"./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/index.js":(e,t,r)=>{"use strict";r.d(t,{oR:()=>O,Rl:()=>E,wG:()=>k});var s,n,o=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),l=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=r("./node_modules/@babel/runtime/regenerator/index.js"),u=r.n(c),d=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),h=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),p=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),m=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js"),f=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/indexed-db-service/index.js"),g=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/types.js"),y=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),b=function(e,t,r){var s={itemKey:e,storageType:t};try{return(0,y.vr)({action:"usedAtlBrowserStorageGetItem",attributes:s}),r.getItem(e)}catch(e){return p.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageGetItemError",attributes:s,message:"Failed to get ".concat(t," item. ").concat(e.message||"")}),null}},v=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/item-processing/index.js"),_=function(){var e=(0,o.A)(u().mark(function e(t,r,s,n,o){var i,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.XA)({itemKey:t,storageType:s===g.E.LocalStorage?m.kU.LocalStorage:m.kU.SessionStorage,productName:n});case 2:if(a={wasRejected:!(i=e.sent),itemKey:t,storageType:s},e.prev=4,(0,y.vr)({action:"usedAtlBrowserStorageSetItem",attributes:a}),!i){e.next=13;break}return e.next=9,f.W.setRecord(t);case 9:return o.setItem(t,r),e.abrupt("return",m.nW.SUCCESS);case 13:return e.abrupt("return",m.nW.BLOCKED);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(4),p.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageSetItemError",attributes:a,message:"Failed to set ".concat(s," item. ").concat(e.t0.message||"")}),e.abrupt("return",m.nW.BLOCKED);case 20:case"end":return e.stop()}},e,null,[[4,16]])}));return function(t,r,s,n,o){return e.apply(this,arguments)}}(),w=function(e,t,r,s){var n={itemKey:e,storageType:r};try{return(0,y.vr)({action:"usedAtlBrowserStorageSetStrictlyNecessaryItem",attributes:n}),f.W.setRecord(e).then(function(){}).catch(function(e){throw Error(e.message||"")}),s.setItem(e,t),m.nW.SUCCESS}catch(e){return p.V.errorWithOperationalEvent({action:"usedAtlBrowserStorageSetStrictlyNecessaryItemError",attributes:n,message:"Failed to set strictly necessary ".concat(r," item. ").concat(e.message||"")}),m.nW.FAILED}},C=function(){var e;return(0,a.A)(function e(t,r){var s;(0,i.A)(this,e),(0,l.A)(this,"isAvailable",!1),(0,l.A)(this,"checkIfSetByPackage",(s=(0,o.A)(u().mark(function e(t){var r,s,n,o,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.itemKey,n=void 0===(s=t.isSetCallback)?function(){}:s,i=void 0===(o=t.isNotSetCallback)?function(){}:o,e.prev=1,e.next=4,f.W.getRecord(r);case 4:if(!e.sent){e.next=10;break}return n(),e.abrupt("return",!0);case 10:return i(),e.abrupt("return",!1);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(1),p.V.errorWithOperationalEvent({action:"usedCheckIfSetByPackageError",message:"IDB lookup failed to check if item was set by package. ".concat(e.t0.message||""),attributes:{itemKey:r}}),i(),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[1,14]])})),function(e){return s.apply(this,arguments)})),this.storage=t,this.storageType=r,this.isAvailable=this.isStorageAvailable()},[{key:"isWebStorageEnabled",get:function(){return!!(0,d.re)().webStorageEnabled||(p.V.debug("WebStorage config is disabled, cannot proceed."),!1)}},{key:"getItem",value:function(e){return this.isWebStorageEnabled?this.isAvailable?b(e,this.storageType,this.storage):(p.V.warn("".concat(this.storageType," is unavailable. Failed to get item ").concat(e)),null):this.storage.getItem(e)}},{key:"setItem",value:(e=(0,o.A)(u().mark(function e(t,r){var s,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isWebStorageEnabled){e.next=3;break}return this.storage.setItem(t,r),e.abrupt("return");case 3:if(this.isAvailable){e.next=6;break}return p.V.warn("".concat(this.storageType," is unavailable. Failed to set item ").concat(t)),e.abrupt("return");case 6:return s=(0,d.re)().product,e.next=9,_(t,r,this.storageType,s,this.storage);case 9:n=e.sent,p.V.debug("".concat(n===m.nW.SUCCESS?"Successfully":"Failed to"," set item ").concat(t," with value ").concat(r));case 11:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})},{key:"setStrictlyNecessaryItem",value:function(e,t){if(!this.isWebStorageEnabled)return void this.storage.setItem(e,t);if(!this.isAvailable)return void p.V.warn("".concat(this.storageType," is unavailable. Failed to set strictly necessary item ").concat(e));var r=w(e,t,this.storageType,this.storage);p.V.debug("".concat(r===m.nW.SUCCESS?"Successfully":"Failed to"," set strictly necessary item ").concat(e," with value ").concat(t))}},{key:"removeItem",value:function(e){if(!this.isAvailable)return void p.V.warn("".concat(this.storageType," is unavailable. Failed to remove item ").concat(e));this.storage.removeItem(e)}},{key:"key",value:function(e){return this.isAvailable?this.storage.key(e):null}},{key:"length",value:function(){return this.isAvailable?this.storage.length:0}},{key:"clear",value:function(){this.isAvailable&&this.storage.clear()}},{key:"isStorageAvailable",value:function(){if((0,h.f)())return!1;try{var e="__storage_test__";return this.storage.setItem(e,e),this.storage.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&this.storage&&0!==this.storage.length}}}])}(),O=new C(null==(s=window)?void 0:s.localStorage,g.E.LocalStorage),E=new C(null==(n=window)?void 0:n.sessionStorage,g.E.SessionStorage),k=function(e){return(0,l.A)((0,l.A)({},g.E.LocalStorage,O),g.E.SessionStorage,E)[e]}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/types.js":(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var s=function(e){return e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e}({})},"./node_modules/@atlassian/browser-storage-controls/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{A7:()=>s,RK:()=>o,hZ:()=>i,kU:()=>a,nW:()=>l,uG:()=>n});var s=function(e){return e.StrictlyNecessary="STRICTLY_NECESSARY",e.Functional="FUNCTIONAL",e.Marketing="MARKETING",e.Analytics="ANALYTICS",e.Unknown="UNKNOWN",e}({}),n=function(e){return e.ConsentDataUnavailable="CONSENT_DATA_UNAVAILABLE",e.ConsentedUnderGDPR="CONSENTS_SAVED_IN_GDPR_LOCALE",e.ConsentedUnderCPRA="CONSENTS_SAVED_IN_CPRA_LOCALE",e.ConsentedUnderLGPD="CONSENTS_SAVED_IN_LGPD_LOCALE",e.ConsentedUnderFADP="CONSENTS_SAVED_IN_FADP_LOCALE",e}({}),o=function(e){return e.ConsentsAreDefault="DEFAULT_CONSENTS",e.UserIsAuthenticated="USER_AUTHENTICATED",e.ConsentDataUnavailable="CONSENT_DATA_UNAVAILABLE",e}({}),i=function(e){return e[e.INTERNAL=0]="INTERNAL",e}({}),a=function(e){return e.Cookies="Cookies",e.LocalStorage="LocalStorage",e.SessionStorage="SessionStorage",e}({}),l=function(e){return e.SUCCESS="SUCCESS",e.BLOCKED="BLOCKED",e.FAILED="FAILED",e}({})},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js":(e,t,r)=>{"use strict";r.d(t,{Ay:()=>rO});var s=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./node_modules/uuid/v4.js"),o=r.n(n),i=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js");class a{constructor(){(0,s.A)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,s.A)(this,"_handleVisibilityChange",()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class l{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class d{constructor(e,t){if((0,s.A)(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),(0,s.A)(this,"_getEventTimingByName",e=>{let t=this._performance.getEntriesByName(e);return t[t.length-1]}),(0,s.A)(this,"_getApdexFields",e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return u(u({},t),{},{apdex:r})}),(0,s.A)(this,"_getApdexTimings",e=>{let t=this._getEventKey(e),r=`${t}-start`,s=e.startTime||this._getStartTime(e,r),n=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:s,stopTime:n,duration:n-s}}),(0,s.A)(this,"_getStartTime",(e,t)=>{let r=this._performance.getTimeOrigin();return e.type===i.LR.INITIAL_LOAD?r:r+this._getEventTimingByName(t).startTime}),(0,s.A)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,s.A)(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),(0,s.A)(this,"_getVisibilityFields",e=>{let t;if(e.type===i.LR.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===i.LR.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),(0,s.A)(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>e<=t?1:.5*(e<=4*t)),(0,s.A)(this,"_validateStartEvent",e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,s.A)(this,"_validateStopEvent",e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,i.Xj)(i.LR,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===i.LR.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,s.A)(this,"_shouldSendEvent",e=>!!e&&"number"==typeof e.apdex),(0,s.A)(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:u(u({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof a))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new l,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;return this._getEventTimingByName(r)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),s=this._getVisibilityFields(e);this._sendEvent(u(u(u({},e),r),s),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}let h=(e,t)=>()=>{if("function"==typeof e)try{return e()}catch(e){console.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e};function p(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function m(e){if(!1===p(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!1!==p(r)&&"isPrototypeOf"in r}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function b(e){return{userIdType:e.userIdType}}function v(e){return{orgId:e.orgId}}function _(e){return{workspaceId:e.workspaceId}}function w(e){if(S(e))return{aliases:e}}function C(e){if(S(e))return{groups:e}}function O(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function E(e,t){return void 0===t?e:t}function k(e,t){let r=t||{},s=E(e.env,r.env),n=E(e.product,r.product),o=E(e.subproduct(),r.subproduct),i=E(e.version,r.version),a=E(e.origin,r.origin);return{env:s,product:n,subproduct:o,version:i,origin:a,platform:E(e.platform,r.platform),ic:e.ic}}function S(e){return m(e)&&Object.keys(e).length>0}function A(e,t){return S(t)?{[e]:t}:void 0}function I(e){if(S(e))return A("containers",function(e){let t={};return Object.keys(e).forEach(r=>{let s=e[r];t[r]={id:s.id,type:s.type}}),t}(e))}function j(e,t){return g({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},I(e.containers))}function x(e){return`${e.actionSubject} ${e.action}`}let P=function(e){return e.QUIET="quiet",e.STANDARD="standard",e.COMPLETE="complete",e}({});function T(e,t,r,s,n,o,i,a,l,c,u,d,h){let p=k(e,function(e){let{env:t,product:r,subproduct:s,version:n,origin:o,platform:i}=e;return{env:t,product:r,subproduct:s,version:n,origin:o,platform:i}}(s)),m=y(t),f=v(l),E=_(u),S=b(r),A=j(s,n);return g(g(g(g(g(g(g(g(g({},p),m),f),S),A),O(s)),{},{tabId:o,sessionId:i,taskSessions:a,pageLoadId:c},E),w(d)),C(h))}let D=1e4,R=(e,t)=>Object.keys(e).reduce((r,s)=>(r[t(e[s],s,e)]=e[s],r),{}),L=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),N=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>N(e[r],t[r]))},U=(e,t)=>e.reduce((e,r,s,n)=>(e[+!t(r,s,n)].push(r),e),[[],[]]),M=Object.freeze([i.$q.OPERATIONAL,i.$q.TRACK,i.$q.UI]);function F(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!m(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function B(e){switch(e){case i.$q.OPERATIONAL:case i.$q.TRACK:case i.$q.UI:return!0;default:return!1}}function V(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");F(e.containers)}class K{constructor(e,t){if((0,s.A)(this,"canCompress",e=>{try{return e&&B(e.eventType)&&this.predicate(e)}catch(e){return!1}}),(0,s.A)(this,"compress",e=>{let[t,r]=U(e,e=>this.canCompress(e)),s=this.compressFn(t);if(!s)throw Error("No events were returned from the compression function");return s.forEach(e=>{!function(e){if(!B(e))throw Error(`Invalid action event type: ${e}, must be one of: [${M}]`)}(e.eventType),V(e)}),s.concat(r)}),"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class z{constructor(e=[]){if((0,s.A)(this,"canCompress",e=>this.compressionRules.some(t=>t.canCompress(e))),(0,s.A)(this,"compress",e=>this.createGroups(e).reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[])),(0,s.A)(this,"createGroups",e=>e.reduce((e,t)=>{let r,s=this.compressionRules.find(e=>e.canCompress(t));if(s){let e=j(t,t.eventType);r=L(t,Object.keys(e))}let n=e.find(e=>s===e.compressor&&N(r,e.contextFields));return n?n.events.push(t):e.push({contextFields:r,compressor:s,events:[t]}),e},[])),(0,s.A)(this,"compressGroup",e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map(t=>$($({},t),e.contextFields))}catch(t){return e.events}}),!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof K))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}class W{constructor(e,t){(0,s.A)(this,"push",(e,t,r,s)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:s})}),(0,s.A)(this,"size",()=>this.eventArgs.length),(0,s.A)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,s.A)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,s.A)(this,"flushNextBatch",()=>{this.eventArgs.splice(0,7).forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,s.A)(this,"compressEventArgs",e=>{let[t,r]=U(e,e=>this.compressor.canCompress(e.builtEvent)),s=t.reduce((e,t)=>{let r=e.find(e=>N(e.userInfo,t.userInfo)&&N(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]).reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),s=this.compressor.compress(r).map(e=>({identifier:x(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(s)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>s.push(e)),s}),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new z(t)}}let q=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({});class H{constructor(e,t){(0,s.A)(this,"push",(e,t,r,s)=>{this.delayQueue.push(e,t,r,s)}),(0,s.A)(this,"startLowPriorityEventDelay",(e=D,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);let r=e?Math.min(e,3e4):3e4;this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(q.TIMEOUT),r),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,s.A)(this,"stopLowPriorityEventDelay",(e=q.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null==(t=this.delayCallback)||t.call(this,e),this.delayCallback=void 0}),(0,s.A)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new W(e,t)}}let J=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),Q=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({}),Y=(e,t)=>({[J.ACK]:`${e}.${t}.${J.ACK}`,[J.QUEUE]:`${e}.${t}.${J.QUEUE}`,[J.IN_PROGRESS]:`${e}.${t}.${J.IN_PROGRESS}`,[J.RECLAIM_START]:`${e}.${t}.${J.RECLAIM_START}`,[J.RECLAIM_END]:`${e}.${t}.${J.RECLAIM_END}`}),X=Object.values(J);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let et=e=>new Promise(t=>{setTimeout(t,e)}),er=async(e,t)=>{let{ack:r,reclaimStart:s,reclaimEnd:n}=e.storageKeys,o=Date.now();if(localStorage.setItem(s,e.reclaimProcessId),localStorage.setItem(r,o.toString()),await et(Q.RECLAIM_WAIT),Date.now()>o+Q.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(n,e.reclaimProcessId),await et(Q.RECLAIM_WAIT),Date.now()>o+Q.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(s)!==e.reclaimProcessId||localStorage.getItem(n)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return es(e,t)},es=async(e,t)=>{let{queue:r,inProgress:s}=e.storageKeys,n=[...JSON.parse(localStorage.getItem(r)||"[]"),...Object.entries(JSON.parse(localStorage.getItem(s)||"{}")).map(([e,t])=>ee(ee({},t),{},{attemptNumber:t.attemptNumber+1,id:e}))];if(n.length>0){let o=await t(n);if("successful"===o.status)en(e.storageKeys);else if("partial"===o.status){let e=n.filter(e=>!o.acceptedItemIds.includes(e.id));return localStorage.removeItem(s),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else en(e.storageKeys);return{fullReclaim:!0}},en=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},eo=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let r=o()(),s=(e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===J.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return Q.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1])}catch(e){}return[]})(e).map(s=>er({queuePrefix:e,reclaimProcessId:r,storageKeys:Y(e,s)},t)),n=await Promise.allSettled(s),i=n.filter(e=>"rejected"===e.status),a=n.filter(e=>"fulfilled"===e.status).map(e=>e.value),l=a.filter(e=>e.fullReclaim),c=a.filter(e=>!e.fullReclaim);return{failedReclaims:i.length,partialReclaims:c.length,fullReclaims:l.length}},ei="namespace-timeAdded",ea="analytics-resilience",el="timeToBeProcessedAfter",ec="timeAdded",eu="retryAttempts",ed=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),eh=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class ep extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,ep.prototype),this.name="NoIndexedDbError"}}let em="AbandonWriteError";class ef extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,ef.prototype),this.name=em}}let eg="CallbackProcessingError";class ey extends Error{constructor(e){let t=e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString();super(`Error thrown while processing events in callback: ${t||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,ey.prototype),this.name=eg}}let eb="InvalidPolicyError";class ev extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=eb}}let e_=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===em||e.name===eg||e.name===eb);var ew=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");let eC=7,eO=(e,t,{id:r,retryAttempts:s,timeToProcessOffset:n})=>({item:e,id:r||o()(),retryAttempts:s||0,timeToBeProcessedAfter:Date.now()+(n||0),namespace:t,timeAdded:Date.now()}),eE=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),ek=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),eS=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return(e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}))(e)},eA=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class eI{constructor(e,t,r,n){if((0,s.A)(this,"deleteOldestNEvents",async(e,t)=>{var r;let s=e.index(ei),n=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),o=s.getAllKeys(n,t),i=await ek(o),a=null==i||null==(r=i.target)?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{let t=a.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=n}async insertItems(e,t,r=eh.ABANDON){let s=[...t],n=0;switch(r){case eh.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case eh.EVICT:n=await this.evictIfNotEnoughSpace(e,t.length);break;case eh.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,s)}let o=s.map(t=>ek(e.add(t)));return await Promise.all(o),await eS(e.transaction,this.logger),{items:s,numberOfEvictedItems:n}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new ef(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let s=t-r;return await this.deleteOldestNEvents(e,s),s}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,s=t.length-e;t.splice(s,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(ei),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),s=t.count(r);return(await ek(s)).target.result}}let ej=["item"],ex=["items"];function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}class eT{constructor(e,t={}){if((0,s.A)(this,"startDB",async()=>new Promise(async(e,t)=>{if("undefined"!=typeof window){let r=window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new ep)},15e3),s=window.indexedDB.open("analytics-web-client",1);s.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=s.result.createObjectStore(ea,{keyPath:"id"});t.createIndex(el,el,{unique:!1}),t.createIndex(eu,eu,{unique:!1}),t.createIndex(ec,ec,{unique:!1}),t.createIndex(ei,["namespace","timeAdded"],{unique:!1})},s.onerror=function(){t(new ep)};try{return await ek(s),e(s.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new ep)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new ep)})),(0,s.A)(this,"addItem",async(e,t={},r=eh.ABANDON)=>{let{logger:s,namespace:n}=this,o=eO(e,n,t),{objectStore:i}=await this.getObjectStoreAndTransaction("readwrite");if(r===eh.IGNORE)throw new ev(r,"IndexedDbConnector#addItem");try{if(!o.namespace||0===o.namespace.length||"string"!=typeof o.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(i,[o],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if(e_(e))throw e;throw s.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,s.A)(this,"bulkAddItem",async(e,t=eh.ABANDON)=>{let{logger:r,namespace:s}=this,n=e.map(e=>{let{item:t}=e;return eO(t,s,(0,ew.A)(e,ej))}),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(o,n,t)}catch(e){if(e_(e))throw e;throw r.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,s.A)(this,"getItems",async(e=eC)=>{let t=e>0?e:eC,{logger:r}=this,n=this.options.maxAttempts,{transaction:o,objectStore:i}=await this.getObjectStoreAndTransaction("readwrite"),a=i.index(el),l=IDBKeyRange.upperBound(Date.now()),c=a.openCursor(l),u=await new Promise(async(e,o)=>{let i=[],a=0;c.onerror=e=>{r.error("Failed to open cursor:",e),o("Failed to open cursor")},c.onsuccess=o=>{let l=o.target.result;if(l){let o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},l.value);i.push(o);let c=l.value;c.retryAttempts+=1,c.timeToBeProcessedAfter=Date.now()+6e4,c.retryAttempts>=n?(++a,eA(l.delete(),r)):eA(l.update(c),r),i.length<t?l.continue():e({items:i,numberOfDeletedItems:a})}else e({items:i,numberOfDeletedItems:a})}});return await eS(o,this.logger),u}),(0,s.A)(this,"deleteItems",async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let s=e.map(e=>this.deleteItem(r,e));await eS(t,this.logger),await Promise.all(s)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),(0,s.A)(this,"getItemCount",async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(el),s=IDBKeyRange.upperBound(Date.now()),n=r.count(s),o=await ek(n);return await eS(e,this.logger),o.target.result}),(0,s.A)(this,"processItems",async(e,t=eC)=>{let r=await this.getItems(t),{items:s}=r,n=(0,ew.A)(r,ex);try{let t=await e(s,n),r=s.map(e=>e.id);return await this.deleteItems(r),t}catch(e){throw new ey(e)}}),(0,s.A)(this,"deleteItem",async(e,t)=>{let{logger:r}=this;try{await ek(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}}),(0,s.A)(this,"getObjectStoreAndTransaction",async e=>{let t=(await this.db).transaction(ea,e),r=t.objectStore(ea);return{transaction:t,objectStore:r}}),this.options=eE(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new ep;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new eI(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return ed.INDEXEDDB}}class eD{constructor(e,t){if((0,s.A)(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case eh.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case eh.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case eh.IGNORE:return this.handleAddAsManyAsPossible(e)}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new ef(ed.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}let eR=["item"],eL=["items"];function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}class eU{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=eE(t),this.globalEventLimitGuard=new eD(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=eh.ABANDON){if(r===eh.IGNORE)throw new ev(r,"IndexedDbConnector#addItem");let s=eO(e,this.namespace,t),n=await this.globalEventLimitGuard.insertItemsToMemoryStore([s],r);return Promise.resolve({item:n.items[0],numberOfEvictedItems:n.numberOfEvictedItems})}bulkAddItem(e,t=eh.ABANDON){let r=e.map(e=>{let{item:t}=e,r=(0,ew.A)(e,eR);return eO(t,this.namespace,r)});return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=eh.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=eC){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=eC){let t=e>0?e:eC,r=Date.now(),n=[],o=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(n.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)),e.timeToBeProcessedAfter+=6e4,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&o.push(e)),n.length>=t)break;return o.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:n,numberOfDeletedItems:o.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now();return Promise.resolve(this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length)}async processItems(e,t){let r=this.synchronousGetItems(t),{items:s}=r,n=(0,ew.A)(r,eL),o=s.map(e=>e.id);try{let t=await e(s,n);return await this.deleteItems(o),t}catch(e){throw new ey(e)}}storeType(){return ed.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}let eM=class{constructor(e,t={}){if(this.namespace=e,this.options=eE(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new eT(e,t)}catch(e){if(!(e instanceof ep)){var r;null==(r=t.logger)||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new eU(this.namespace,t)}addItem(e,t,r=eh.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=eh.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(e_(t))throw t;return this.resilience.storeType()===ed.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new eU(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let s=(await t.bulkAddItemWrapperType(r,eh.IGNORE)).items.map(e=>e.id);await e.deleteItems(s)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}},eF=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),eB=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({});class eV{constructor(){(0,s.A)(this,"itemsDiscardedByRetry",0),(0,s.A)(this,"eventCount",0),(0,s.A)(this,"itemsDiscardedByOverflow",0),(0,s.A)(this,"resilienceMechanism",eF.INDEXEDDB),(0,s.A)(this,"localstorageNumberOfQueuesPurged",0),(0,s.A)(this,"localstorageNumberOfFullReclaims",0),(0,s.A)(this,"localstorageNumberOfPartialReclaims",0),(0,s.A)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let eK=null,eG=()=>(eK||(eK=new eV),eK);class e${constructor(e){this._networkChangeCallback=e,"undefined"!=typeof window&&(window.addEventListener("offline",()=>this._networkChangeCallback(eB.OFFLINE)),window.addEventListener("online",()=>this._networkChangeCallback(eB.ONLINE)))}removeListeners(){"undefined"!=typeof window&&(window.addEventListener("offline",()=>this._networkChangeCallback(eB.OFFLINE)),window.addEventListener("online",()=>this._networkChangeCallback(eB.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?eB.ONLINE:eB.OFFLINE}}let ez=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),eW=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class eq{constructor(e){if((0,s.A)(this,"timeoutHandle",void 0),(0,s.A)(this,"callbackStatus",ez.IDLE),e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case ez.IDLE:case ez.TIMED_OUT:case ez.COMPLETED:t===eW.EXECUTE&&(this.callbackStatus=ez.RUNNING);break;case ez.RUNNING:switch(t){case eW.COMPLETE:this.callbackStatus=ez.COMPLETED;break;case eW.TIMEOUT:this.callbackStatus=ez.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,eW.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,eW.TIMEOUT),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==ez.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,eW.COMPLETE),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let eH=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({}),eJ={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},eQ=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class eY{constructor(e,t){(0,s.A)(this,"schedule",({immediate:e}={})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=eQ.IMMEDIATE:this.queuedSchedule!==eQ.IMMEDIATE&&(this.queuedSchedule=eQ.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,s.A)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=eQ.NONE}),(0,s.A)(this,"getFailureCount",()=>this.failureCount),(0,s.A)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,s.A)(this,"clearTimeout",()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,s.A)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(eH.ERROR))}catch(e){this.done(e)}}),(0,s.A)(this,"done",e=>{this.operationInFlight=!1,e===eH.ERROR||this.callbackTimer.getCallbackStatus()===ez.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===eH.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,s.A)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==eQ.NONE){let e=this.queuedSchedule===eQ.IMMEDIATE;this.queuedSchedule=eQ.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),(0,s.A)(this,"calculateBackoff",()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:s}=this.options,n=e*r**this.failureCount;if(s){let e=Math.random(),t=Math.floor(e*s*n);5>Math.floor(10*e)?n-=t:n+=t}return Number(Math.min(n,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||eJ.minRetryDelay,maxRetryDelay:e.maxRetryDelay||eJ.maxRetryDelay,backoffFactor:e.backoffFactor||eJ.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||eJ.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:eJ.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||eJ.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=eQ.NONE,this.callbackTimer=new eq(this.options.callbackTimeoutPeriod)}}function eX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function eZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let e0={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},e2={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class e1{constructor(e,t,r,s){this.queuePrefix=e,this.resilience=new eM(t,{logger:s,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new eY(eZ(eZ({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new eY(eZ(eZ({},e0),{},{waitInterval:e0.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=eG(),this.networkStatus=new e$(e=>{e===eB.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},eh.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===eB.OFFLINE)return void e(eH.NOOP);try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===eg)return void e(eH.ERROR)}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=(e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&X.includes(e[2])).reduce((e,t)=>{let[,r,s]=t;return void 0===e[r]&&(e[r]={}),e[r][s]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][J.ACK]);return r.forEach(t=>{let{queue:r,inProgress:s,reclaimStart:n,reclaimEnd:o}=Y(e,t);localStorage.removeItem(s),localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(o)}),r.length}catch(e){}return 0})(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await eo(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,eh.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(eH.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((s,n)=>{if(e.length<=0)return void s(eH.NOOP);r(e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}),e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),n(e)):s(eH.SUCCESS)})})}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||e2.backoffFactor,backoffJitterPercentage:(null==e?void 0:e.backoffJitterPercentage)!==void 0?e.backoffJitterPercentage:e2.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||e2.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||e2.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||e2.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||e2.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||e2.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||e2.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||e2.minRetryDelay}}}class e4{constructor(e,t){this.reason=e,this.message=t instanceof Error?t.message:null,this.statusCode=t instanceof e6?t.statusCode:null}}let e5=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});class e3{constructor(e,t){this.props=e,this.url=t}static fromJson(e){let t,r="string"==typeof(t=null==e?void 0:e.url)||t instanceof String?e.url.trim():"";return new e3((null==e?void 0:e.props)||null,r.startsWith("http")?r:null)}}class e6 extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.statusText=r}}let e7=["FetchError","AbortError","TypeError"];function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function e9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function te(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===e5.PAGE||e.msg.type===e5.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties=e9(e9({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===e5.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits=e9(e9({},e.msg.traits),{},{xid:r}))}return e})(e,r))}catch(t){return e}}let tt=new Map([[200,"OK"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Timeout"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Payload Too Large"],[414,"URI Too Long"],[415,"Unsupported Media Type"],[416,"Requested range not satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Timeout"],[505,"HTTP Version not supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[508,"Loop Detected"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"],[-1,"Unknown Status"]]);var tr=r("./node_modules/memoize-one/dist/memoize-one.esm.js");function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}let tn=async e=>{var t;let r=null==(t=to(e))?void 0:t.signal,n=ti(e.url),o=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},n));if(429===o.status||o.status>=500&&o.status<600)throw new e6(`HTTP Error ${o.status} (${o.statusText})`,o.status,o.statusText);return o},to=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},ti=(0,tr.A)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"});var ta=r("./node_modules/date-fns/esm/toDate/index.js"),tl=r("./node_modules/date-fns/esm/differenceInCalendarDays/index.js"),tc=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function tu(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}var td=r("./node_modules/js-cookie/src/js.cookie.js"),th=r.n(td);let tp=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class tm{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let tf=()=>{try{return window&&window.location&&"https:"===window.location.protocol}catch(e){return!1}},tg={[tp.AWC_TLD_TEST]:new tm("__awc_tld_test__",{expires:365,secure:tf(),path:"/"}),[tp.AWC_ANALYTICS_DEBUG]:new tm("atlassian_analytics_debug",{expires:365,secure:tf(),path:"/"}),[tp.AJS_ANONYMOUS_ID]:new tm("ajs_anonymous_id",{expires:365,secure:tf(),path:"/"})},ty=new class{constructor(){(0,s.A)(this,"_data",{}),(0,s.A)(this,"length",0),(0,s.A)(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),(0,s.A)(this,"getItem",e=>e in this._data?this._data[e]:null),(0,s.A)(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),(0,s.A)(this,"clear",()=>{this._data={},this.length=0}),(0,s.A)(this,"key",e=>Object.keys(this._data)[e])}},tb="awcInMemoryStorageFallback";function tv(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let s=e.getItem(r);return e.removeItem(r),s===t}catch(e){return!1}}class t_{constructor(e,t={}){(0,s.A)(this,"getStore",()=>this._store),(0,s.A)(this,"getItem",e=>this._store.getItem(this.createKey(e))),(0,s.A)(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),(0,s.A)(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -0x7ff8fff2===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),(0,s.A)(this,"swapToInMemory",()=>{let e;if(this._store===ty||"undefined"==typeof window)return;let t=Object.keys(this._store||{});tv(window[tb])?e=window[tb]:(e=ty,window[tb]||(window[tb]=ty)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e}),(0,s.A)(this,"clear",()=>this._store.clear()),(0,s.A)(this,"key",e=>this._store.key(e)),(0,s.A)(this,"getPrefix",()=>this._prefix),(0,s.A)(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==i.sR.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),tv(e)?this._store=e:this.swapToInMemory()}}let tw=class extends t_{constructor(e){let t;try{t=window.localStorage||ty}catch(e){t=ty}super(t,e)}};class tC{constructor(){this.safeStorage=new tw({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}let tO=tg.AWC_TLD_TEST.getKey(),tE="tld_test",tk=(0,tr.A)(()=>{if("undefined"==typeof location)return"";let{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){let r=t.slice(-1*e),s=`.${r.join(".")}`;if(th().set(tO,tE,{domain:s}),th().get(tO)===tE)return th().remove(tO,{domain:s}),s}return e});function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class tI{constructor(e){this.cookieLike=((e=!1)=>!e&&"file:"!==location.protocol&&"chrome-extension:"!==location.protocol)(e)?th():new tC}set(e,t,r){return tg[e]?this.cookieLike.set(tg[e].getKey(),t,tA(tA({},tg[e].getAttributes()),{},{domain:tk()},r)):void console.warn(`Unknown cookie key ${e} provided, not set.`)}get(e){return tg[e]?this.cookieLike.get(tg[e].getKey()):void console.warn(`Unknown cookie key ${e} provided, not fetched.`)}remove(e,t){if(!tg[e])return void console.warn(`Unknown cookie key ${e} provided, not removed.`);this.cookieLike.remove(tg[e].getKey(),tA({},t))}}let tj="SAFE",tx="UNSAFE",tP="LOCAL_STORAGE";class tT{constructor(e){this.store=new tw({useStoragePrefix:!1}),this.cookie=new tI(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(tp.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(tg.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===tP?this.store.getItem(tg.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(tp.AJS_ANONYMOUS_ID);if(t){let e={type:tx,anonymousId:t};try{let r=JSON.parse(t);if(r&&"string"==typeof r)return{type:tj,anonymousId:r};return e}catch(t){return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(tP),t=!1;switch((!this.lastAnonymousIdCookieUpdate||function(e,t){(0,tc.A)(2,arguments);var r=(0,ta.A)(e),s=(0,ta.A)(t),n=tu(r,s),o=Math.abs((0,tl.A)(r,s));r.setDate(r.getDate()-n*o);var i=Number(tu(r,s)===-n),a=n*(o-i);return 0===a?0:a}(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case tj:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case tx:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case tj:case tx:return this.store.setItem(tg.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=o()){let t=e();return this.setAnonymousId(t),t}}var tD=r("./node_modules/@segment/isodate-traverse/lib/index.js"),tR=r.n(tD);function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tU=e=>{let t=tM(e,"$.properties");return tR()(t)},tM=(e,t)=>{let r=(e,t,s,n)=>{if(null===e||"object"!=typeof e)return e;if(n>512)return{_depthLimitExceeded:!0,message:`Object nesting depth limit exceeded at path '${s}' with depth '${n}'`};if(t.has(e)){let r=t.get(e);return{_circularReference:!0,message:`Circular reference to object at original path '${r}' detected at path '${s}'`,originalPath:r}}t.set(e,s);let o={};return Object.keys(e).forEach(i=>{let a=e[i];if(void 0!==a)if(Array.isArray(a)){let e=[];a.forEach((o,a)=>{let l=r(o,t,`${s}.${i}[${a}]`,n+1);void 0!==l&&e.push(l)}),o[i]=e}else{let e=r(a,t,`${s}.${i}`,n+1);void 0!==e&&(o[i]=e)}}),t.delete(e),o};return r(e,new Map,t,0)};function tF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tF(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class tV{constructor(e,t,r,s,n){this.success=e,this.validationErrors=t,this.message=r,this.code=s,this.validationReports=n}isSuccess(){return this.success}getValidationErrors(){return this.validationErrors}getMessage(){return this.message}getCode(){return this.code}getValidationReports(){return void 0===this.validationReports?null:this.validationReports}}class tK{constructor(e){this.error=e}}class tG{constructor(e,t,r,s){this.success=e,this.statusCode=t,this.message=r,this.eventResponseList=s}isSuccess(){return this.success}getStatusCode(){return this.statusCode}getMessage(){return this.message}getEventResponseList(){return this.eventResponseList}}class t${constructor(e,t,r){this.messageId=e,this.results=t,this.segmentEvent=r}getMessageId(){return this.messageId}getResults(){return this.results}getSegmentEvent(){return this.segmentEvent}}class tz{constructor(e){var t;let r,n;(0,s.A)(this,"sendEvents",async(e,t)=>{var r,s;if(!1===this.options.enableEventCalls)return;let n=this.resilienceQueue.getGlobalRetryCount(),o=this.metrics.getMetricsPayload(),i=await this.attachXIDs(e),a=new Date().toISOString(),l=await this.metadataClient.getMetadataAsync(),[c,u]=this.getEventUrl(l),d=tB(tB({},o),{},{httpRetryCount:n,lastSendEventsErrorReason:(null==(r=this.lastSendEventsError)?void 0:r.message)||null,lastSendEventsError:this.lastSendEventsError,lastUrlFallbackError:this.lastUrlFallbackError,isUsingFallbackUrl:u,props:(null==l?void 0:l.props)||null,metadataClientMetrics:(null==(s=this.metadataClient)?void 0:s.metrics)||null});this.cleanLibraryMetadata(d);let h=i.map(e=>(e.msg.sentAt=a,e.msg));try{let r=await tn({url:c,batch:{batch:h,sentAt:a,metadata:d},timeout:this.options.requestTimeout});this.lastSendEventsError=null,this.lastUrlFallbackError=null,this.metrics.subtractFromMetrics(o),t(null,r),await this.invokeLocalResponseCallbackAsync(e,r,null)}catch(r){if(r instanceof e6&&[429,503].includes(r.statusCode))this.lastSendEventsError=new e4("ServerBusyError",r);else{let e=r instanceof Error&&e7.includes(r.name)?r.name:"Unknown";this.lastSendEventsError=new e4(e,r),this.useUrlFromMetadata=!1;let[t,s]=this.getEventUrl(l);s&&s!==u&&(this.lastUrlFallbackError=this.lastSendEventsError)}t(r,null),await this.invokeLocalResponseCallbackAsync(e,null,r)}}),this.options=tB(tB({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1,env:e.env,perimeter:e.perimeter||"",enableMetadataCalls:"boolean"!=typeof e.enableMetadataCalls||e.enableMetadataCalls,enableEventCalls:"boolean"!=typeof e.enableEventCalls||e.enableEventCalls}),this.user=new tT(null==(t=this.options)?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=eG(),this.responseCallback=e.responseCallback,this.resilienceQueue=(r=e.retryQueuePrefix,n=e.product,new e1(r,n,this.options.retryQueueOptions||{},this.options.logger)),this.metadataClient=e.metadataClient,this.useUrlFromMetadata=!0,this.lastSendEventsError=null,this.lastUrlFallbackError=null,setInterval(()=>{this.useUrlFromMetadata=!0},6e5),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,s){let n=tB(tB({},this.buildBaseEvent(r,e5.TRACK,t)),{},{type:e5.TRACK,properties:tU(t),event:e}),o=tB(tB({},n),{},{messageId:this.createMessageId()}),i=this.packageEvent(o);await this.enqueueEvent(i),s&&s()}async page(e,t,r,s){let n=tB(tB({},this.buildBaseEvent(r,e5.PAGE,t)),{},{type:e5.PAGE,properties:tU(t),name:e}),o=tB(tB({},n),{},{messageId:this.createMessageId()}),i=this.packageEvent(o);await this.enqueueEvent(i),s&&s()}async identify(e,t,r,s){let n=tB(tB({},this.buildBaseEvent(r,e5.IDENTIFY,t)),{},{type:e5.IDENTIFY,traits:tU(t)}),o=tB(tB({},n),{},{messageId:this.createMessageId()}),i=this.packageEvent(o);await this.enqueueEvent(i),s&&s()}async enqueueEvent(e){this.options.enableMetadataCalls&&this.metadataClient.start(!1),await this.resilienceQueue.addItem(e)}buildBaseEvent(e,t,r){return{context:tN(tN({},tU(e).context),{},{userAgent:navigator.userAgent}),timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${o()()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}getEventUrl(e){let t=null!=e&&e.url?e.url:this.gasv3BatchUrl,r=this.useUrlFromMetadata?t:this.gasv3BatchUrl,s=t===this.gasv3BatchUrl?null:r!==t;return[r,s]}cleanLibraryMetadata(e){if(null!==e&&"object"==typeof e)for(let t in e){if("props"===t)continue;let r=e[t];null==r||"number"==typeof r&&0===r?delete e[t]:Array.isArray(r)?0===r.length?delete e[t]:r.forEach(e=>{this.cleanLibraryMetadata(e)}):"object"==typeof r&&this.cleanLibraryMetadata(e[t])}}async invokeLocalResponseCallbackAsync(e,t,r){let s=this.responseCallback;if(s){let o=null;if(t){var n;let e;try{e=await t.clone().json()}catch(e){}(e=e||{}).code=Number.parseInt(e.code)>0?Number.parseInt(e.code):t.status,e.success=e.success||e.code>=200&&e.code<=299,o=new tV(e.success,e.validationErrors||new Map,new tK((null==(n=e.message)?void 0:n.error)||""),e.code,e.validationReports||null)}!r||r instanceof Error||(r=Error(String(r))),s(tW.toAnalyticsResponse(e||[],r||null,o))}}async attachXIDs(e){return this.xidPromiseCallback?te(e,this.xidPromiseCallback):Promise.resolve(e)}setResponseCallback(e){this.responseCallback=e}refreshMetadata(e,t){this.metadataClient.userInfo=e,this.metadataClient.tenantInfo=t}}class tW{static toAnalyticsResponse(e,t,r){let s=[];if(null!==r){var n,o;let[t,i]=[r.code,r.success];if(t>=200&&t<=299)return null==(n=r.validationReports)||n.forEach(t=>{let r=e.find(e=>e.msg.messageId===t.messageId);r&&s.push(new t$(r.msg.messageId,t.results,r.msg))}),new tG(i,t,tt.get(t),s);if(t>=400&&t<=499){let n=(null==(o=r.message)?void 0:o.error)!==null?r.message.error:tt.has(t)?tt.get(t):tt.get(-1);return e.forEach(e=>{s.push(new t$(e.msg.messageId,[],e.msg))}),new tG(i,t,n,s)}}else if(null!=t&&t.message){let r=t.message.match(tW.http_error_regex);if(r)return e.forEach(e=>{s.push(new t$(e.msg.messageId,[],e.msg))}),new tG(!1,Number(r[1]),r[2],s)}return e.forEach(e=>{s.push(new t$(e.msg.messageId,[],e.msg))}),new tG(!1,-1,tt.get(-1),s)}}(0,s.A)(tW,"http_error_regex",/HTTP Error\s([0-9]{3})\s\((.+)\)/);let tq="/gateway/api/gasv3/api/v1";class tH{static isGeminiVREnvironment(){try{for(let e in r.g)if(e.startsWith("__gemini_")&&e.endsWith("__"))return!0}catch(e){}return!1}static areMetadataCallsDisabled(){return this.areFetchCallsDisabled()||this.getGlobalBooleanProperty(tH.DISABLE_METADATA_CALLS_PROPERTY)}static areEventCallsDisabled(){return this.areFetchCallsDisabled()||this.getGlobalBooleanProperty(tH.DISABLE_EVENT_CALLS_PROPERTY)}static areFetchCallsDisabled(){return this.getGlobalBooleanProperty(tH.DISABLE_FETCH_CALLS_PROPERTY)}static getGlobalBooleanProperty(e){return!!(r.g&&r.g.hasOwnProperty(e))&&!0===r.g[e]}}function tJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}(0,s.A)(tH,"DISABLE_METADATA_CALLS_PROPERTY","__awc_disable_metadata_calls__"),(0,s.A)(tH,"DISABLE_EVENT_CALLS_PROPERTY","__awc_disable_event_calls__"),(0,s.A)(tH,"DISABLE_FETCH_CALLS_PROPERTY","__awc_disable_fetch_calls__");let tQ=async(e,t,r,n)=>{var o,i,a,l;let c=tY(r,n),u=tX(e),d=e+"?"+new URLSearchParams({product:`${t.product}`,userId:`${(null==(o=t.userInfo)?void 0:o.userId)||""}`,userIdType:`${(null==(i=t.userInfo)?void 0:i.userIdType)||""}`,tenantId:`${(null==(a=t.tenantInfo)?void 0:a.tenantId)||""}`,tenantIdType:`${(null==(l=t.tenantInfo)?void 0:l.tenantIdType)||""}`}).toString(),h=await fetch(d,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tJ(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"GET",signal:c.signal},u));if(200!==h.status)throw new e6(`Metadata: HTTP Error ${h.status} (${h.statusText})`,h.status,h.statusText);return h},tY=(e,t)=>{let r=new AbortController;return setTimeout(()=>{r.abort()},e||3e4),null==t||t.addEventListener("abort",()=>{r.abort()}),r},tX=(0,tr.A)(e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"});function tZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function t0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class t2{constructor(e,t,r){this._userInfo={anonymousId:""},this._tenantInfo={},this._url=`${e}://${t}/metadata`,this._product=r,this._metadataInfo=null,this._requestStatus="PENDING",this._lastFetchRequestCount=0,this._lastErrorReason=null,this._fetchAbortController=null,this._hasBeenStopped=!1,this._isEnabled=!1,this._propertyChangeRefreshTimeout=null;let s=function({apiHost:e}){return e===window.location.host+tq}({apiHost:t});this._metadataHost=s?"PRODUCT_HOST":t,this._options=this.buildOptions({backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3}),this._scheduler=new eY(t0(t0({},this._options),{},{waitInterval:6e5}),this.scheduleCallback.bind(this)),this._networkStatus=null}start(e){this._isEnabled||this._hasBeenStopped&&!e||(this._isEnabled=!0,this.startNetworkStatusMonitor(),setTimeout(()=>{this._scheduler.schedule({immediate:!0})},t2.INITIAL_REFRESH_DELAY))}stop(){var e;this._isEnabled&&(this._hasBeenStopped=!0,this._isEnabled=!1,this.stopNetworkStatusMonitor(),this._scheduler.stop(),null==(e=this._fetchAbortController)||e.abort(),this.resetPropertyChangeRefresh())}startNetworkStatusMonitor(){this._networkStatus||(this._networkStatus=new e$(e=>{e===eB.OFFLINE?this._scheduler.stop():this._isEnabled&&this._scheduler.schedule({immediate:null===this._metadataInfo})}))}stopNetworkStatusMonitor(){this._networkStatus&&(this._networkStatus.removeListeners(),this._networkStatus=null)}async refreshMetadataAsync(){var e;if(tH.areFetchCallsDisabled()||!this._isEnabled)return Promise.resolve();null==(e=this._fetchAbortController)||e.abort(),this._fetchAbortController=new AbortController;let t=this._fetchAbortController.signal;this._lastFetchRequestCount=this._scheduler.getFailureCount(),await tQ(this._url,{product:this._product,userInfo:this._userInfo,tenantInfo:this._tenantInfo},6e4,t).then(async e=>{let t=await e.json();this._metadataInfo=e3.fromJson(t),this._lastFetchRequestCount++,this._requestStatus="FETCHED",this._lastErrorReason=null}).catch(e=>{if(!t.aborted)throw this._requestStatus="FAILED",e instanceof e6&&[429,503].includes(e.statusCode)?this._lastErrorReason="ServerBusyError":this._lastErrorReason=e instanceof Error&&e7.includes(e.name)?e.name:"Unknown",e})}getMetadataAsync(){return Promise.resolve(this._metadataInfo)}get status(){return this._requestStatus}get lastErrorReason(){return this._lastErrorReason}get lastFetchRequestCount(){return this._lastFetchRequestCount}get userInfo(){return this._userInfo}set userInfo(e){var t,r;((null==(t=this._userInfo)?void 0:t.userId)!==(null==e?void 0:e.userId)||(null==(r=this._userInfo)?void 0:r.userIdType)!==(null==e?void 0:e.userIdType))&&(this._userInfo=e,this.schedulePropertyChangeRefresh())}get tenantInfo(){return this._tenantInfo}set tenantInfo(e){var t,r;((null==(t=this._tenantInfo)?void 0:t.tenantId)!==(null==e?void 0:e.tenantId)||(null==(r=this._tenantInfo)?void 0:r.tenantIdType)!==(null==e?void 0:e.tenantIdType))&&(this._tenantInfo=e,this.schedulePropertyChangeRefresh())}get metrics(){return{host:this._metadataHost,status:this.status,lastErrorReason:this.lastErrorReason,lastRefreshRequestCount:this.lastFetchRequestCount}}async scheduleCallback(e){var t;if((null==(t=this._networkStatus)?void 0:t.getNetworkStatus())===eB.OFFLINE)return void e(eH.NOOP);try{await this.refreshMetadataAsync(),e(eH.SUCCESS),this._scheduler.schedule()}catch(t){e(eH.ERROR)}}schedulePropertyChangeRefresh(){this._isEnabled&&(this.resetPropertyChangeRefresh(),this._propertyChangeRefreshTimeout=setTimeout(()=>{this.resetPropertyChangeRefresh(),this._scheduler.schedule({immediate:!0})},10))}resetPropertyChangeRefresh(){this._propertyChangeRefreshTimeout&&(clearTimeout(this._propertyChangeRefreshTimeout),this._propertyChangeRefreshTimeout=null)}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||e2.backoffFactor,backoffJitterPercentage:(null==e?void 0:e.backoffJitterPercentage)!==void 0?e.backoffJitterPercentage:e2.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||e2.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||e2.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||e2.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||e2.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||e2.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||e2.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||e2.minRetryDelay}}}(0,s.A)(t2,"INITIAL_REFRESH_DELAY",1),(0,s.A)(t2,"Factory",(e,t,r)=>new t2(e,t,r));var t1=r("./node_modules/query-string/index.js");let t4=e=>window.history.replaceState({},"",e),t5=(e,t=t4)=>{let r=window.location.href,s=window.location.hash,n=""!==s?r.replace(s,""):r,{url:o,query:i}=(0,t1.parseUrl)(n),a=((e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}))(i,e);if(Object.keys(a).length>0){let r=((e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}))(i,e);t(Object.keys(r).length>0?`${o}?${(0,t1.stringify)(r)}${s}`:`${o}${s}`)}return a};class t3{constructor(){(0,s.A)(this,"handleOriginParameters",(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let s=r.filter(e=>0>Object.values(i.D0).indexOf(e));if(s.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${s.join()}!`);let n=t5((e,t)=>r.indexOf(t)>=0,t);return Object.keys(n).map(t=>{let r=e[t](n[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{})}),this._originStore={}}}let t6="session.id",t7="session.expiry",t8=/^\d+$/,t9=()=>{};class re{constructor(e={}){(0,s.A)(this,"_generateNewSessionId",()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(t6,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e}),(0,s.A)(this,"_updateSessionExpiry",()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(t7,e.toString()),e}),(0,s.A)(this,"_debouncedUpdateSessionExpiry",e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:t9,this._safeLocalStorage=new tw}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(t6),t=parseInt(this._safeLocalStorage.getItem(t7)||"0",10)||0;return(this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)||!t8.test(e))?this._generateNewSessionId():e}}let rt=class extends t_{constructor(e){let t;try{t=window.sessionStorage||ty}catch(e){t=ty}super(t,e)}},rr="tab.id";class rs{constructor(){(0,s.A)(this,"_generateNewTabId",()=>{let e=o()();return this._safeSessionStorage.setItem(rr,e),e}),this._safeSessionStorage=new rt}getCurrentTabId(){let e=this._safeSessionStorage.getItem(rr);return e||(e=this._generateNewTabId()),e}}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ri="taskSessions",ra="taskSessionsInit",rl="awc.";class rc{constructor(){(0,s.A)(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(ri)||null===this._safeSessionStorage.getItem(ra)||parseInt(this._safeSessionStorage.getItem(ra)||"0",10)<e-3e3),(0,s.A)(this,"_removeTaskSessionPrefix",(e,t)=>t.split(rl)[1]),(0,s.A)(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(rl)),(0,s.A)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(ri)||"")}catch(e){return{}}}),(0,s.A)(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(ri,JSON.stringify(e))}catch(e){}}),(0,s.A)(this,"_appendTaskSessions",e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)}),(0,s.A)(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),(0,s.A)(this,"createTaskSession",e=>{let t=o()(),r={};return r[e]=t,this._appendTaskSessions(r),t}),(0,s.A)(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)}),(0,s.A)(this,"completeTaskSession",e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)}),(0,s.A)(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{let{url:r,query:s}=(0,t1.parseUrl)(e),n=this.getAllTaskSessions(),o=t?((e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}))(n,t):L(n,Object.values(i.D0));if(0===Object.keys(o).length)return e;let a=ro(ro({},R(o,(e,t)=>rl+t)),s);return`${r}?${(0,t1.stringify)(a)}`}),(0,s.A)(this,"stripQueryParameters",()=>{let e=R(t5(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});let e=Date.now();this._safeSessionStorage=new rt;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(ra,e.toString()))}catch(e){}}}let ru=tg.AWC_ANALYTICS_DEBUG.getKey(),rd="synthetic",rh=class{constructor(){(0,s.A)(this,"_bind",()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})}),(0,s.A)(this,"_cache",e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))}),(0,s.A)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,s.A)(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(rd):e.tags=[rd],this._cache(e))}),this._isDebugCookieEnabled=(()=>{try{return JSON.parse(th().get(ru)||"false")}catch(e){th().remove(ru)}return!1})(),this._isDebugCookieEnabled&&this._bind()}},rp=["embeddedProduct"];function rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class rg{constructor(e,t,r,n={}){if((0,s.A)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,s.A)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,s.A)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,s.A)(this,"_bindEventListeners",()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,s.A)(this,"_unbindEventListeners",()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,s.A)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,s.A)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,s.A)(this,"_getProductKey",(e,t)=>{let r=e;return t&&(r+=`-${t}`),r}),(0,s.A)(this,"_getLastSentTimestamp",(e,t,r)=>(((this._parseLocalStorageData(this._storageKey)||{})[r]||{})[t]||{})[e]||null),(0,s.A)(this,"_parseLocalStorageData",e=>{let t=this._safeLocalStorage.getItem(e);try{return JSON.parse(t||"")}catch(t){return this._safeLocalStorage.removeItem(e),null}}),(0,s.A)(this,"_getMalformedLastSentTimestamp",(e,t,r)=>(((this._parseLocalStorageData(this._malformedEventStorageKey)||{})[r||"NOT_SET"]||{})[t||"NOT_SET"]||{})[e]||null),(0,s.A)(this,"_setLastSentTimestamp",(e,t,r)=>{let s=this._parseLocalStorageData(this._storageKey)||{},n=s[r]||{},o=n[t]||{};o[e]=Date.now(),n[t]=o,s[r]=n,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(s))}),(0,s.A)(this,"_setMalformedLastSentTimestamp",(e,t,r)=>{let s=this._parseLocalStorageData(this._malformedEventStorageKey)||{},n=r||"NOT_SET",o=t||"NOT_SET",i=s[n]||{},a=i[o]||{};a[e]=Date.now(),i[o]=a,s[n]=i,this._safeLocalStorage.setItem(this._malformedEventStorageKey,JSON.stringify(s))}),(0,s.A)(this,"_shouldSendEvent",(e,t,r,s)=>{let n="undefined"!=typeof document?document:null;if(n&&!n.hasFocus())return"FocusLost";if(t!==i.v7.NONE&&!r||!s){let t=Date.now()-this._getMalformedLastSentTimestamp(e,r,s);return null===t||t>this._throttle?"UserOrTenantIncomplete":"MalformedUiViewedRateLimited"}let o=Date.now()-this._getLastSentTimestamp(e,r,s);return null===o||o>this._throttle?"EligibleToSend":"UiViewedRateLimited"}),(0,s.A)(this,"_handleInterval",()=>{let e=this._getContext(),{embeddedProduct:t}=e,r=(0,ew.A)(e,rp);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)}),(0,s.A)(this,"_sendEvent",(e,t,r=!1)=>{let{subproduct:s,tenantIdType:n,tenantId:o,userId:i,lastScreenEvent:a,attributes:l}=t,c=this._getProductKey(e,s);switch(this._shouldSendEvent(c,n,o,i)){case"EligibleToSend":this._setLastSentTimestamp(c,o,i),this._onEvent(this._createEvent(e,s,r,a,l,"ui","viewed"));break;case"UserOrTenantIncomplete":this._setMalformedLastSentTimestamp(c,o,i),this._onEvent(this._createEvent(e,s,r,a,l,"malformed","uiviewed"))}}),(0,s.A)(this,"_createEvent",(e,t,r,s,n,o,i)=>{let a={product:e,source:"ui",action:i,actionSubject:o,attributes:n};return r&&(a.subproduct=null,a.version=null,a.attributes=rf(rf({},a.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),s&&(a.attributes=rf(rf({},a.attributes),{},{lastScreenEvent:{name:s.name,attributes:s.attributes}})),a}),!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=n.delay||2e3,this._throttle=n.throttle||36e5,this._storageKey=n.storageKey||"ui.viewed.last.sent",this._malformedEventStorageKey=n.malformedStorageKey||"malformed.uiviewed.last.sent",this._safeLocalStorage=new tw({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function ry(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let rb=function(e){return e.XC="xc",e.UID="uid",e}({});function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function r_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let rw="last.screen.event";class rC{static getCallback(e){return e=e||console,t=>{rC.callback(t,e)}}static callback(e,t){let r=e.getStatusCode();r>=200&&r<=299?e.getEventResponseList().forEach(e=>{t.warn(`Validation report for event with message ID %s:
`,e.getMessageId(),e)}):400===r||404===r?(t.warn("GASv3 submission failed with HTTP Status Code %d: %s",e.getStatusCode(),e.getMessage()),e.getEventResponseList().forEach(e=>{t.warn(`Event with message ID %s:
`,e.getMessageId(),e)})):(t.log("GASv3 submission failed with HTTP Status Code %d: %s",e.getStatusCode(),e.getMessage()),e.eventResponseList.forEach(e=>{t.debug(`Event with message ID %s:
`,e.getMessageId(),e)}))}}class rO{constructor(e,t={}){if((0,s.A)(this,"_useStargate",e=>null==e||e),(0,s.A)(this,"_changeInternalUserId",(e,t)=>{this._eventProcessor.getUser().setUserId(e),t&&t!==this._eventProcessor.getUser().getAnonymousId()&&this._eventProcessor.getUser().setAnonymousId(t)}),(0,s.A)(this,"_createSubproductGetter",e=>h(e,"Cannot get subproduct from the callback. Proceeding without it.")),(0,s.A)(this,"_createEmbeddedProductGetter",e=>h(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,s.A)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(rw)||"")}catch(e){return this._safeSessionStorage.removeItem(rw),null}}),(0,s.A)(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(rw,JSON.stringify({name:e.name,attributes:e.attributes}))}),(0,s.A)(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this._eventDelayQueue.isDelayingLowPriorityEvents()&&!t}),(0,s.A)(this,"_fireEvent",(e,t,r,s)=>{switch(t.eventType){case i.$q.UI:case i.$q.OPERATIONAL:case i.$q.TRACK:return this._eventProcessor.track(e,t,r,s);case i.$q.SCREEN:return this._eventProcessor.page(e,t,r,s);case i.$q.IDENTIFY:return this._eventProcessor.identify(e,t,r,s);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}}),(0,s.A)(this,"_fireDelayedEvent",(e,t,r,s)=>{try{this._changeInternalUserId(s.userId,s.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,s.A)(this,"_delayEvent",(e,t,r,s,n)=>{this._eventDelayQueue.push(e,t,r,s),n&&n()}),(0,s.A)(this,"_processEvent",(e,t,r,s)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t))?(this._delayEvent(e,t,r,this._userInfo,s),Promise.resolve()):this._fireEvent(e,t,r,s)),(0,s.A)(this,"setEmbeddedProduct",e=>{this._internalProductInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),(0,s.A)(this,"clearEmbeddedProduct",()=>{this._internalProductInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,s.A)(this,"setSubproduct",e=>{this._internalProductInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),(0,s.A)(this,"setOriginTracingHandlers",e=>{let t=this._originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this._task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return(Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0)?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,s.A)(this,"setTenantInfo",(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==i.v7.NONE&&!t)throw Error("Missing tenantId");if(!(0,i.Xj)(i.v7,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,i.KQ)(i.v7)}]`);this._tenantInfo={tenantIdType:e,tenantId:t},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,s.A)(this,"clearTenantInfo",()=>{this._tenantInfo={},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,s.A)(this,"setOrgInfo",e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}}),(0,s.A)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,s.A)(this,"setWorkspaceInfo",e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}}),(0,s.A)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,s.A)(this,"setUserInfo",(e,t)=>{!function(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,i.Xj)(i.Of,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,i.KQ)(i.Of)}]`)}(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this._eventProcessor.getUser().getAnonymousId()},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,s.A)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this._eventProcessor.getUser().getAnonymousId()},this._eventProcessor.refreshMetadata(this._userInfo,this._tenantInfo)}),(0,s.A)(this,"setAlias",(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,i.Xj)(i.VD,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,i.KQ)(i.VD)}]`);this._aliases[e]=t}),(0,s.A)(this,"clearAlias",()=>{this._aliases={}}),(0,s.A)(this,"setGroup",(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,i.Xj)(i.iU,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,i.KQ)(i.iU)}]`);this._groups[e]=t}),(0,s.A)(this,"clearGroup",()=>{this._groups={}}),(0,s.A)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,s.A)(this,"getCurrentSessionId",()=>this._sessionTracking.getCurrentSessionId()),(0,s.A)(this,"setUIViewedAttributes",e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=r_({},e)}),(0,s.A)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,s.A)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,s.A)(this,"sendIdentifyEvent",(e,t,r)=>{this.setUserInfo(e,t);let s={userIdType:e,eventType:i.$q.IDENTIFY};return this._processEvent(t,s,this._context,r)}),(0,s.A)(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),(0,s.A)(this,"sendScreenEvent",(e,t,r)=>{let s,n,o,a;if("object"==typeof e?(s=e.name,n=e.attributes,o=e.containers,a=e.tags):(s=e,n=r),!s)throw Error("Missing name");F(o);let l=r_({name:s},function(e,t,r,s,n,o,a,l,c,u,d,h,p,m,f,E){let S=k(e),j=y(t),x=b(r),P=v(u),T=_(h),D={title:"",path:"",url:"",referrer:"",search:"",eventType:i.$q.SCREEN};return g(g(g(g(g(g(g(g(g(g(g(g({},S),j),x),P),D),A("attributes",s)),A("nonPrivacySafeAttributes",n)),I(m)),O(p)),{},{tags:o,tabId:a,sessionId:l,taskSessions:c,pageLoadId:d},T),w(f)),C(E))}(this._internalProductInfo,this._tenantInfo,this._userInfo,n,e.nonPrivacySafeAttributes,a,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,o,this._aliases,this._groups));return this._setLastScreenEvent(l),this._processEvent(s,l,this._context,ry(t,l))}),(0,s.A)(this,"sendTrackEvent",(e,t)=>{V(e);let r=T(this._internalProductInfo,this._tenantInfo,this._userInfo,e,i.$q.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,ry(t,r))}),(0,s.A)(this,"sendUIEvent",(e,t)=>{V(e);let r=T(this._internalProductInfo,this._tenantInfo,this._userInfo,e,i.$q.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,ry(t,r))}),(0,s.A)(this,"sendOperationalEvent",(e,t)=>{V(e);let r=T(this._internalProductInfo,this._tenantInfo,this._userInfo,e,i.$q.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this._task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(x(e),r,this._context,ry(t,r))}),(0,s.A)(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new rg(this._internalProductInfo,()=>({embeddedProduct:this._internalProductInfo.embeddedProduct(),subproduct:this._internalProductInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),(0,s.A)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,s.A)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,s.A)(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),(0,s.A)(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),(0,s.A)(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),(0,s.A)(this,"startLowPriorityEventDelay",(e,t)=>{this._eventDelayQueue.startLowPriorityEventDelay(e,t)}),(0,s.A)(this,"stopLowPriorityEventDelay",()=>{this._eventDelayQueue.stopLowPriorityEventDelay()}),(0,s.A)(this,"onEvent",(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===i.$q.TRACK)return this.sendTrackEvent(t);if(t.eventType===i.$q.UI)return this.sendUIEvent(t);if(t.eventType===i.$q.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===i.$q.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===i.$q.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,i.KQ)(i.$q)}]`)}),(0,s.A)(this,"setResponseCallback",e=>{this._eventProcessor.setResponseCallback(e)}),!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,i.Xj)(i.sR,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,i.KQ)(i.sR)}]`);if(e.perimeter&&!(0,i.Xj)(i.KW,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,i.KQ)(i.KW)}]`);if(e.origin){if(!(0,i.Xj)(i.VH,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,i.KQ)(i.VH)}]`)}else e.origin=i.VH.WEB;e.platform?function(e){if(!(0,i.Xj)(i.AQ,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,i.KQ)(i.AQ)}]`);if(e.origin===i.VH.DESKTOP&&!(0,i.Xj)(i.vB,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===i.VH.WEB&&!(0,i.Xj)(i.LK,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===i.VH.WEB?i.AQ.WEB:i.AQ.DESKTOP,this._logger=t.logger||console,this._internalProductInfo=r_(r_({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},null!=e&&e.embeddedContext&&(this._embeddedContext=e.embeddedContext,(e=>e.embeddedType===i.vH.FIRST_PARTY&&void 0!==e.embeddedFromProduct)(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromProduct:this._embeddedContext.embeddedFromProduct,embeddedFromSubproduct:this._embeddedContext.embeddedFromSubproduct,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain}),(e=>e.embeddedType===i.vH.THIRD_PARTY&&void 0!==e.embeddedFromTopLevelDomain)(this._embeddedContext)&&this.setUIViewedAttributes({embeddedType:this._embeddedContext.embeddedType,embeddedFromTopLevelDomain:this._embeddedContext.embeddedFromTopLevelDomain})),this._context=function(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"5.8.0"},validationMode:function(e){let t=e.env;return void 0===t||t.includes("prod")?P.QUIET:P.COMPLETE}(e)}}}(this._internalProductInfo),this._safeSessionStorage=new rt;let r=this._useStargate(t.useStargate),n=t.apiHost||function({useStargate:e,env:t,useLegacyUrl:r,perimeter:s,ic:n,envOverride:o}){if(n){if(r)throw Error("IC is set but useLegacyUrl is true.");throw Error("IC is set but no apiHost provided.")}return s===i.KW.FEDRAMP_MODERATE?(({useStargate:e,env:t,useLegacyUrl:r,envOverride:s})=>{if(t===i.sR.LOCAL||t===i.sR.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===i.sR.PROD&&s)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===i.sR.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1":window.location.host+tq:t===i.sR.PROD?"as.atlassian-us-gov-mod.com/api/v1":"as.staging.atl-paas-us-gov-mod.net/api/v1"})({useStargate:e,env:t,useLegacyUrl:r,envOverride:o}):(({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===i.sR.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+tq:t===i.sR.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1")({useStargate:e,env:t,useLegacyUrl:r})}({useStargate:r,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter,ic:e.ic,envOverride:e.envOverride}),l=t.apiHostProtocol||"https",c=t.minRetryDelay||1e3,u=void 0!==t.maxRetryAttempts&&Number.isInteger(t.maxRetryAttempts)&&t.maxRetryAttempts>=0?t.maxRetryAttempts+1:void 0,p={maxRetryDelay:6e4,minRetryDelay:c,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload,maxAttempts:u},m=`awc-${e.env}`,f=t.disableCookiePersistence||!1,E=(t.metadataClientFactory||t2.Factory)(l,n,e.product);this._eventProcessor=new tz({apiHost:n,apiHostProtocol:l,product:e.product,retryQueuePrefix:m,retryQueueOptions:p,xidPromiseGetter:()=>((e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>[{type:rb.XC,state:"UNKNOWN"},{type:rb.UID,state:"UNKNOWN"}]),new Promise(e=>{setTimeout(()=>e(()=>[{type:rb.XC,state:"TIMEOUT"},{type:rb.UID,state:"TIMEOUT"}]),5e3)})])})(t.xidConsent,t.xidPromiseFn),logger:this._logger,metadataClient:E,disableCookiePersistence:f,responseCallback:rC.getCallback(this._logger),env:e.env,perimeter:e.perimeter,enableMetadataCalls:this.metadataCallsEnabled(t),enableEventCalls:this.eventCallsEnabled(t)}),this._userInfo={anonymousId:this._eventProcessor.getUser().getAnonymousId(null==t?void 0:t.customAnonymousIdGenerator)},this._pageVisibility=new a,this._tabTracking=new rs,this._sessionTracking=new re({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this._task=new rc,this._originTracing=new t3,this._apdexEvent=new d(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:t4,this._eventDelayQueue=new H(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new rh,this._pageLoadId=o()(),this._workspaceInfo={},this._aliases={},this._groups={}}metadataCallsEnabled(e){return"boolean"==typeof e.disableMetadataCalls?!e.disableMetadataCalls:!tH.isGeminiVREnvironment()&&!tH.areFetchCallsDisabled()}eventCallsEnabled(e){return"boolean"==typeof e.disableEventCalls?!e.disableEventCalls:!tH.isGeminiVREnvironment()&&!tH.areFetchCallsDisabled()}setEventValidationMode(e){this._context.context.validationMode=e}get task(){return this._task}get _productInfo(){return this._internalProductInfo}}},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js":(e,t,r)=>{"use strict";r.d(t,{$q:()=>n,AQ:()=>o,D0:()=>p,KQ:()=>m,KW:()=>g,LK:()=>h,LR:()=>u,Of:()=>c,VD:()=>y,VH:()=>i,Xj:()=>f,iU:()=>b,sR:()=>s,v7:()=>a,vB:()=>d,vH:()=>l});let s=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),n=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),o=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),i=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),a=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.LOOM_ORG_ID="loomOrgId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.JA_WORKSPACE_ID="jiraAlignWorkspaceId",e.NONE="none",e}({}),l=function(e){return e.FIRST_PARTY="FIRST_PARTY",e.THIRD_PARTY="THIRD_PARTY",e}({}),c=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.LOOM="loom",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.JA_USER_ID="jiraAlign",e.HALP="halp",e}({}),u=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({}),d=Object.freeze([o.DESKTOP,o.MAC,o.LINUX,o.WINDOWS]),h=Object.freeze([o.WEB,o.MOBILE_WEB]),p=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function m(e){return Object.values(e)}function f(e,t){return Object.values(e).indexOf(t)>-1}let g=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({}),y={},b=function(e){return e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e}({})},"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":(e,t,r)=>{"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":(e,t,r)=>{"use strict";function s(e){if(Array.isArray(e))return e}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":(e,t,r)=>{"use strict";function s(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(e,t,r)=>{"use strict";function s(e,t,r,s,n,o,i){try{var a=e[o](i),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(s,n)}function n(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,l,"next",e)}function l(e){s(i,n,o,a,l,"throw",e)}a(void 0)})}}r.d(t,{A:()=>n})},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(e,t,r)=>{"use strict";function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/construct.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r("./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js"),n=r("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function o(e,t,r){if((0,s.A)())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var i=new(e.bind.apply(e,o));return r&&(0,n.A)(i,r.prototype),i}},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,s.A)(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function n(e,t,r){return(t=(0,s.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"./node_modules/@babel/runtime/helpers/esm/get.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js");function n(){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=(0,s.A)(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}},"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":(e,t,r)=>{"use strict";function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/inherits.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function n(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,s.A)(e,t)}},"./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js":(e,t,r)=>{"use strict";function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":(e,t,r)=>{"use strict";function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":(e,t,r)=>{"use strict";function s(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function n(e,t){if(null==e)return{};var r,n,o=(0,s.A)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,r)=>{"use strict";function s(e,t){if(null==e)return{};var r={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;r[s]=e[s]}return r}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),n=r("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");function o(e,t){if(t&&("object"==(0,s.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,n.A)(e)}},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":(e,t,r)=>{"use strict";function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js"),n=r("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),o=r("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function i(e,t){return(0,s.A)(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,n,o,i,a=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(s=o.call(r)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return a}}(e,t)||(0,n.A)(e,t)||(0,o.A)()}},"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js"),n=r("./node_modules/@babel/runtime/helpers/esm/iterableToArray.js"),o=r("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function i(e){return function(e){if(Array.isArray(e))return(0,s.A)(e)}(e)||(0,n.A)(e)||(0,o.A)(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function n(e){var t=function(e,t){if("object"!=(0,s.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=(0,s.A)(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,s.A)(t)?t:t+""}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(e,t,r)=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r("./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js");function n(e,t){if(e){if("string"==typeof e)return(0,s.A)(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,s.A)(e,t):void 0}}},"./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),n=r("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"),o=r("./node_modules/@babel/runtime/helpers/esm/construct.js");function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,o.A)(e,arguments,(0,s.A)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,n.A)(r,e)})(e)}},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(e,t,r)=>{var s=r("./node_modules/@babel/runtime/helpers/typeof.js").default;function n(){"use strict";e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function p(e,r,s,n){var o,i,l,c,u=Object.create((r&&r.prototype instanceof v?r:v).prototype);return a(u,"_invoke",{value:(o=e,i=s,l=new x(n||[]),c=f,function(e,r){if(c===g)throw Error("Generator is already running");if(c===y){if("throw"===e)throw r;return{value:t,done:!0}}for(l.method=e,l.arg=r;;){var s=l.delegate;if(s){var n=function e(r,s){var n=s.method,o=r.iterator[n];if(o===t)return s.delegate=null,"throw"===n&&r.iterator.return&&(s.method="return",s.arg=t,e(r,s),"throw"===s.method)||"return"!==n&&(s.method="throw",s.arg=TypeError("The iterator does not provide a '"+n+"' method")),b;var i=m(o,r.iterator,s.arg);if("throw"===i.type)return s.method="throw",s.arg=i.arg,s.delegate=null,b;var a=i.arg;return a?a.done?(s[r.resultName]=a.value,s.next=r.nextLoc,"return"!==s.method&&(s.method="next",s.arg=t),s.delegate=null,b):a:(s.method="throw",s.arg=TypeError("iterator result is not an object"),s.delegate=null,b)}(s,l);if(n){if(n===b)continue;return n}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===f)throw c=y,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=g;var a=m(o,i,l);if("normal"===a.type){if(c=l.done?y:"suspendedYield",a.arg===b)continue;return{value:a.arg,done:l.done}}"throw"===a.type&&(c=y,l.method="throw",l.arg=a.arg)}})}),u}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var f="suspendedStart",g="executing",y="completed",b={};function v(){}function _(){}function w(){}var C={};h(C,c,function(){return this});var O=Object.getPrototypeOf,E=O&&O(O(P([])));E&&E!==o&&i.call(E,c)&&(C=E);var k=w.prototype=v.prototype=Object.create(C);function S(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){var r;a(this,"_invoke",{value:function(n,o){function a(){return new t(function(r,a){!function r(n,o,a,l){var c=m(e[n],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&i.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,l)})}l(c.arg)}(n,o,r,a)})}return r=r?r.then(a,a):a()}})}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(s(e)+" is not iterable")}return _.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:_,configurable:!0}),_.displayName=h(w,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,d,"GeneratorFunction")),e.prototype=Object.create(k),e},r.awrap=function(e){return{__await:e}},S(A.prototype),h(A.prototype,u,function(){return this}),r.AsyncIterator=A,r.async=function(e,t,s,n,o){void 0===o&&(o=Promise);var i=new A(p(e,t,s,n),o);return r.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(k),h(k,d,"Generator"),h(k,c,function(){return this}),h(k,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var s in t)r.push(s);return r.reverse(),function e(){for(;r.length;){var s=r.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},r.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function s(s,n){return a.type="throw",a.arg=e,r.next=s,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;j(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,s){return this.delegate={iterator:P(e),resultName:r,nextLoc:s},"next"===this.method&&(this.arg=t),b}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/regenerator/index.js":(e,t,r)=>{var s=r("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();e.exports=s;try{regeneratorRuntime=s}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},"./node_modules/@segment/isodate-traverse/lib/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/@segment/isodate/lib/index.js");e.exports=function e(t,r){var n,o,i,a;if(void 0===r&&(r=!0),t&&"object"==typeof t){return n=t,o=r,Object.keys(n).forEach(function(t){n[t]=e(n[t],o)}),n}if(Array.isArray(t)){return i=t,a=r,i.forEach(function(t,r){i[r]=e(t,a)}),i}return s.is(t,r)?s.parse(t):t}},"./node_modules/@segment/isodate/lib/index.js":(e,t)=>{"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],s=r.exec(e),n=0;if(!s)return new Date(e);for(var o,i=0;o=t[i];i++)s[o]=parseInt(s[o],10)||0;return s[2]=parseInt(s[2],10)||1,s[3]=parseInt(s[3],10)||1,s[2]--,s[8]=s[8]?(s[8]+"00").substring(0,3):0," "===s[4]?n=new Date().getTimezoneOffset():"Z"!==s[9]&&s[10]&&(n=60*s[11]+s[12],"+"===s[10]&&(n=0-n)),new Date(Date.UTC(s[1],s[2],s[3],s[5],s[6]+n,s[7],s[8]))},t.is=function(e,t){return"string"==typeof e&&(!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e)}},"./node_modules/@statsig/client-core/src/$_StatsigGlobal.js":(e,t,r)=>{"use strict";var s,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t._getInstance=t._getStatsigGlobalFlag=t._getStatsigGlobal=void 0;let i=r("./node_modules/@statsig/client-core/src/Log.js");t._getStatsigGlobal=()=>{try{return"undefined"!=typeof __STATSIG__?__STATSIG__:d}catch(e){return d}},t._getStatsigGlobalFlag=e=>(0,t._getStatsigGlobal)()[e],t._getInstance=e=>{let r=(0,t._getStatsigGlobal)();return e?r.instances&&r.instances[e]:(r.instances&&Object.keys(r.instances).length>1&&i.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),r.firstInstance)};let a="__STATSIG__",l="undefined"!=typeof window?window:{},c=void 0!==r.g?r.g:{},u="undefined"!=typeof globalThis?globalThis:{},d=null!=(o=null!=(n=null!=(s=l[a])?s:c[a])?n:u[a])?o:{instance:t._getInstance};l[a]=d,c[a]=d,u[a]=d},"./node_modules/@statsig/client-core/src/CacheKey.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getStorageKey=t._getUserStorageKey=void 0;let s=r("./node_modules/@statsig/client-core/src/Hashing.js");function n(e,t,r){var n;if(r)return r(e,t);let o=t&&t.customIDs?t.customIDs:{},i=[`uid:${null!=(n=null==t?void 0:t.userID)?n:""}`,`cids:${Object.keys(o).sort((e,t)=>e.localeCompare(t)).map(e=>`${e}-${o[e]}`).join(",")}`,`k:${e}`];return(0,s._DJB2)(i.join("|"))}t._getUserStorageKey=n,t._getStorageKey=function(e,t,r){return t?n(e,t,r):(0,s._DJB2)(`k:${e}`)}},"./node_modules/@statsig/client-core/src/ClientInterfaces.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/DataAdapterCore.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._makeDataAdapterResult=t.DataAdapterCore=void 0;let n=r("./node_modules/@statsig/client-core/src/Log.js"),o=r("./node_modules/@statsig/client-core/src/StableID.js"),i=r("./node_modules/@statsig/client-core/src/StatsigUser.js"),a=r("./node_modules/@statsig/client-core/src/StorageProvider.js"),l=r("./node_modules/@statsig/client-core/src/TypedJsonParse.js");function c(e,t,r,s){return{source:e,data:t,receivedAt:Date.now(),stableID:r,fullUserHash:(0,i._getFullUserHash)(s)}}t.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new u}attach(e,t,r){this._sdkKey=e,this._options=t}getDataSync(e){let t=e&&(0,i._normalizeUser)(e,this._options),r=this._getCacheKey(t),s=this._inMemoryCache.get(r,t);if(s&&this._getIsCacheValueValid(s))return s;let n=this._loadFromCache(r);return n&&this._getIsCacheValueValid(n)?(this._inMemoryCache.add(r,n),this._inMemoryCache.get(r,t)):null}setData(e,t){let r=t&&(0,i._normalizeUser)(t,this._options),s=this._getCacheKey(r);this._inMemoryCache.add(s,c("Bootstrap",e,null,r))}_getIsCacheValueValid(e){return null==e.stableID||e.stableID===o.StableID.get(this._getSdkKey())}_getDataAsyncImpl(e,t,r){return s(this,void 0,void 0,function*(){a.Storage.isReady()||(yield a.Storage.isReadyResolver());let s=null!=e?e:this.getDataSync(t),o=[this._fetchAndPrepFromNetwork(s,t,r)];return(null==r?void 0:r.timeoutMs)&&o.push(new Promise(e=>setTimeout(e,r.timeoutMs)).then(()=>(n.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(o)})}_prefetchDataImpl(e,t){return s(this,void 0,void 0,function*(){let r=e&&(0,i._normalizeUser)(e,this._options),s=this._getCacheKey(r),n=yield this._getDataAsyncImpl(null,r,t);n&&this._inMemoryCache.add(s,Object.assign(Object.assign({},n),{source:"Prefetch"}))})}_fetchAndPrepFromNetwork(e,t,r){return s(this,void 0,void 0,function*(){var s;let i=null!=(s=null==e?void 0:e.data)?s:null,a=null!=e&&this._isCachedResultValidFor204(e,t),u=yield this._fetchFromNetwork(i,t,r,a);if(!u)return n.Log.debug("No response returned for latest value"),null;let d=(0,l._typedJsonParse)(u,"has_updates","Response"),h=this._getSdkKey(),p=o.StableID.get(h),m=null;if((null==d?void 0:d.has_updates)===!0)m=c("Network",u,p,t);else{if(!i||(null==d?void 0:d.has_updates)!==!1)return null;m=c("NetworkNotModified",i,p,t)}let f=this._getCacheKey(t);return this._inMemoryCache.add(f,m),this._writeToCache(f,m),m})}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(n.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;let r=null==(t=a.Storage.getItem)?void 0:t.call(a.Storage,e);if(null==r)return null;let s=(0,l._typedJsonParse)(r,"source","Cached Result");return s?Object.assign(Object.assign({},s),{source:"Cache"}):null}_writeToCache(e,t){a.Storage.setItem(e,JSON.stringify(t)),this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e){var t;let r=null!=(t=(0,a._getObjectFromStorage)(this._lastModifiedStoreKey))?t:{};r[e]=Date.now();let s=d(r,10);s&&(delete r[s],a.Storage.removeItem(s)),(0,a._setObjectInStorage)(this._lastModifiedStoreKey,r)}},t._makeDataAdapterResult=c;class u{constructor(){this._data={}}get(e,t){var r;let s=this._data[e],o=null==s?void 0:s.stableID,i=null==(r=null==t?void 0:t.customIDs)?void 0:r.stableID;return i&&o&&i!==o?(n.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):s}add(e,t){let r=d(this._data,9);r&&delete this._data[r],this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function d(e,t){let r=Object.keys(e);return r.length<=t?null:r.reduce((t,r)=>{let s=e[t],n=e[r];return"object"==typeof s&&"object"==typeof n?n.receivedAt<s.receivedAt?r:t:n<s?r:t})}},"./node_modules/@statsig/client-core/src/Diagnostics.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;let r=new Map,s="start";function n(e,t,r,s){return Object.assign({key:r,action:t,step:s,timestamp:Date.now()},e)}function o(e,t){var s;let n=null!=(s=r.get(e))?s:[];n.push(t),r.set(e,n)}function i(e,t){if(t in e)return e[t]}t.Diagnostics={_getMarkers:e=>r.get(e),_markInitOverallStart:e=>{o(e,n({},s,"overall"))},_markInitOverallEnd:(e,t,r)=>{o(e,n({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:r},"end","overall"))},_markInitNetworkReqStart:(e,t)=>{o(e,n(t,s,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{o(e,n(t,"end","initialize","network_request"))},_markInitProcessStart:e=>{o(e,n({},s,"initialize","process"))},_markInitProcessEnd:(e,t)=>{o(e,n(t,"end","initialize","process"))},_clearMarkers:e=>{r.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:i(e,"code"),name:i(e,"name"),message:i(e,"message")}},_getDiagnosticsData(e,r,s,n){var o;return{success:(null==e?void 0:e.ok)===!0,statusCode:null==e?void 0:e.status,sdkRegion:null==(o=null==e?void 0:e.headers)?void 0:o.get("x-statsig-region"),isDelta:!0===s.includes('"is_delta":true')||void 0,attempt:r,error:t.Diagnostics._formatError(n)}},_enqueueDiagnosticsEvent(e,r,s,n){let o=t.Diagnostics._getMarkers(s);if(null==o||o.length<=0)return -1;let i=o[o.length-1].timestamp-o[0].timestamp;t.Diagnostics._clearMarkers(s);let a={eventName:"statsig::diagnostics",user:e,value:null,metadata:{context:"initialize",markers:o.slice(),statsigOptions:n},time:Date.now()};return r.enqueue(a),i}}},"./node_modules/@statsig/client-core/src/DnsTxtQuery.js":function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._fetchTxtRecords=void 0;let s=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),n=["i","e","d"];t._fetchTxtRecords=function(e){return r(this,void 0,void 0,function*(){let t=yield e("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:s});if(!t.ok){let e=Error("Failed to fetch TXT records from DNS");throw e.name="DnsTxtFetchError",e}return function(e){let t=e.findIndex((t,r)=>r<200&&"="===String.fromCharCode(t)&&n.includes(String.fromCharCode(e[r-1])));if(-1===t){let e=Error("Failed to parse TXT records from DNS");throw e.name="DnsTxtParseError",e}let r="";for(let s=t-1;s<e.length;s++)r+=String.fromCharCode(e[s]);return r.split(",")}(new Uint8Array((yield t.arrayBuffer())))})}},"./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ErrorBoundary.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.EXCEPTION_ENDPOINT=void 0;let n=r("./node_modules/@statsig/client-core/src/Log.js"),o=r("./node_modules/@statsig/client-core/src/SDKType.js"),i=r("./node_modules/@statsig/client-core/src/StatsigMetadata.js");t.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";let a="[Statsig] UnknownError";function l(e){return e instanceof Error?e:"string"==typeof e?Error(e):Error("An unknown error occurred.")}t.ErrorBoundary=class{constructor(e,t,r,s){this._sdkKey=e,this._options=t,this._emitter=r,this._lastSeenError=s,this._seen=new Set}wrap(e){try{(function(e){let t=new Set,r=Object.getPrototypeOf(e);for(;r&&r!==Object.prototype;)Object.getOwnPropertyNames(r).filter(e=>"function"==typeof(null==r?void 0:r[e])).forEach(e=>t.add(e)),r=Object.getPrototypeOf(r);return Array.from(t)})(e).forEach(t=>{let r=e[t];"$EB"in r||(e[t]=(...s)=>this._capture(t,()=>r.apply(e,s)),e[t].$EB=!0)})}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){let e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=l(e))}_capture(e,t){try{let r=t();if(r&&r instanceof Promise)return r.catch(t=>this._onError(e,t));return r}catch(t){return this._onError(e,t),null}}_onError(e,r){try{n.Log.warn(`Caught error in ${e}`,{error:r}),s(this,void 0,void 0,function*(){var s,n,c,u,d,h,p;let m=r||Error(a),f=m instanceof Error,g=f?m.name:"No Name",y=l(m);if(this._lastSeenError=y,this._seen.has(g))return;if(this._seen.add(g),null==(n=null==(s=this._options)?void 0:s.networkConfig)?void 0:n.preventAllNetworkTraffic){null==(c=this._emitter)||c.call(this,{name:"error",error:r,tag:e});return}let b=o.SDKType._get(this._sdkKey),v=i.StatsigMetadataProvider.get(),_=f?m.stack:function(e){try{return JSON.stringify(e)}catch(e){return a}}(m),w=Object.assign({tag:e,exception:g,info:_,statsigOptions:function(e){if(!e)return{};let t={};return Object.entries(e).forEach(([e,r])=>{switch(typeof r){case"number":case"bigint":case"boolean":t[String(e)]=r;break;case"string":r.length<50?t[String(e)]=r:t[String(e)]="set";break;case"object":"environment"===e?t.environment=r:"networkConfig"===e?t.networkConfig=r:t[String(e)]=null!=r?"set":"unset"}}),t}(this._options)},Object.assign(Object.assign({},v),{sdkType:b})),C=null!=(h=null==(d=null==(u=this._options)?void 0:u.networkConfig)?void 0:d.networkOverrideFunc)?h:fetch;yield C(t.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(b),"STATSIG-SDK-VERSION":String(v.sdkVersion),"Content-Type":"application/json"},body:JSON.stringify(w)}),null==(p=this._emitter)||p.call(this,{name:"error",error:r,tag:e})}).then(()=>{}).catch(()=>{})}catch(e){}}}},"./node_modules/@statsig/client-core/src/EvaluationOptions.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EvaluationTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EventLogger.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;let n=r("./node_modules/@statsig/client-core/src/CacheKey.js"),o=r("./node_modules/@statsig/client-core/src/Hashing.js"),i=r("./node_modules/@statsig/client-core/src/Log.js"),a=r("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=r("./node_modules/@statsig/client-core/src/SafeJs.js"),c=r("./node_modules/@statsig/client-core/src/StatsigEvent.js"),u=r("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),d=r("./node_modules/@statsig/client-core/src/StorageProvider.js"),h=r("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),p=r("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),m={},f="startup",g="gained_focus";class y{static _safeFlushAndForget(e){var t;null==(t=m[e])||t.flush().catch(()=>{})}static _safeRetryFailedLogs(e){var t;null==(t=m[e])||t._retryFailedLogs(g)}constructor(e,t,r,s){var n,o;this._sdkKey=e,this._emitter=t,this._network=r,this._options=s,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._loggingEnabled=null!=(n=null==s?void 0:s.loggingEnabled)?n:(null==s?void 0:s.disableLogging)===!0?u.LoggingEnabledOption.disabled:u.LoggingEnabledOption.browserOnly,(null==s?void 0:s.loggingEnabled)&&void 0!==s.disableLogging&&i.Log.warn("Detected both loggingEnabled and disableLogging options. loggingEnabled takes precedence - please remove disableLogging."),this._maxQueueSize=null!=(o=null==s?void 0:s.loggingBufferMaxSize)?o:100;let l=null==s?void 0:s.networkConfig;this._logEventUrlConfig=new h.UrlConfiguration(a.Endpoint._rgstr,null==l?void 0:l.logEventUrl,null==l?void 0:l.api,null==l?void 0:l.logEventFallbackUrls)}setLogEventCompressionMode(e){this._network.setLogEventCompressionMode(e)}setLoggingEnabled(e){this._loggingEnabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&y._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(e){var t;let r=null!=(t=this._nonExposedChecks[e])?t:0;this._nonExposedChecks[e]=r+1}reset(){this.flush().catch(()=>{}),this._lastExposureTimeMap={}}start(){var e;let t=(0,l._isServerEnv)();t&&(null==(e=this._options)?void 0:e.loggingEnabled)!=="always"||(m[this._sdkKey]=this,t||(0,p._subscribeToVisiblityChanged)(e=>{"background"===e?y._safeFlushAndForget(this._sdkKey):"foreground"===e&&y._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(f),this._startBackgroundFlushInterval())}stop(){return s(this,void 0,void 0,function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete m[this._sdkKey],yield this.flush()})}flush(){return s(this,void 0,void 0,function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;let e=this._queue;this._queue=[],yield this._sendEvents(e)})}_quickFlushIfNeeded(){!this._hasRunQuickFlush&&(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout(()=>y._safeFlushAndForget(this._sdkKey),200))}_shouldLogEvent(e){var t;if((null==(t=this._options)?void 0:t.loggingEnabled)!=="always"&&(0,l._isServerEnv)())return!1;if(!(0,c._isExposureEvent)(e))return!0;let r=e.user?e.user:{statsigEnvironment:void 0},s=(0,n._getUserStorageKey)(this._sdkKey,r),o=e.metadata?e.metadata:{},i=[e.eventName,s,o.gate,o.config,o.ruleID,o.allocatedExperiment,o.parameterName,String(o.isExplicitParameter),o.reason].join("|"),a=this._lastExposureTimeMap[i],u=Date.now();return(!a||!(u-a<6e5))&&(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[i]=u,!0)}_sendEvents(e){return s(this,void 0,void 0,function*(){var t,r;if("disabled"===this._loggingEnabled)return this._saveFailedLogsToStorage(e),!1;try{let s=(0,p._isUnloading)()&&this._network.isBeaconSupported()&&(null==(r=null==(t=this._options)?void 0:t.networkConfig)?void 0:r.networkOverrideFunc)==null;if(this._emitter({name:"pre_logs_flushed",events:e}),(s?this._sendEventsViaBeacon(e):yield this._sendEventsViaPost(e)).success)return this._emitter({name:"logs_flushed",events:e}),!0;return i.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(e),!1}catch(e){return i.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(e){return s(this,void 0,void 0,function*(){var t;let r=yield this._network.post(this._getRequestData(e)),s=null!=(t=null==r?void 0:r.code)?t:-1;return{success:s>=200&&s<300}})}_sendEventsViaBeacon(e){return{success:this._network.beacon(this._getRequestData(e))}}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[a.NetworkParam.EventCount]:String(e.length)},credentials:"same-origin"}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();let t=this._getStorageKey();try{(0,d._setObjectInStorage)(t,e)}catch(e){i.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(e){let t=this._getStorageKey();s(this,void 0,void 0,function*(){d.Storage.isReady()||(yield d.Storage.isReadyResolver());let r=(0,d._getObjectFromStorage)(t);r&&(e===f&&d.Storage.removeItem(t),(yield this._sendEvents(r))&&e===g&&d.Storage.removeItem(t))}).catch(()=>{i.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return`statsig.failed_logs.${(0,o._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);let t={},r=this._getCurrentPageUrl();r&&(t.statsigMetadata={currentPage:r});let s=Object.assign(Object.assign({},e),t);i.Log.debug("Enqueued Event:",s),this._queue.push(s)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if((null==(e=this._options)?void 0:e.includeCurrentPageUrlWithEvents)!==!1)return(0,l._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;let r=setInterval(()=>{let e=m[this._sdkKey];e&&e._flushIntervalId===r?y._safeFlushAndForget(this._sdkKey):clearInterval(r)},null!=(t=null==(e=this._options)?void 0:e.loggingIntervalMs)?t:1e4);this._flushIntervalId=r}}t.EventLogger=y},"./node_modules/@statsig/client-core/src/Hashing.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getSortedObject=t._DJB2Object=t._DJB2=void 0;let s=r("./node_modules/@statsig/client-core/src/TypingUtils.js");t._DJB2=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return String(t>>>0)},t._DJB2Object=(e,r)=>(0,t._DJB2)(JSON.stringify((0,t._getSortedObject)(e,r))),t._getSortedObject=(e,r)=>{if(null==e)return null;let n=Object.keys(e).sort(),o={};return n.forEach(n=>{let i=e[n];if(0===r||"object"!==(0,s._typeOf)(i)){o[n]=i;return}o[n]=(0,t._getSortedObject)(i,null!=r?r-1:r)}),o}},"./node_modules/@statsig/client-core/src/InitializeResponse.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/Log.js":(e,t)=>{"use strict";function r(e){return e.unshift("[Statsig]"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0,t.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class s{static info(...e){s.level>=t.LogLevel.Info&&console.info("  INFO ",...r(e))}static debug(...e){s.level>=t.LogLevel.Debug&&console.debug(" DEBUG ",...r(e))}static warn(...e){s.level>=t.LogLevel.Warn&&console.warn("  WARN ",...r(e))}static error(...e){s.level>=t.LogLevel.Error&&console.error(" ERROR ",...r(e))}}t.Log=s,s.level=t.LogLevel.Warn},"./node_modules/@statsig/client-core/src/MemoKey.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMemoKey=t.MemoPrefix=void 0,t.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_configList:"cl",_layer:"l",_paramStore:"p"};let r=new Set([]),s=new Set(["userPersistedValues"]);t.createMemoKey=function(e,t,n){let o=`${e}|${t}`;if(!n)return o;for(let e of Object.keys(n)){if(s.has(e))return;r.has(e)?o+=`|${e}=true`:o+=`|${e}=${n[e]}`}return o}},"./node_modules/@statsig/client-core/src/NetworkConfig.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=t.Endpoint=void 0,t.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},t.NetworkDefault={[t.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[t.Endpoint._initialize]:"https://featureassets.org/v1",[t.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},"./node_modules/@statsig/client-core/src/NetworkCore.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");let n=r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),o=r("./node_modules/@statsig/client-core/src/Diagnostics.js"),i=r("./node_modules/@statsig/client-core/src/Log.js"),a=r("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=r("./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js"),c=r("./node_modules/@statsig/client-core/src/SDKFlags.js"),u=r("./node_modules/@statsig/client-core/src/SDKType.js"),d=r("./node_modules/@statsig/client-core/src/SafeJs.js"),h=r("./node_modules/@statsig/client-core/src/SessionID.js"),p=r("./node_modules/@statsig/client-core/src/StableID.js"),m=r("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),f=r("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),g=r("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),y=r("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),b=new Set([408,500,502,503,504,522,524,599]);t.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new l.NetworkFallbackResolver(this._options),this.setLogEventCompressionMode(this._getLogEventCompressionMode(e))}setLogEventCompressionMode(e){this._options.logEventCompressionMode=e}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){let e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){if(!v(e))return!1;let t=this._getInternalRequestArgs("POST",e),r=this._getPopulatedURL(t),s=navigator;return s.sendBeacon.bind(s)(r,t.body)}post(e){return s(this,void 0,void 0,function*(){let t=this._getInternalRequestArgs("POST",e);return this._tryEncodeBody(t),yield this._tryToCompressBody(t),this._sendRequest(t)})}get(e){let t=this._getInternalRequestArgs("GET",e);return this._sendRequest(t)}_sendRequest(e){return s(this,void 0,void 0,function*(){var t,r,n,l,c,u,d,h,p;if(!v(e)||this._netConfig.preventAllNetworkTraffic)return null;let{method:f,body:g,retries:_,attempt:C}=e,O=e.urlConfig.endpoint;if(this._isRateLimited(O))return i.Log.warn(`Request to ${O} was blocked because you are making requests too frequently.`),null;let E=null!=C?C:1,k="undefined"!=typeof AbortController?new AbortController:null,S=setTimeout(()=>{null==k||k.abort(`Timeout of ${this._timeout}ms expired.`)},this._timeout),A=this._getPopulatedURL(e),I=null,j=(0,y._isUnloading)();try{let r={method:f,body:g,headers:Object.assign({},e.headers),signal:null==k?void 0:k.signal,priority:e.priority,keepalive:j};c=e,u=E,c.urlConfig.endpoint===a.Endpoint._initialize&&o.Diagnostics._markInitNetworkReqStart(c.sdkKey,{attempt:u});let s=this._leakyBucket[O];s&&(s.lastRequestTime=Date.now(),this._leakyBucket[O]=s);let n=null!=(t=this._netConfig.networkOverrideFunc)?t:fetch;if(I=yield n(A,r),clearTimeout(S),!I.ok){let e=yield I.text().catch(()=>"No Text"),t=Error(`NetworkError: ${A} ${e}`);throw t.name="NetworkError",t}let i=yield I.text();return w(e,I,E,i),this._fallbackResolver.tryBumpExpiryTime(e.sdkKey,e.urlConfig),{body:i,code:I.status}}catch(a){let t=(d=k,h=a,(null==d?void 0:d.signal.aborted)&&"string"==typeof d.signal.reason?d.signal.reason:"string"==typeof h?h:h instanceof Error?`${h.name}: ${h.message}`:"Unknown Error"),o=(null==(p=k)?void 0:p.signal.aborted)&&"string"==typeof p.signal.reason&&p.signal.reason.includes("Timeout")||!1;if(w(e,I,E,"",a),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(e.sdkKey,e.urlConfig,t,o))&&(e.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(e.sdkKey,e.urlConfig)),!_||E>_||!b.has(null!=(r=null==I?void 0:I.status)?r:500)){null==(n=this._emitter)||n.call(this,{name:"error",error:a,tag:m.ErrorTag.NetworkError,requestArgs:e});let r=`A networking error occurred during ${f} request to ${A}.`;return i.Log.error(r,t,a),null==(l=this._errorBoundary)||l.attachErrorIfNoneExists(r),null}return yield function(e){return s(this,void 0,void 0,function*(){yield new Promise(t=>setTimeout(t,Math.min(e*e*500,3e4)))})}(E),this._sendRequest(Object.assign(Object.assign({},e),{retries:_,attempt:E+1}))}})}_getLogEventCompressionMode(e){let t=null==e?void 0:e.logEventCompressionMode;return t||(null==e?void 0:e.disableCompression)!==!0||(t=g.LogEventCompressionMode.Disabled),t||(t=g.LogEventCompressionMode.Enabled),t}_isRateLimited(e){var t;let r=Date.now(),s=null!=(t=this._leakyBucket[e])?t:{count:0,lastRequestTime:r},n=Math.floor((r-s.lastRequestTime)*.05);return s.count=Math.max(0,s.count-n),s.count>=50||(s.count+=1,s.lastRequestTime=r,this._leakyBucket[e]=s,!1)}_getPopulatedURL(e){var t;let r=null!=(t=e.fallbackUrl)?t:e.urlConfig.getUrl();(e.urlConfig.endpoint===a.Endpoint._initialize||e.urlConfig.endpoint===a.Endpoint._download_config_specs)&&(this._lastUsedInitUrl=r);let s=Object.assign({[a.NetworkParam.SdkKey]:e.sdkKey,[a.NetworkParam.SdkType]:u.SDKType._get(e.sdkKey),[a.NetworkParam.SdkVersion]:f.SDK_VERSION,[a.NetworkParam.Time]:String(Date.now()),[a.NetworkParam.SessionID]:h.SessionID.get(e.sdkKey)},e.params),n=Object.keys(s).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(s[e])}`).join("&");return`${r}${n?`?${n}`:""}`}_tryEncodeBody(e){var t;let r=(0,d._getWindowSafe)(),s=e.body;if(e.isStatsigEncodable&&!this._options.disableStatsigEncoding&&"string"==typeof s&&null==(0,n._getStatsigGlobalFlag)("no-encode")&&(null==r?void 0:r.btoa))try{e.body=r.btoa(s).split("").reverse().join(""),e.params=Object.assign(Object.assign({},null!=(t=e.params)?t:{}),{[a.NetworkParam.StatsigEncoded]:"1"})}catch(t){i.Log.warn(`Request encoding failed for ${e.urlConfig.getUrl()}`,t)}}_tryToCompressBody(e){return s(this,void 0,void 0,function*(){var t;let r=e.body;if("string"==typeof r&&function(e,t){if(!e.isCompressable||null!=(0,n._getStatsigGlobalFlag)("no-compress")||"undefined"==typeof CompressionStream||"undefined"==typeof TextEncoder)return!1;let r=null!=e.urlConfig.customUrl||null!=e.urlConfig.fallbackUrls,s=!0===c.SDKFlags.get(e.sdkKey,"enable_log_event_compression");switch(t.logEventCompressionMode){case g.LogEventCompressionMode.Disabled:return!1;case g.LogEventCompressionMode.Enabled:if(r&&!s)return!1;return!0;case g.LogEventCompressionMode.Forced:return!0;default:return!1}}(e,this._options))try{let s,n=new TextEncoder().encode(r),o=new CompressionStream("gzip"),l=o.writable.getWriter();l.write(n).catch(i.Log.error),l.close().catch(i.Log.error);let c=o.readable.getReader(),u=[];for(;!(s=yield c.read()).done;)u.push(s.value);let d=u.reduce((e,t)=>e+t.length,0),h=new Uint8Array(d),p=0;for(let e of u)h.set(e,p),p+=e.length;e.body=h,e.params=Object.assign(Object.assign({},null!=(t=e.params)?t:{}),{[a.NetworkParam.IsGzipped]:"1"})}catch(t){i.Log.warn(`Request compression failed for ${e.urlConfig.getUrl()}`,t)}})}_getInternalRequestArgs(e,t){let r=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig),s=Object.assign(Object.assign({},t),{method:e,fallbackUrl:r});return"data"in t&&_(s,t.data),s}};let v=e=>!!e.sdkKey||(i.Log.warn("Unable to make request without an SDK key"),!1),_=(e,t)=>{let{sdkKey:r,fallbackUrl:s}=e,n=p.StableID.get(r),o=h.SessionID.get(r),i=u.SDKType._get(r);e.body=JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},f.StatsigMetadataProvider.get()),{stableID:n,sessionID:o,sdkType:i,fallbackUrl:s})}))};function w(e,t,r,s,n){e.urlConfig.endpoint===a.Endpoint._initialize&&o.Diagnostics._markInitNetworkReqEnd(e.sdkKey,o.Diagnostics._getDiagnosticsData(t,r,s,n))}},"./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._isDomainFailure=t.NetworkFallbackResolver=void 0;let n=r("./node_modules/@statsig/client-core/src/DnsTxtQuery.js"),o=r("./node_modules/@statsig/client-core/src/Hashing.js"),i=r("./node_modules/@statsig/client-core/src/Log.js"),a=r("./node_modules/@statsig/client-core/src/StorageProvider.js");function l(e,t){var r;let s=null!=(r=null==e?void 0:e.toLowerCase())?r:"";return t||s.includes("uncaught exception")||s.includes("failed to fetch")||s.includes("networkerror when attempting to fetch resource")}function c(e){return`statsig.network_fallback.${(0,o._DJB2)(e)}`}function u(e,t){let r=c(e);if(!t||0===Object.keys(t).length)return void a.Storage.removeItem(r);a.Storage.setItem(r,JSON.stringify(t))}t.NetworkFallbackResolver=class{constructor(e){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null==(t=e.networkConfig)?void 0:t.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var r;let s=null==(r=this._fallbackInfo)?void 0:r[t.endpoint];s&&(s.expiryTime=Date.now()+6048e5,u(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:s})))}getActiveFallbackUrl(e,t){var r,s;if(null!=t.customUrl&&null!=t.fallbackUrls)return null;let n=this._fallbackInfo;null==n&&(n=null!=(r=function(e){let t=c(e),r=a.Storage.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return i.Log.error("Failed to parse FallbackInfo"),null}}(e))?r:{},this._fallbackInfo=n);let o=n[t.endpoint];return!o||Date.now()>(null!=(s=o.expiryTime)?s:0)||t.getChecksum()!==o.urlConfigChecksum?(delete n[t.endpoint],this._fallbackInfo=n,u(e,this._fallbackInfo),null):o.url?o.url:null}tryFetchUpdatedFallbackInfo(e,t,r,n){return s(this,void 0,void 0,function*(){var s,o;try{if(!l(r,n))return!1;let o=null==t.customUrl&&null==t.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(t):t.fallbackUrls,i=this._pickNewFallbackUrl(null==(s=this._fallbackInfo)?void 0:s[t.endpoint],o);if(!i)return!1;return this._updateFallbackInfoWithNewUrl(e,t,i),!0}catch(e){return null==(o=this._errorBoundary)||o.logError("tryFetchUpdatedFallbackInfo",e),!1}})}_updateFallbackInfoWithNewUrl(e,t,r){var s,n,o;let i={urlConfigChecksum:t.getChecksum(),url:r,expiryTime:Date.now()+6048e5,previous:[]},a=t.endpoint,l=null==(s=this._fallbackInfo)?void 0:s[a];l&&i.previous.push(...l.previous),i.previous.length>10&&(i.previous=[]);let c=null==(o=null==(n=this._fallbackInfo)?void 0:n[a])?void 0:o.url;null!=c&&i.previous.push(c),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[a]:i}),u(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(e){return s(this,void 0,void 0,function*(){var t;let r=this._dnsQueryCooldowns[e.endpoint];if(r&&Date.now()<r)return null;this._dnsQueryCooldowns[e.endpoint]=Date.now()+144e5;let s=[],o=yield(0,n._fetchTxtRecords)(null!=(t=this._networkOverrideFunc)?t:fetch),i=function(e){try{return new URL(e).pathname}catch(e){return null}}(e.defaultUrl);for(let t of o){if(!t.startsWith(e.endpointDnsKey+"="))continue;let r=t.split("=");if(r.length>1){let e=r[1];e.endsWith("/")&&(e=e.slice(0,-1)),s.push(`https://${e}${i}`)}}return s})}_pickNewFallbackUrl(e,t){var r;if(null==t)return null;let s=new Set(null!=(r=null==e?void 0:e.previous)?r:[]),n=null==e?void 0:e.url,o=null;for(let e of t){let t=e.endsWith("/")?e.slice(0,-1):e;if(!s.has(e)&&t!==n){o=t;break}}return o}},t._isDomainFailure=l},"./node_modules/@statsig/client-core/src/OverrideAdapter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ParamStoreTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/SDKFlags.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKFlags=void 0;let r={};t.SDKFlags={setFlags:(e,t)=>{r[e]=t},get:(e,t)=>{var s,n;return null!=(n=null==(s=r[e])?void 0:s[t])&&n}}},"./node_modules/@statsig/client-core/src/SDKType.js":(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;let s={};t.SDKType={_get:e=>{var t;return(null!=(t=s[e])?t:"js-mono")+(null!=r?r:"")},_setClientType(e,t){s[e]=t},_setBindingType(e){r&&"-react"!==r||(r="-"+e)}}},"./node_modules/@statsig/client-core/src/SafeJs.js":(e,t,r)=>{"use strict";var s=r("./node_modules/process/browser.js");Object.defineProperty(t,"__esModule",{value:!0}),t._getUnloadEvent=t._getCurrentPageUrlSafe=t._addDocumentEventListenerSafe=t._addWindowEventListenerSafe=t._isServerEnv=t._getDocumentSafe=t._getWindowSafe=void 0,t._getWindowSafe=()=>"undefined"!=typeof window?window:null,t._getDocumentSafe=()=>{var e;let r=(0,t._getWindowSafe)();return null!=(e=null==r?void 0:r.document)?e:null},t._isServerEnv=()=>{if(null!==(0,t._getDocumentSafe)())return!1;let e=void 0!==s&&null!=s.versions&&null!=s.versions.node;return"string"==typeof EdgeRuntime||e},t._addWindowEventListenerSafe=(e,r)=>{let s=(0,t._getWindowSafe)();"function"==typeof(null==s?void 0:s.addEventListener)&&s.addEventListener(e,r)},t._addDocumentEventListenerSafe=(e,r)=>{let s=(0,t._getDocumentSafe)();"function"==typeof(null==s?void 0:s.addEventListener)&&s.addEventListener(e,r)},t._getCurrentPageUrlSafe=()=>{var e;try{return null==(e=(0,t._getWindowSafe)())?void 0:e.location.href.split(/[?#]/)[0]}catch(e){return}},t._getUnloadEvent=()=>{let e=(0,t._getWindowSafe)();return e&&"onpagehide"in e?"pagehide":"beforeunload"}},"./node_modules/@statsig/client-core/src/SessionID.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;let s=r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),n=r("./node_modules/@statsig/client-core/src/CacheKey.js"),o=r("./node_modules/@statsig/client-core/src/Log.js"),i=r("./node_modules/@statsig/client-core/src/StorageProvider.js"),a=r("./node_modules/@statsig/client-core/src/UUID.js"),l={};function c(e,t){return setTimeout(()=>{var t;let r=null==(t=(0,s._getStatsigGlobal)())?void 0:t.instance(e);r&&r.$emt({name:"session_expired"})},t)}function u(e){return`statsig.session_id.${(0,n._getStorageKey)(e)}`}t.SessionID={get:e=>t.StatsigSession.get(e).data.sessionID},t.StatsigSession={get:e=>(null==l[e]&&(l[e]=function(e){let t=function(e){let t=u(e);return(0,i._getObjectFromStorage)(t)}(e),r=Date.now();return t||(t={sessionID:(0,a.getUUID)(),startTime:r,lastUpdate:r}),{data:t,sdkKey:e}}(e)),function(e){let t=Date.now(),r=e.data,s=e.sdkKey;if(function({lastUpdate:e}){return Date.now()-e>18e5}(r)||function({startTime:e}){return Date.now()-e>144e5}(r)){r.sessionID=(0,a.getUUID)(),r.startTime=t;let e=null==__STATSIG__?void 0:__STATSIG__.instance(s);e&&e.$emt({name:"session_expired"})}r.lastUpdate=t,function(e,t){let r=u(t);try{(0,i._setObjectInStorage)(r,e)}catch(e){o.Log.warn("Failed to save SessionID")}}(r,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);let n=t-r.startTime;return e.idleTimeoutID=c(s,18e5),e.ageTimeoutID=c(s,144e5-n),e}(l[e])),overrideInitialSessionID:(e,t)=>{l[t]=function(e,t){let r=Date.now();return{data:{sessionID:e,startTime:r,lastUpdate:r},sdkKey:t}}(e,t)}}},"./node_modules/@statsig/client-core/src/SizeOf.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._fastApproxSizeOf=void 0,t._fastApproxSizeOf=(e,r)=>{let s=0,n=Object.keys(e);for(let o=0;o<n.length;o++){let i=n[o],a=e[i];if(s+=i.length,"object"==typeof a&&null!==a?s+=(0,t._fastApproxSizeOf)(a,r)+2:s+=String(a).length+1,s>=r)break}return s}},"./node_modules/@statsig/client-core/src/StableID.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StableID=void 0;let s=r("./node_modules/@statsig/client-core/src/CacheKey.js"),n=r("./node_modules/@statsig/client-core/src/Log.js"),o=r("./node_modules/@statsig/client-core/src/SafeJs.js"),i=r("./node_modules/@statsig/client-core/src/StorageProvider.js"),a=r("./node_modules/@statsig/client-core/src/UUID.js"),l={},c={},u={};function d(e){return`statsig.stable_id.${(0,s._getStorageKey)(e)}`}function h(e,t){let r=d(t);try{(0,i._setObjectInStorage)(r,e)}catch(e){n.Log.warn("Failed to save StableID to storage")}}function p(e,t){if(!c[t]||!document)return;let r=new Date;r.setFullYear(r.getFullYear()+1),document.cookie=`${m(t)}=${encodeURIComponent(e)}; expires=${r.toUTCString()}; path=/`}function m(e){return`statsig.stable_id.${(0,s._getStorageKey)(e)}`}t.StableID={cookiesEnabled:!1,randomID:Math.random().toString(36),get:e=>{if(u[e])return null;if(null!=l[e])return l[e];let t=null;return null!=(t=function(e){if(!c[e]||null==(0,o._getDocumentSafe)())return null;for(let t of document.cookie.split(";")){let[r,s]=t.trim().split("=");if(r===m(e))return decodeURIComponent(s)}return null}(e))?(l[e]=t,h(t,e)):(null==(t=function(e){let t=d(e);return(0,i._getObjectFromStorage)(t)}(e))&&(t=(0,a.getUUID)()),h(t,e),p(t,e),l[e]=t),t},setOverride:(e,t)=>{l[t]=e,h(e,t),p(e,t)},_setCookiesEnabled:(e,t)=>{c[e]=t},_setDisabled:(e,t)=>{u[e]=t}}},"./node_modules/@statsig/client-core/src/StatsigClientBase.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");let n=r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),o=r("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),i=r("./node_modules/@statsig/client-core/src/EventLogger.js"),a=r("./node_modules/@statsig/client-core/src/Log.js"),l=r("./node_modules/@statsig/client-core/src/MemoKey.js"),c=r("./node_modules/@statsig/client-core/src/SafeJs.js"),u=r("./node_modules/@statsig/client-core/src/SessionID.js"),d=r("./node_modules/@statsig/client-core/src/StableID.js"),h=r("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),p=r("./node_modules/@statsig/client-core/src/StorageProvider.js");t.StatsigClientBase=class{constructor(e,t,r,s){var l,h,m,f;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};let g=this.$emt.bind(this);(null==s?void 0:s.logLevel)!=null&&(a.Log.level=s.logLevel),(null==s?void 0:s.disableStorage)&&p.Storage._setDisabled(!0),(null==s?void 0:s.initialSessionID)&&u.StatsigSession.overrideInitialSessionID(s.initialSessionID,e),(null==s?void 0:s.storageProvider)&&p.Storage._setProvider(s.storageProvider),(null==s?void 0:s.enableCookies)&&d.StableID._setCookiesEnabled(e,s.enableCookies),(null==s?void 0:s.disableStableID)&&d.StableID._setDisabled(e,!0),this._sdkKey=e,this._options=null!=s?s:{},this._memoCache={},this.overrideAdapter=null!=(l=null==s?void 0:s.overrideAdapter)?l:null,this._logger=new i.EventLogger(e,g,r,s),this._errorBoundary=new o.ErrorBoundary(e,s,g),this._errorBoundary.wrap(this),this._errorBoundary.wrap(t),this._errorBoundary.wrap(this._logger),r.setErrorBoundary(this._errorBoundary),this.dataAdapter=t,this.dataAdapter.attach(e,s,r),this.storageProvider=p.Storage,null==(f=null==(m=null==(h=this.overrideAdapter)?void 0:h.loadFromStorage)?void 0:m.call(h))||f.catch(e=>this._errorBoundary.logError("OA::loadFromStorage",e)),this._primeReadyRipcord(),function(e,t){var r;if((0,c._isServerEnv)())return;let s=(0,n._getStatsigGlobal)(),o=null!=(r=s.instances)?r:{};null!=o[e]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),o[e]=t,s.firstInstance||(s.firstInstance=t),s.instances=o,__STATSIG__=s}(e,this)}updateRuntimeOptions(e){e.loggingEnabled?(this._options.loggingEnabled=e.loggingEnabled,this._logger.setLoggingEnabled(e.loggingEnabled)):null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingEnabled(e.disableLogging?"disabled":"browser-only")),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,p.Storage._setDisabled(e.disableStorage)),null!=e.enableCookies&&(this._options.enableCookies=e.enableCookies,d.StableID._setCookiesEnabled(this._sdkKey,e.enableCookies)),e.logEventCompressionMode?this._logger.setLogEventCompressionMode(e.logEventCompressionMode):e.disableCompression&&this._logger.setLogEventCompressionMode(h.LogEventCompressionMode.Disabled)}flush(){return this._logger.flush()}shutdown(){return s(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){let r=this._listeners[e].indexOf(t);-1!==r&&this._listeners[e].splice(r,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;let r=t=>{try{t(e)}catch(r){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,r);a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach(e=>r(e)),null==(t=this._listeners["*"])||t.forEach(r)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,r){if((null==r?void 0:r.disableExposureLog)===!0)return void this._logger.incrementNonExposureCount(e);this._logger.enqueue(t)}_memoize(e,t){return(r,s)=>{if(this._options.disableEvaluationMemoization)return t(r,s);let n=(0,l.createMemoKey)(e,r,s);return n?(n in this._memoCache||(Object.keys(this._memoCache).length>=3e3&&(this._memoCache={}),this._memoCache[n]=t(r,s)),this._memoCache[n]):t(r,s)}}}},"./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,t.ErrorTag={NetworkError:"NetworkError"}},"./node_modules/@statsig/client-core/src/StatsigDataAdapter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},"./node_modules/@statsig/client-core/src/StatsigEvent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._createLayerParameterExposure=t._createConfigExposure=t._mapExposures=t._createGateExposure=t._isExposureEvent=void 0;let r="statsig::config_exposure",s="statsig::gate_exposure",n="statsig::layer_exposure",o=(e,t,r,s,n)=>(r.bootstrapMetadata&&(s.bootstrapMetadata=r.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:a(r,s),secondaryExposures:n,time:Date.now()});function i(e,t){return e.map(e=>"string"==typeof e?(null!=t?t:{})[e]:e).filter(e=>null!=e)}t._isExposureEvent=({eventName:e})=>e===s||e===r||e===n,t._createGateExposure=(e,t,r)=>{var n,a,l;let c={gate:t.name,gateValue:String(t.value),ruleID:t.ruleID};return(null==(n=t.__evaluation)?void 0:n.version)!=null&&(c.configVersion=t.__evaluation.version),o(s,e,t.details,c,i(null!=(l=null==(a=t.__evaluation)?void 0:a.secondary_exposures)?l:[],r))},t._mapExposures=i,t._createConfigExposure=(e,t,s)=>{var n,a,l,c;let u={config:t.name,ruleID:t.ruleID};return(null==(n=t.__evaluation)?void 0:n.version)!=null&&(u.configVersion=t.__evaluation.version),(null==(a=t.__evaluation)?void 0:a.passed)!=null&&(u.rulePassed=String(t.__evaluation.passed)),o(r,e,t.details,u,i(null!=(c=null==(l=t.__evaluation)?void 0:l.secondary_exposures)?c:[],s))},t._createLayerParameterExposure=(e,t,r,s)=>{var a,l,c,u,d,h,p;let m=t.__evaluation,f=(null==(a=null==m?void 0:m.explicit_parameters)?void 0:a.includes(r))===!0,g="",y=null!=(l=null==m?void 0:m.undelegated_secondary_exposures)?l:[];f&&(g=null!=(c=m.allocated_experiment_name)?c:"",y=null!=(u=m.secondary_exposures)?u:[]);let b=null==(d=t.__evaluation)?void 0:d.parameter_rule_ids,v={config:t.name,parameterName:r,ruleID:null!=(h=null==b?void 0:b[r])?h:t.ruleID,allocatedExperiment:g,isExplicitParameter:String(f)};return(null==(p=t.__evaluation)?void 0:p.version)!=null&&(v.configVersion=t.__evaluation.version),o(n,e,t.details,v,i(y,s))};let a=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},"./node_modules/@statsig/client-core/src/StatsigMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.20.2";let r={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>r,add:e=>{r=Object.assign(Object.assign({},r),e)}}},"./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingEnabledOption=t.LogEventCompressionMode=void 0,t.LogEventCompressionMode={Disabled:"d",Enabled:"e",Forced:"f"},t.LoggingEnabledOption={disabled:"disabled",browserOnly:"browser-only",always:"always"}},"./node_modules/@statsig/client-core/src/StatsigPlugin.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigTypeFactories.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeTypedGet=t._mergeOverride=t._makeLayer=t._makeExperiment=t._makeDynamicConfig=t._makeFeatureGate=void 0;let s=r("./node_modules/@statsig/client-core/src/Log.js"),n=r("./node_modules/@statsig/client-core/src/TypingUtils.js");function o(e,t,r,s){var n;return{name:e,details:t,ruleID:null!=(n=null==r?void 0:r.rule_id)?n:"",__evaluation:r,value:s}}function i(e,t,r){var s;let n=null!=(s=null==r?void 0:r.value)?s:{};return Object.assign(Object.assign({},o(e,t,r,n)),{get:a(e,null==r?void 0:r.value)})}function a(e,t,r){return(o,i)=>{var a;let l=null!=(a=null==t?void 0:t[o])?a:null;return null==l?null!=i?i:null:null==i||(0,n._isTypeMatch)(l,i)?(null==r||r(o),l):(s.Log.warn(`Parameter type mismatch. '${e}.${o}' was found to be type '${typeof l}' but fallback/return type is '${typeof i}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=i?i:null)}}t._makeFeatureGate=function(e,t,r){var s;return Object.assign(Object.assign({},o(e,t,r,(null==r?void 0:r.value)===!0)),{idType:null!=(s=null==r?void 0:r.id_type)?s:null})},t._makeDynamicConfig=i,t._makeExperiment=function(e,t,r){var s;return Object.assign(Object.assign({},i(e,t,r)),{groupName:null!=(s=null==r?void 0:r.group_name)?s:null})},t._makeLayer=function(e,t,r,s){var n,i;return Object.assign(Object.assign({},o(e,t,r,void 0)),{get:a(e,null==r?void 0:r.value,s),groupName:null!=(n=null==r?void 0:r.group_name)?n:null,__value:null!=(i=null==r?void 0:r.value)?i:{}})},t._mergeOverride=function(e,t,r,s){return Object.assign(Object.assign(Object.assign({},e),t),{get:a(e.name,r,s)})},t._makeTypedGet=a},"./node_modules/@statsig/client-core/src/StatsigTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_DETAIL_ERROR_MESSAGES=t.createUpdateDetails=void 0,t.createUpdateDetails=(e,t,r,s,n,o)=>({duration:r,source:t,success:e,error:s,sourceUrl:n,warnings:o}),t.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}},"./node_modules/@statsig/client-core/src/StatsigUser.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getFullUserHash=t._normalizeUser=void 0;let s=r("./node_modules/@statsig/client-core/src/Hashing.js"),n=r("./node_modules/@statsig/client-core/src/Log.js");t._normalizeUser=function(e,t,r){try{let s=JSON.parse(JSON.stringify(e));return null!=t&&null!=t.environment?s.statsigEnvironment=t.environment:null!=r&&(s.statsigEnvironment={tier:r}),s}catch(e){return n.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},t._getFullUserHash=function(e){return e?(0,s._DJB2Object)(e):null}},"./node_modules/@statsig/client-core/src/StorageProvider.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._setObjectInStorage=t._getObjectFromStorage=t.Storage=void 0;let s=r("./node_modules/@statsig/client-core/src/Log.js"),n=r("./node_modules/@statsig/client-core/src/SafeJs.js"),o={},i={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>o[e]?o[e]:null,setItem:(e,t)=>{o[e]=t},removeItem:e=>{delete o[e]},getAllKeys:()=>Object.keys(o)},a=null;try{let e=(0,n._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(a={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,r)=>e.localStorage.setItem(t,r),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){s.Log.warn("Failed to setup localStorageProvider.")}let l=null!=a?a:i,c=l;function u(e){try{return e()}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return t.Storage._setProvider(i),null;if(e instanceof Error&&"QuotaExceededError"===e.name){let r=t.Storage.getAllKeys().filter(e=>e.startsWith("statsig."));e.message=`${e.message}. Statsig Keys: ${r.length}`}throw e}}t.Storage={isReady:()=>c.isReady(),isReadyResolver:()=>c.isReadyResolver(),getProviderName:()=>c.getProviderName(),getItem:e=>u(()=>c.getItem(e)),setItem:(e,t)=>u(()=>c.setItem(e,t)),removeItem:e=>c.removeItem(e),getAllKeys:()=>c.getAllKeys(),_setProvider:e=>{l=e,c=e},_setDisabled:e=>{c=e?i:l}},t._getObjectFromStorage=function(e){let r=t.Storage.getItem(e);return JSON.parse(null!=r?r:"null")},t._setObjectInStorage=function(e,r){t.Storage.setItem(e,JSON.stringify(r))}},"./node_modules/@statsig/client-core/src/TypedJsonParse.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._typedJsonParse=void 0;let s=r("./node_modules/@statsig/client-core/src/Log.js");t._typedJsonParse=function(e,t,r){try{let r=JSON.parse(e);if(r&&"object"==typeof r&&t in r)return r}catch(e){}return s.Log.error(`Failed to parse ${r}`),null}},"./node_modules/@statsig/client-core/src/TypingUtils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._isTypeMatch=t._typeOf=void 0,t._typeOf=function(e){return Array.isArray(e)?"array":typeof e},t._isTypeMatch=function(e,t){let r=e=>Array.isArray(e)?"array":null===e?"null":typeof e;return r(e)===r(t)}},"./node_modules/@statsig/client-core/src/UUID.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Date().getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0,r="89ab"[Math.floor(4*Math.random())];return`xxxxxxxx-xxxx-4xxx-${r}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,r=>{let s=16*Math.random();return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(t+s)%16|0,t=Math.floor(t/16)),("x"===r?s:7&s|8).toString(16)})}},"./node_modules/@statsig/client-core/src/UrlConfiguration.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlConfiguration=void 0;let s=r("./node_modules/@statsig/client-core/src/Hashing.js"),n=r("./node_modules/@statsig/client-core/src/NetworkConfig.js"),o={[n.Endpoint._initialize]:"i",[n.Endpoint._rgstr]:"e",[n.Endpoint._download_config_specs]:"d"};t.UrlConfiguration=class{constructor(e,t,r,s){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=o[e],t&&(this.customUrl=t),!t&&r&&(this.customUrl=r.endsWith("/")?`${r}${e}`:`${r}/${e}`),s&&(this.fallbackUrls=s);let i=n.NetworkDefault[e];this.defaultUrl=`${i}/${e}`}getUrl(){var e;return null!=(e=this.customUrl)?e:this.defaultUrl}getChecksum(){var e;let t=(null!=(e=this.fallbackUrls)?e:[]).sort().join(",");return(0,s._DJB2)(this.customUrl+t)}}},"./node_modules/@statsig/client-core/src/VisibilityObserving.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;let s=r("./node_modules/@statsig/client-core/src/SafeJs.js"),n="foreground",o="background",i=[],a=n,l=!1;t._isCurrentlyVisible=()=>a===n,t._isUnloading=()=>l,t._subscribeToVisiblityChanged=e=>{i.unshift(e)},t._notifyVisibilityChanged=e=>{e!==a&&(a=e,i.forEach(t=>t(e)))},(0,s._addWindowEventListenerSafe)("focus",()=>{l=!1,(0,t._notifyVisibilityChanged)(n)}),(0,s._addWindowEventListenerSafe)("blur",()=>(0,t._notifyVisibilityChanged)(o)),(0,s._addDocumentEventListenerSafe)("visibilitychange",()=>{(0,t._notifyVisibilityChanged)("visible"===document.visibilityState?n:o)}),(0,s._addWindowEventListenerSafe)((0,s._getUnloadEvent)(),()=>{l=!0,(0,t._notifyVisibilityChanged)(o)})},"./node_modules/@statsig/client-core/src/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Log=t.EventLogger=t.Diagnostics=void 0,r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");let o=r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),i=r("./node_modules/@statsig/client-core/src/Diagnostics.js");Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return i.Diagnostics}});let a=r("./node_modules/@statsig/client-core/src/EventLogger.js");Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return a.EventLogger}});let l=r("./node_modules/@statsig/client-core/src/Log.js");Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return l.Log}});let c=r("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),u=r("./node_modules/@statsig/client-core/src/StorageProvider.js");Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return u.Storage}}),n(r("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),t),n(r("./node_modules/@statsig/client-core/src/CacheKey.js"),t),n(r("./node_modules/@statsig/client-core/src/ClientInterfaces.js"),t),n(r("./node_modules/@statsig/client-core/src/DataAdapterCore.js"),t),n(r("./node_modules/@statsig/client-core/src/Diagnostics.js"),t),n(r("./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js"),t),n(r("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),t),n(r("./node_modules/@statsig/client-core/src/EvaluationOptions.js"),t),n(r("./node_modules/@statsig/client-core/src/EvaluationTypes.js"),t),n(r("./node_modules/@statsig/client-core/src/Hashing.js"),t),n(r("./node_modules/@statsig/client-core/src/InitializeResponse.js"),t),n(r("./node_modules/@statsig/client-core/src/Log.js"),t),n(r("./node_modules/@statsig/client-core/src/MemoKey.js"),t),n(r("./node_modules/@statsig/client-core/src/NetworkConfig.js"),t),n(r("./node_modules/@statsig/client-core/src/NetworkCore.js"),t),n(r("./node_modules/@statsig/client-core/src/OverrideAdapter.js"),t),n(r("./node_modules/@statsig/client-core/src/ParamStoreTypes.js"),t),n(r("./node_modules/@statsig/client-core/src/SafeJs.js"),t),n(r("./node_modules/@statsig/client-core/src/SDKType.js"),t),n(r("./node_modules/@statsig/client-core/src/SessionID.js"),t),n(r("./node_modules/@statsig/client-core/src/SizeOf.js"),t),n(r("./node_modules/@statsig/client-core/src/StableID.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigClientBase.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigDataAdapter.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigEvent.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigPlugin.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigTypeFactories.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigTypes.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigUser.js"),t),n(r("./node_modules/@statsig/client-core/src/StorageProvider.js"),t),n(r("./node_modules/@statsig/client-core/src/TypedJsonParse.js"),t),n(r("./node_modules/@statsig/client-core/src/TypingUtils.js"),t),n(r("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),t),n(r("./node_modules/@statsig/client-core/src/UUID.js"),t),n(r("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),t),n(r("./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js"),t),n(r("./node_modules/@statsig/client-core/src/SDKFlags.js"),t),Object.assign((0,o._getStatsigGlobal)(),{Log:l.Log,SDK_VERSION:c.SDK_VERSION})},"./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._resolveDeltasResponse=void 0;let s=r("./node_modules/@statsig/client-core/src/index.js");function n(e,t){null==e||e.forEach(e=>{delete t[e]})}t._resolveDeltasResponse=function(e,t){var r,o,i;let a=(0,s._typedJsonParse)(t,"checksum","DeltasEvaluationResponse");if(!a)return{hadBadDeltaChecksum:!0};let l=(n((i=(r=e,o=a,Object.assign(Object.assign(Object.assign({},r),o),{feature_gates:Object.assign(Object.assign({},r.feature_gates),o.feature_gates),layer_configs:Object.assign(Object.assign({},r.layer_configs),o.layer_configs),dynamic_configs:Object.assign(Object.assign({},r.dynamic_configs),o.dynamic_configs)}))).deleted_gates,i.feature_gates),delete i.deleted_gates,n(i.deleted_configs,i.dynamic_configs),delete i.deleted_configs,n(i.deleted_layers,i.layer_configs),delete i.deleted_layers,i),c=(0,s._DJB2Object)({feature_gates:l.feature_gates,dynamic_configs:l.dynamic_configs,layer_configs:l.layer_configs},2);return c!==a.checksumV2?{hadBadDeltaChecksum:!0,badChecksum:c,badMergedConfigs:l,badFullResponse:a.deltas_full_response}:JSON.stringify(l)}},"./node_modules/@statsig/js-client/src/EvaluationStore.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r("./node_modules/@statsig/client-core/src/index.js");t.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,s._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e,t){var r;if(!e)return!1;let n=(0,s._typedJsonParse)(e.data,"has_updates","EvaluationResponse");return null!=n&&(this._source=e.source,(null==n?void 0:n.has_updates)!==!0||(this._rawValues=e.data,this._lcut=n.time,this._receivedAt=e.receivedAt,this._values=n,this._bootstrapMetadata=this._extractBootstrapMetadata(e.source,n),e.source&&n.user&&this._setWarningState(t,n),s.SDKFlags.setFlags(this._sdkKey,null!=(r=n.sdk_flags)?r:{}),!0))}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.dynamic_configs,e)}getConfigList(){var e;return(null==(e=this._values)?void 0:e.dynamic_configs)?Object.values(this._values.dynamic_configs).map(e=>e.name):[]}getLayer(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult(null==(t=this._values)?void 0:t.param_stores,e)}getSource(){return this._source}getExposureMapping(){var e;return null==(e=this._values)?void 0:e.exposures}_extractBootstrapMetadata(e,t){if("Bootstrap"!==e)return null;let r={};return t.user&&(r.user=t.user),t.sdkInfo&&(r.generatorSDKInfo=t.sdkInfo),r.lcut=t.time,r}_getDetailedStoreResult(e,t){let r=null;return e&&(r=e[t]?e[t]:e[(0,s._DJB2)(t)]),{result:r,details:this._getDetails(null==r)}}_setWarningState(e,t){var r,n;let o=s.StableID.get(this._sdkKey);if((null==(r=e.customIDs)?void 0:r.stableID)!==o&&((null==(n=e.customIDs)?void 0:n.stableID)||o))return void this._warnings.add("StableIDMismatch");if("user"in t){let r=t.user,n=Object.assign(Object.assign({},e),{analyticsOnlyMetadata:void 0});(0,s._getFullUserHash)(n)!==(0,s._getFullUserHash)(r)&&this._warnings.add("PartialUserMatch")}}getCurrentSourceDetails(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};let e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}_getDetails(e){var t,r;let s=this.getCurrentSourceDetails(),n=s.reason,o=null!=(t=s.warnings)?t:[];"Bootstrap"===this._source&&o.length>0&&(n+=o[0]),"Uninitialized"!==n&&"NoValues"!==n&&(n=`${n}:${e?"Unrecognized":"Recognized"}`);let i="Bootstrap"===this._source&&null!=(r=this._bootstrapMetadata)?r:void 0;return i&&(s.bootstrapMetadata=i),Object.assign(Object.assign({},s),{reason:n})}}},"./node_modules/@statsig/js-client/src/Network.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let n=r("./node_modules/@statsig/client-core/src/index.js"),o=r("./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js");class i extends n.NetworkCore{constructor(e,t){super(e,t);let r=null==e?void 0:e.networkConfig;this._option=e,this._initializeUrlConfig=new n.UrlConfiguration(n.Endpoint._initialize,null==r?void 0:r.initializeUrl,null==r?void 0:r.api,null==r?void 0:r.initializeFallbackUrls)}fetchEvaluations(e,t,r,o,i){return s(this,void 0,void 0,function*(){var s,a,l,c,u,d;let h=t?(0,n._typedJsonParse)(t,"has_updates","InitializeResponse"):null,p={user:o,hash:null!=(l=null==(a=null==(s=this._option)?void 0:s.networkConfig)?void 0:a.initializeHashAlgorithm)?l:"djb2",deltasResponseRequested:!1,full_checksum:null};if(null==h?void 0:h.has_updates){let e=(null==h?void 0:h.hash_used)!==(null!=(d=null==(u=null==(c=this._option)?void 0:c.networkConfig)?void 0:u.initializeHashAlgorithm)?d:"djb2");p=Object.assign(Object.assign({},p),{sinceTime:i&&!e?h.time:0,previousDerivedFields:"derived_fields"in h&&i?h.derived_fields:{},deltasResponseRequested:!0,full_checksum:h.full_checksum,partialUserMatchSinceTime:e?0:h.time})}return this._fetchEvaluations(e,h,p,r)})}_fetchEvaluations(e,t,r,n){return s(this,void 0,void 0,function*(){var s,i;let a=yield this.post({sdkKey:e,urlConfig:this._initializeUrlConfig,data:r,retries:2,isStatsigEncodable:!0,priority:n});if((null==a?void 0:a.code)===204)return'{"has_updates": false}';if((null==a?void 0:a.code)!==200)return null!=(s=null==a?void 0:a.body)?s:null;if((null==t?void 0:t.has_updates)!==!0||(null==(i=a.body)?void 0:i.includes('"is_delta":true'))!==!0||!0!==r.deltasResponseRequested)return a.body;let l=(0,o._resolveDeltasResponse)(t,a.body);return"string"==typeof l?l:this._fetchEvaluations(e,t,Object.assign(Object.assign(Object.assign({},r),l),{deltasResponseRequested:!1}),n)})}}t.default=i},"./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeParamStoreGetter=void 0;let s=r("./node_modules/@statsig/client-core/src/index.js"),n={disableExposureLog:!0};function o(e){return null==e||!1===e.disableExposureLog}function i(e,t){return null!=t&&!(0,s._isTypeMatch)(e,t)}t._makeParamStoreGetter=function(e,t,r){return(a,l)=>{if(null==t)return l;let c=t[a];if(null==c||null!=l&&(0,s._typeOf)(l)!==c.param_type)return l;switch(c.ref_type){case"static":return c.value;case"gate":return e.getFeatureGate(c.gate_name,o(r)?void 0:n).value?c.pass_value:c.fail_value;case"dynamic_config":let u=e.getDynamicConfig(c.config_name,o(r)?void 0:n).get(c.param_name);return i(u,l)?l:u;case"experiment":let d=e.getExperiment(c.experiment_name,o(r)?void 0:n).get(c.param_name);return i(d,l)?l:d;case"layer":let h=e.getLayer(c.layer_name,o(r)?void 0:n).get(c.param_name);return i(h,l)?l:h;default:return l}}}},"./node_modules/@statsig/js-client/src/StatsigClient.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let n=r("./node_modules/@statsig/client-core/src/index.js"),o=r("./node_modules/@statsig/js-client/src/EvaluationStore.js"),i=r("./node_modules/@statsig/js-client/src/Network.js"),a=r("./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js"),l=r("./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js");class c extends n.StatsigClientBase{static instance(e){let t=(0,n._getStatsigGlobal)().instance(e);return t instanceof c?t:(n.Log.warn((0,n._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new c(null!=e?e:"",{}))}constructor(e,t,r=null){var s,a;n.SDKType._setClientType(e,"javascript-client");let c=new i.default(r,e=>{this.$emt(e)});for(let i of(super(e,null!=(s=null==r?void 0:r.dataAdapter)?s:new l.StatsigEvaluationsDataAdapter,c,r),this._possibleFirstTouchMetadata={},this.getFeatureGate=this._memoize(n.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(n.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(n.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getConfigList=this._memoize(n.MemoPrefix._configList,this._getConfigListImpl.bind(this)),this.getLayer=this._memoize(n.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(n.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new o.default(e),this._network=c,this._user=this._configureUser(t,r),this._sdkInstanceID=(0,n.getUUID)(),null!=(a=null==r?void 0:r.plugins)?a:[]))i.bind(this)}initializeSync(e){var t;return"Uninitialized"!==this.loadingStatus?(0,n.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!=(t=this._store.getWarnings())?t:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(e){return s(this,void 0,void 0,function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(e)),this._initializePromise})}updateUserSync(e,t){let r=performance.now();try{return this._updateUserSyncImpl(e,t,r)}catch(t){let e=t instanceof Error?t:Error(String(t));return this._createErrorUpdateDetails(e,r)}}_updateUserSyncImpl(e,t,r){var s;let o=[...null!=(s=this._store.getWarnings())?s:[]];this._resetForUser(e);let i=this.dataAdapter.getDataSync(this._user);null==i&&o.push("NoCachedValues"),this._store.setValues(i,this._user),this._finalizeUpdate(i);let a=null==t?void 0:t.disableBackgroundCacheRefresh;return!0===a||null==a&&(null==i?void 0:i.source)==="Bootstrap"||this._runPostUpdate(null!=i?i:null,this._user),(0,n.createUpdateDetails)(!0,this._store.getSource(),performance.now()-r,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),o)}updateUserAsync(e,t){return s(this,void 0,void 0,function*(){let r=performance.now();try{return yield this._updateUserAsyncImpl(e,t)}catch(t){let e=t instanceof Error?t:Error(String(t));return this._createErrorUpdateDetails(e,r)}})}_updateUserAsyncImpl(e,t){return s(this,void 0,void 0,function*(){this._resetForUser(e);let r=this._user;n.Diagnostics._markInitOverallStart(this._sdkKey);let s=this.dataAdapter.getDataSync(r);if(this._store.setValues(s,this._user),this._setStatus("Loading",s),s=yield this.dataAdapter.getDataAsync(s,r,t),r!==this._user)return(0,n.createUpdateDetails)(!1,this._store.getSource(),-1,Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let o=!1;null!=s&&(n.Diagnostics._markInitProcessStart(this._sdkKey),o=this._store.setValues(s,this._user),n.Diagnostics._markInitProcessEnd(this._sdkKey,{success:o})),this._finalizeUpdate(s),o||(this._errorBoundary.attachErrorIfNoneExists(n.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),n.Diagnostics._markInitOverallEnd(this._sdkKey,o,this._store.getCurrentSourceDetails());let i=n.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,n.createUpdateDetails)(o,this._store.getSource(),i,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:n.StatsigSession.get(this._sdkKey),stableID:n.StableID.get(this._sdkKey),sdkInstanceID:this._sdkInstanceID}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,r){let s="string"==typeof e?{eventName:e,value:t,metadata:r}:e;this.$emt({name:"log_event_called",event:s}),this._logger.enqueue(Object.assign(Object.assign({},s),{user:this._user,time:Date.now()}))}updateUserWithAnalyticsOnlyMetadata(e){this._user=this._configureUser(Object.assign(Object.assign({},this._user),{analyticsOnlyMetadata:e}),this._options)}_primeReadyRipcord(){this.$on("error",()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)})}_initializeAsyncImpl(e){return s(this,void 0,void 0,function*(){return n.Storage.isReady()||(yield n.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,e)})}_createErrorUpdateDetails(e,t){var r;return(0,n.createUpdateDetails)(!1,this._store.getSource(),performance.now()-t,e,null,[...null!=(r=this._store.getWarnings())?r:[]])}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch(e=>{n.Log.error("An error occurred after update.",e)})}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,t){var r;let s=(0,n._normalizeUser)(e,t),o=null==(r=s.customIDs)?void 0:r.stableID;return o&&n.StableID.setOverride(o,this._sdkKey),s.analyticsOnlyMetadata=Object.assign(Object.assign({},s.analyticsOnlyMetadata),this._possibleFirstTouchMetadata),s}_getFeatureGateImpl(e,t){var r,s;let{result:o,details:i}=this._store.getGate(e),a=(0,n._makeFeatureGate)(e,i,o),l=null==(s=null==(r=this.overrideAdapter)?void 0:r.getGateOverride)?void 0:s.call(r,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,n._createGateExposure)(this._user,c,this._store.getExposureMapping()),t),this.$emt({name:"gate_evaluation",gate:c}),c}_getDynamicConfigImpl(e,t){var r,s;let{result:o,details:i}=this._store.getConfig(e),a=(0,n._makeDynamicConfig)(e,i,o),l=null==(s=null==(r=this.overrideAdapter)?void 0:r.getDynamicConfigOverride)?void 0:s.call(r,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,n._createConfigExposure)(this._user,c,this._store.getExposureMapping()),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:c}),c}_getExperimentImpl(e,t){var r,s,o,i;let{result:a,details:l}=this._store.getConfig(e),c=(0,n._makeExperiment)(e,l,a);null!=c.__evaluation&&(c.__evaluation.secondary_exposures=(0,n._mapExposures)(null!=(s=null==(r=c.__evaluation)?void 0:r.secondary_exposures)?s:[],this._store.getExposureMapping()));let u=null==(i=null==(o=this.overrideAdapter)?void 0:o.getExperimentOverride)?void 0:i.call(o,c,this._user,t),d=null!=u?u:c;return this._enqueueExposure(e,(0,n._createConfigExposure)(this._user,d,this._store.getExposureMapping()),t),this.$emt({name:"experiment_evaluation",experiment:d}),d}_getConfigListImpl(){return this._store.getConfigList()}_getLayerImpl(e,t){var r,s,o;let{result:i,details:a}=this._store.getLayer(e),l=(0,n._makeLayer)(e,a,i),c=null==(s=null==(r=this.overrideAdapter)?void 0:r.getLayerOverride)?void 0:s.call(r,l,this._user,t);(null==t?void 0:t.disableExposureLog)&&this._logger.incrementNonExposureCount(e);let u=(0,n._mergeOverride)(l,c,null!=(o=null==c?void 0:c.__value)?o:l.__value,r=>{null!=t&&t.disableExposureLog||this._enqueueExposure(e,(0,n._createLayerParameterExposure)(this._user,u,r,this._store.getExposureMapping()),t)});return this.$emt({name:"layer_evaluation",layer:u}),u}_getParameterStoreImpl(e,t){var r,s;let{result:n,details:o}=this._store.getParamStore(e);this._logger.incrementNonExposureCount(e);let i={name:e,details:o,__configuration:n,get:(0,a._makeParamStoreGetter)(this,n,t)},l=null==(s=null==(r=this.overrideAdapter)?void 0:r.getParamStoreOverride)?void 0:s.call(r,i,t);return null!=l&&(i.__configuration=l.config,i.details=l.details,i.get=(0,a._makeParamStoreGetter)(this,l.config,t)),i}}t.default=c},"./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,o){function i(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigEvaluationsDataAdapter=void 0;let n=r("./node_modules/@statsig/client-core/src/index.js"),o=r("./node_modules/@statsig/js-client/src/Network.js");class i extends n.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t,r){super.attach(e,t,r),null!==r&&r instanceof o.default?this._network=r:this._network=new o.default(null!=t?t:{})}getDataAsync(e,t,r){return this._getDataAsyncImpl(e,(0,n._normalizeUser)(t,this._options),r)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){let t=(0,n._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):n.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(e,t,r,n){return s(this,void 0,void 0,function*(){var s;let o=yield null==(s=this._network)?void 0:s.fetchEvaluations(this._getSdkKey(),e,null==r?void 0:r.priority,t,n);return null!=o?o:null})}_getCacheKey(e){var t;let r=(0,n._getStorageKey)(this._getSdkKey(),e,null==(t=this._options)?void 0:t.customUserCacheKeyFunc);return`${n.DataAdapterCachePrefix}.${this._cacheSuffix}.${r}`}_isCachedResultValidFor204(e,t){return null!=e.fullUserHash&&e.fullUserHash===(0,n._getFullUserHash)(t)}}t.StatsigEvaluationsDataAdapter=i},"./node_modules/@statsig/js-client/src/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClient=void 0;let o=r("./node_modules/@statsig/client-core/src/index.js"),i=r("./node_modules/@statsig/js-client/src/StatsigClient.js");t.StatsigClient=i.default,n(r("./node_modules/@statsig/client-core/src/index.js"),t),t.default=Object.assign((0,o._getStatsigGlobal)(),{StatsigClient:i.default})},"./node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js":(e,t,r)=>{"use strict";function s(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}r.d(t,{A:()=>s})},"./node_modules/date-fns/esm/_lib/requiredArgs/index.js":(e,t,r)=>{"use strict";function s(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{A:()=>s})},"./node_modules/date-fns/esm/differenceInCalendarDays/index.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r("./node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),n=r("./node_modules/date-fns/esm/startOfDay/index.js"),o=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function i(e,t){(0,o.A)(2,arguments);var r=(0,n.A)(e),i=(0,n.A)(t);return Math.round((r.getTime()-(0,s.A)(r)-(i.getTime()-(0,s.A)(i)))/864e5)}},"./node_modules/date-fns/esm/startOfDay/index.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r("./node_modules/date-fns/esm/toDate/index.js"),n=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function o(e){(0,n.A)(1,arguments);var t=(0,s.A)(e);return t.setHours(0,0,0,0),t}},"./node_modules/date-fns/esm/toDate/index.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r("./node_modules/@babel/runtime/helpers/esm/typeof.js"),n=r("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function o(e){(0,n.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,s.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},"./node_modules/decode-uri-component/index.js":e=>{"use strict";var t="%[a-f0-9]{2}",r=RegExp("("+t+")|([^%]+?)","gi"),s=RegExp("("+t+")+","gi");e.exports=function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=s.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var o=function(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(r)||[],s=1;s<t.length;s++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;r=r||1;var s=t.slice(0,r),n=t.slice(r);return Array.prototype.concat.call([],e(s),e(n))})(t,s).join("")).match(r)||[];return e}}(n[0]);o!==n[0]&&(t[n[0]]=o)}n=s.exec(e)}t["%C2"]="";for(var i=Object.keys(t),a=0;a<i.length;a++){var l=i[a];e=e.replace(RegExp(l,"g"),t[l])}return e}(e)}}},"./node_modules/eventemitter3/index.js":e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function s(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,s,o,i){if("function"!=typeof s)throw TypeError("The listener must be a function");var a=new n(s,o||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1)),a.prototype.eventNames=function(){var e,s,n=[];if(0===this._eventsCount)return n;for(s in e=this._events)t.call(e,s)&&n.push(r?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=r?r+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,o=s.length,i=Array(o);n<o;n++)i[n]=s[n].fn;return i},a.prototype.listenerCount=function(e){var t=r?r+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,n,o,i){var a=r?r+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,n),!0;case 5:return u.fn.call(u.context,t,s,n,o),!0;case 6:return u.fn.call(u.context,t,s,n,o,i),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,s);break;case 4:u[c].fn.call(u[c].context,t,s,n);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,s,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||s&&a.context!==s||i(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||n&&!a[l].once||s&&a[l].context!==s)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},"./node_modules/fast-deep-equal/index.js":e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(n=s;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=s;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;0!=n--;){var s,n,o,i=o[n];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},"./node_modules/filter-obj/index.js":e=>{"use strict";e.exports=function(e,t){for(var r={},s=Object.keys(e),n=Array.isArray(t),o=0;o<s.length;o++){var i=s[o],a=e[i];(n?-1!==t.indexOf(i):t(i,a,e))&&(r[i]=a)}return r}},"./node_modules/js-cookie/src/js.cookie.js":e=>{!function(t){"function"==typeof define&&define.amd&&define(t),e.exports=t()}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var s in r)t[s]=r[s]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(s){function n(){}function o(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},n.defaults,o)).expires&&(o.expires=new Date(new Date*1+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var i=JSON.stringify(r);/^[\{\[]/.test(i)&&(r=i)}catch(e){}r=s.write?s.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,!0!==o[l]&&(a+="="+o[l].split(";")[0]));return document.cookie=t+"="+r+a}}function i(e,r){if("undefined"!=typeof document){for(var n={},o=document.cookie?document.cookie.split("; "):[],i=0;i<o.length;i++){var a=o[i].split("="),l=a.slice(1).join("=");r||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(s.read||s)(l,c)||t(l),r)try{l=JSON.parse(l)}catch(e){}if(n[c]=l,e===c)break}catch(e){}}return e?n[e]:n}}return n.set=o,n.get=function(e){return i(e,!1)},n.getJSON=function(e){return i(e,!0)},n.remove=function(t,r){o(t,"",e(r,{expires:-1}))},n.defaults={},n.withConverter=r,n}(function(){})})},"./node_modules/memoize-one/dist/memoize-one.esm.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var r,n,o=0;o<e.length;o++)if(!((r=e[o])===(n=t[o])||s(r)&&s(n))&&1)return!1;return!0}function o(e,t){void 0===t&&(t=n);var r=null;function s(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return s.clear=function(){r=null},s}},"./node_modules/process/browser.js":e=>{var t,r,s,n=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=a(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},"./node_modules/query-string/index.js":(e,t,r)=>{"use strict";let s=r("./node_modules/strict-uri-encode/index.js"),n=r("./node_modules/decode-uri-component/index.js"),o=r("./node_modules/split-on-first/index.js"),i=r("./node_modules/filter-obj/index.js"),a=Symbol("encodeFragmentIdentifier");function l(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function u(e,t){return t.decode?n(e):e}function d(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function h(e){let t=(e=d(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function m(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,s)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){s[e]=r;return}void 0===s[e]&&(s[e]={}),s[e][t[1]]=r};case"bracket":return(e,r,s)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"colon-list-separator":return(e,r,s)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){s[e]=r;return}if(void 0===s[e]){s[e]=[r];return}s[e]=[].concat(s[e],r)};case"comma":case"separator":return(t,r,s)=>{let n="string"==typeof r&&r.includes(e.arrayFormatSeparator),o="string"==typeof r&&!n&&u(r,e).includes(e.arrayFormatSeparator);r=o?u(r,e):r;let i=n||o?r.split(e.arrayFormatSeparator).map(t=>u(t,e)):null===r?r:u(r,e);s[t]=i};case"bracket-separator":return(t,r,s)=>{let n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n){s[t]=r?u(r,e):r;return}let o=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>u(t,e));if(void 0===s[t]){s[t]=o;return}s[t]=[].concat(s[t],o)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),s=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return s;for(let n of e.split("&")){if(""===n)continue;let[e,i]=o(t.decode?n.replace(/\+/g," "):n,"=");i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:u(i,t),r(u(e,t),i,s)}for(let e of Object.keys(s)){let r=s[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=p(r[e],t);else s[e]=p(r,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce((e,t)=>{let r=s[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=h,t.parse=m,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],s=function(e){switch(e.arrayFormat){case"index":return t=>(r,s)=>{let n=r.length;return void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,c(t,e)+"["+n+"]"]:[...r,c(t,e)+"["+c(n,e)+"]="+c(s,e)]};case"bracket":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,c(t,e)+"[]"]:[...r,c(t,e)+"[]="+c(s,e)];case"colon-list-separator":return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,c(t,e)+":list="]:[...r,c(t,e)+":list="+c(s,e)];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(s,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?s:(n=null===n?"":n,0===s.length)?[[c(r,e),t,c(n,e)].join("")]:[[s,c(n,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?r:null===s?[...r,c(t,e)]:[...r,c(t,e)+"="+c(s,e)]}}(t),n={};for(let t of Object.keys(e))r(t)||(n[t]=e[t]);let o=Object.keys(n);return!1!==t.sort&&o.sort(t.sort),o.map(r=>{let n=e[r];return void 0===n?"":null===n?c(r,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?c(r,t)+"[]":n.reduce(s(r),[]).join("&"):c(r,t)+"="+c(n,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,s]=o(e,"#");return Object.assign({url:r.split("?")[0]||"",query:m(h(e),t)},t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:u(s,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[a]:!0},r);let s=d(e.url).split("?")[0]||"",n=t.extract(e.url),o=Object.assign(t.parse(n,{sort:!1}),e.query),i=t.stringify(o,r);i&&(i=`?${i}`);let l=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(l=`#${r[a]?c(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${s}${i}${l}`},t.pick=(e,r,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[a]:!1},s);let{url:n,query:o,fragmentIdentifier:l}=t.parseUrl(e,s);return t.stringifyUrl({url:n,query:i(o,r),fragmentIdentifier:l},s)},t.exclude=(e,r,s)=>{let n=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,n,s)}},"./node_modules/react/cjs/react.production.min.js":(e,t)=>{"use strict";var r=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var _=v.prototype=new b;_.constructor=v,f(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,O={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var n,o={},i=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)C.call(t,n)&&!E.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:r,type:e,key:i,ref:a,props:o,_owner:O.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function I(e,t){var r,s;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,s={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return s[e]})):t.toString(36)}function j(e,t,n){if(null==e)return e;var o=[],i=0;return!function e(t,n,o,i,a){var l,c,u,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var h=!1;if(null===t)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case r:case s:h=!0}}if(h)return a=a(h=t),t=""===i?"."+I(h,0):i,w(a)?(o="",null!=t&&(o=t.replace(A,"$&/")+"/"),e(a,n,o,"",function(e){return e})):null!=a&&(S(a)&&(l=a,c=o+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+t,a={$$typeof:r,type:l.type,key:c,ref:l.ref,props:l.props,_owner:l._owner}),n.push(a)),1;if(h=0,i=""===i?".":i+":",w(t))for(var m=0;m<t.length;m++){var f=i+I(d=t[m],m);h+=e(d,n,o,f,a)}else if("function"==typeof(f=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(t=f.call(t),m=0;!(d=t.next()).done;)f=i+I(d=d.value,m++),h+=e(d,n,o,f,a);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return h}(e,o,"","",function(e){return t.call(n,e,i++)}),o}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},T={transition:null};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,r){j(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=n,t.Profiler=i,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:T,ReactCurrentOwner:O},t.act=D,t.cloneElement=function(e,t,s){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=O.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!E.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:r,type:e.type,key:o,ref:i,props:n,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},"./node_modules/react/index.js":(e,t,r)=>{"use strict";e.exports=r("./node_modules/react/cjs/react.production.min.js")},"./node_modules/split-on-first/index.js":e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let r=e.indexOf(t);return -1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},"./node_modules/strict-uri-encode/index.js":e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},"./node_modules/uuid/lib/bytesToUuid.js":e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var s=r||0;return""+t[e[s++]]+t[e[s++]]+t[e[s++]]+t[e[s++]]+"-"+t[e[s++]]+t[e[s++]]+"-"+t[e[s++]]+t[e[s++]]+"-"+t[e[s++]]+t[e[s++]]+"-"+t[e[s++]]+t[e[s++]]+t[e[s++]]+t[e[s++]]+t[e[s++]]+t[e[s++]]}},"./node_modules/uuid/lib/rng-browser.js":e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var s=Array(16);e.exports=function(){for(var e,t=0;t<16;t++)(3&t)==0&&(e=0x100000000*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},"./node_modules/uuid/v4.js":(e,t,r)=>{var s=r("./node_modules/uuid/lib/rng-browser.js"),n=r("./node_modules/uuid/lib/bytesToUuid.js");e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[o+a]=i[a];return t||n(i)}},"./packages/browser/index.ts":(e,t,r)=>{"use strict";r.d(t,{Pi:()=>M,oJ:()=>u,IO:()=>i,eO:()=>l,fm:()=>R,Z0:()=>O,ft:()=>L,m0:()=>y,zC:()=>U,H8:()=>h,xl:()=>C,oi:()=>I,Ab:()=>D,Cr:()=>T,gm:()=>d,mc:()=>j,mU:()=>v,N1:()=>b,aR:()=>_,j9:()=>g,cX:()=>f,nr:()=>p,CI:()=>w,uF:()=>m,ME:()=>c,E4:()=>x,SQ:()=>P});var s=r("./packages/config/index.ts");let n="unknown-browser-version",o=(e,{userAgent:t})=>{let r=t.indexOf(e);if(-1!==r){let s=t.substring(r+e.length+1);return s.includes(".")?parseFloat(s.split(".").slice(0,2).join(".")):parseInt(s,10)}return n},i=(({userAgent:e},t)=>{let r=!!t.documentMode,s=e.includes("Edg/"),n=e.includes("Edge"),o=e.includes("Opera")||e.includes("OPR"),i=e.includes("Vivaldi"),a=e.includes("Firefox"),l=e.includes("UCBrowser"),c=e.includes("SamsungBrowser"),u=e.includes("YaBrowser"),d=e.includes("Chrom")&&!s&&!n&&!o&&!u&&!i&&!c&&!l,h=e.includes("CriOS")||e.includes("Safari")&&!d&&!s&&!n&&!o&&!c&&!l&&!i&&!u;switch(!0){case d:return"chrome";case a:return"firefox";case h:return"safari";case s:return"edg";case n:return"edge-legacy";case r:return"explorer";case o:return"opera";case u:return"yandex";case i:return"vivaldi";case l:return"ucbrowser";case c:return"samsung";default:return"unknown-browser"}})(navigator,document),a=((e,t)=>{switch(e){case"chrome":{let e=o("Chrome",t);return e!==n?e:o("CriOS",t)}case"firefox":return o("Firefox",t);case"safari":return(e=>{if(!e.userAgent.includes("CriOS"))return o("Version",e);{let t=e.userAgent.match(/OS ([0-9]+)_[0-9]+(_[0-9]+)? like Mac OS X/);return t?+t[1]:n}})(t);case"edg":return o("Edg",t);case"edge-legacy":return o("Edge",t);case"opera":return o("OPR",t);case"explorer":{let e=o("MSIE",t);return e!==n?e:o("rv",t)}case"yandex":return o("YaBrowser",t);case"vivaldi":return o("Vivaldi",t);case"samsung":return o("SamsungBrowser",t);case"ucbrowser":return o("UCBrowser",t);default:return n}})(i,navigator),l=`${i}-${a}`,c=(({userAgent:e,platform:t})=>{let r=t.includes("Win"),s=t.includes("Mac"),n=t.includes("Linux"),o=e.includes("Android"),i=e.includes("iPad"),a=e.includes("iPod"),l=e.includes("iPhone");switch(!0){case r:return"windows";case s:return"mac";case i:return"ipad";case a:return"ipod";case l:return"iphone";case o:return"android";case n:return"linux";default:return"unknown-os"}})(navigator),u=`${i} ${l} ${c}`,d=()=>"firefox"===i,h=()=>"chrome"===i,p=()=>"safari"===i,m=()=>"windows"===c,f=()=>"mac"===c,g=()=>"linux"===c,y=()=>"android"===c,b=()=>"ipod"===c,v=()=>"iphone"===c,_=()=>"ipad"===c||v()||b(),w=()=>"ipad"===c||v()||b()||y(),C=()=>s.R0===s.l0.Desktop,O=()=>navigator.language||navigator.browserLanguage||"unknown";var E=r("./node_modules/memoize-one/dist/memoize-one.esm.js"),k=r("./packages/cookies/src/cookies.ts");let S=(0,E.A)(e=>"true"===k.W.get("force_atlassian_embeddedDocument")),A=(0,E.A)(e=>"true"===k.W.get("force_embeddedDocument")||S(e));function I(){return A(document.cookie)||window.top!==window.self}let j=()=>window.devicePixelRatio>1,x=()=>h()||d()||"edg"===i,P=()=>h()||d()||p(),T=()=>{if(!I())return!1;let e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"msteams"===e.get("iframeSource")},D=()=>{if(S(document.cookie))return!0;if(!I())return!1;let e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"atlassian-smart-link"===e.get("iframeSource")},R=()=>C()||T()||D();function L(){return"ResizeObserver"in window}let N={chrome:125,firefox:115,edg:125,safari:17.4,opera:109,vivaldi:3};function U(e=i,t=a){return t!==n&&!!Object.prototype.hasOwnProperty.call(N,e)&&t>=N[e]}class M{disconnect(){}observe(){}unobserve(){}}},"./packages/config/index.ts":(e,t,r)=>{"use strict";r.d(t,{l0:()=>s,$8:()=>U,qV:()=>T,ad:()=>D,fg:()=>P,R0:()=>o,Nc:()=>R,Jr:()=>et,Xj:()=>_,R4:()=>w,Pf:()=>en,PI:()=>v,ac:()=>I,Sn:()=>Z,Ov:()=>ee,JR:()=>m,$B:()=>a,LG:()=>Q,CT:()=>i,cZ:()=>A,vT:()=>$,iD:()=>q,cA:()=>L,lk:()=>f,A5:()=>K,kO:()=>G,Gw:()=>E,_Y:()=>k,dq:()=>S,k5:()=>J,pH:()=>x,tp:()=>c,l$:()=>u,Jt:()=>N,jg:()=>h,So:()=>Y,Mf:()=>M,qT:()=>y,Hg:()=>er,Qq:()=>C,Eu:()=>b,qX:()=>B,U$:()=>V,Zz:()=>O,kJ:()=>H,Q7:()=>g,tx:()=>F,Yq:()=>z,mx:()=>es,rX:()=>d,xZ:()=>j,mW:()=>p,w0:()=>W});let s={Desktop:"desktop"},n=window.init_config||{},o=n.appId||null,i=n.dontDismissNotifications||null;n.limitMemoryUsage;let a=n.desktopVersion||"0";function l(e,t,r){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let c="chlg06CfblVj204fihGEqA",u="env-8",d="https://trello-slack.services.atlassian.com",h=!1,p="https://p.trellocdn.com",m="56d5e249a98895a9797bebb9",f="5a999cd36066c584c097f193",g="5f4ff6881ce8e97c81d2f605",y="5c2462c384ab8949b1724a20",b="5ad892c30b141641d32919bf",v="588a331cc86ffbe08f5d2c67",_="https://trello-attachments.s3.amazonaws.com",w="https://trello-backgrounds.s3.amazonaws.com",C="https://trello-logos.s3.amazonaws.com",O="f7936f71-2186-4c33-8553-134e287aefdf",E="330642982326-o2b8p0glj3m1o0sgllrpas2m8j9hjn7i.apps.googleusercontent.com",k="AIzaSyAvSBSs9sIV0S5wf4ivvDrwYp6Q20e7jGE",S="122616814543-k4q6th338f4j05dkv1qgvcbutlpa0voe.apps.googleusercontent.com",A="36ipz29apw2svq8",I="zclwcvudmddhz0cscz3w6awtcfs8bne3",j="pk_live_51IaUVrBgOoA7vC4WlHhHNjTeOOqbF7d56Ge0Vvju0qbrBJGLdBmpeGQntGWaCgVKPk3c2itZOuTuFjcxmMyC6g4m00DL5aSU1K",x="AIzaSyDzX-u_bGY7tHhhyNaqm_vz8aY_zbYKoBE",P="PROD",T="trello.com/gateway/api/gasv3/api/v1",D="https",R="1f24403e-f053-43de-b063-e20b357a8f63",L="prod",N="https://id.atlassian.com",U="https://admin.atlassian.com",M="https://janus.prod.atl-paas.net",F="https://1609e814bfa14a3db09f984e6426cfd3@o55978.ingest.sentry.io/5988847",B="6052d130068a8c0de7b022b4",V="https://appsource.microsoft.com/en-us/product/office/WA200002592?tab=Overview",K="6052d16c340ed23e9da083ed",G="https://workspace.google.com/marketplace/app/trello_for_gmail/710372432947",$="6052d0bb1b3c162630f54230",z=!0,W="https://trello-server.us-east-1.prod.atl-paas.net",q="inbox@app.trello.com",H="8f9e7052-1437-463f-ae39-e3db0930a4a5",J="789b4470aea82312",Q="/assets/detect-gpu/5.0.70",Y=!1,X=window?.trelloVersion??"dev-0",Z=new class{constructor(e){l(this,"head",void 0),l(this,"patch",0),l(this,"version",void 0);let t=e.split("-");this.head=t.slice(0,-1).join("-"),this.version=parseFloat(t.slice(-1)[0])}toString(){return`${this.head}-${this.fullVersion()}`}toJSON(){return this.toString()}fullVersion(){return[this.version,this.patch].filter(e=>e).join(".")||0}}(X),ee=Z.toString(),et=["538627f73cbb44d1bfbb58f0","58adea146fcdb5f4e50bebf2"],er=window.locale||"en",es=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0],en=window.__bifrost_track__},"./packages/cookies/src/cookies.ts":(e,t,r)=>{"use strict";r.d(t,{W:()=>c});var s=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/initialize-controls/index.js"),n=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-strictly-necessary-cookie/index.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/set-cookie/index.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/delete-cookie/index.js"),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/third-party-controls/check-third-party/index.js");class c{static initialize(){(0,s.bX)({product:"Trello"})}static async set(e,t,r,s="use_preferences"){return"necessary"===s?((0,n.G)(e,t,r),Promise.resolve(!0)):await (0,o.T)(e,t,r)==="SUCCESS"}static get(e){return e?(0,i.R)(e):(0,i.R)()}static remove(e,t){(0,a.Y)(e,t)}static async checkThirdParty(e,t,r){await (0,l.W)(e,t,r)}}},"./packages/developer-console-state/index.ts":(e,t,r)=>{"use strict";r.d(t,{t:()=>s});let s=new(r("./packages/shared-state/index.ts")).oQ({lastActiveTab:0,developerConsoleOpen:!1,developerConsoleEnabled:!1,plainTextEditor:!1,disableEditorViewRendering:!1,showModelIds:!1,useTrelloTimingHeader:!1,logConnectionInformation:void 0,operationNameInUrl:void 0},{storageKey:"developerConsoleState"})},"./packages/dynamic-config/src/dangerouslyGetDynamicConfigSync.ts":(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var s=r("./packages/storage/index.ts"),n=r("./packages/dynamic-config/src/data/dynamicConfigFlags.ts"),o=r("./packages/dynamic-config/src/dynamicConfig.constants.ts");let i=["trello_web_native_current_board_info"],a={},l=e=>{let t=JSON.parse((s._q.get(o.KK)??{}).config??"{}"),r=s._q.get(o.Wu)||{},l=t[e]?.value,c=r[e],u=n.l[e].defaultValue,d=c??l??u;return i.includes(e)?(void 0===a[e]&&(a[e]=d),a[e]):d}},"./packages/dynamic-config/src/data/dynamicConfigFlags.ts":(e,t,r)=>{"use strict";r.d(t,{l:()=>s});let s={butler_ent_admin_only_allowlist:{createdOn:"2024-11-18",defaultValue:[""],owner:"ssilber"},mirror_cards_ent_blocklist:{createdOn:"2025-01-23",defaultValue:["55c389e4e94b6c5acb767b23"],owner:"slondon"},trello_enterprise_planner_blocklist:{createdOn:"2025-05-09",defaultValue:[""],owner:"jlei"},trello_web_apollo_cache_hydrator_metrics:{createdOn:"2024-11-20",defaultValue:!1,owner:"koduche"},trello_web_apollo_read_write_metrics:{createdOn:"2024-11-18",defaultValue:!1,owner:"cilleyd"},trello_web_atlassian_team:{createdOn:"2024-11-13",defaultValue:!1,owner:"mfaith"},trello_web_billing_down_for_maintenance:{createdOn:"2024-11-08",defaultValue:!1,owner:"jmatthews"},trello_web_disconnect_active_clients:{createdOn:"2024-11-07",defaultValue:!1,owner:"mfaith"},trello_web_enable_ufo:{createdOn:"2025-06-05",defaultValue:!1,owner:"mfoulks"},trello_web_enable_web_vitals:{createdOn:"2025-06-24",defaultValue:!0,owner:"dminshew"},trello_web_error_handling_rrs:{createdOn:"2024-11-20",defaultValue:!1,owner:"dcilley"},trello_web_forcefully_reload_to_exact_version:{createdOn:"2024-11-18",defaultValue:0,owner:"mfaith"},trello_web_google_tag_manager:{createdOn:"2024-11-04",defaultValue:!0,owner:"mfaith"},trello_web_inbox_native_graphql_provisioning:{createdOn:"2025-02-11",defaultValue:!1,owner:"greznicov"},trello_web_max_first_active_delay:{createdOn:"2024-11-20",defaultValue:2e3,owner:"mfaith"},trello_web_max_first_idle_delay:{createdOn:"2024-11-20",defaultValue:6e4,owner:"mfaith"},trello_web_mirror_cards_quickload:{createdOn:"2025-04-23",defaultValue:!1,owner:"jsaussy"},trello_web_native_current_board_info:{createdOn:"2024-11-20",defaultValue:!0,owner:"koduche"},trello_web_passively_reload_to_minimum_version:{createdOn:"2024-11-18",defaultValue:0,owner:"mfaith"},trello_web_somethings_wrong:{createdOn:"2024-11-07",defaultValue:!1,owner:"mfaith"},trello_web_take_trello_offline:{createdOn:"2024-11-07",defaultValue:!1,owner:"mfaith"},trello_web_ufo_sampling_rate:{createdOn:"2025-07-11",defaultValue:0,owner:"mfoulks"},trello_web_update_nudge_time_interval:{createdOn:"2025-05-22",defaultValue:6048e5,owner:"mellis"}}},"./packages/dynamic-config/src/dynamicConfig.constants.ts":(e,t,r)=>{"use strict";r.d(t,{KK:()=>o,Wu:()=>i,e_:()=>n,iD:()=>s});let s=864e5,n="dynamicConfigUserData",o="dynamicConfigClient",i="dynamicConfigOverrides"},"./packages/id-cache/index.ts":(e,t,r)=>{"use strict";r.d(t,{ij:()=>n,qv:()=>p,g$:()=>m,x2:()=>i});let s=RegExp("^[a-f0-9]*$");function n(e){return(null!=e?e.constructor.name:void 0)==="ObjectID"||(null!=e?e.length:void 0)===24&&s.test(e)}let o=RegExp("ari:cloud:trello::[^/]+/(.+/)?[a-z0-9]{24}$");function i(e){return"string"==typeof e&&/^[a-zA-Z0-9]{8}$/.test(e)}function a(e,t,r){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let l={Card:{isValid:i,getErrorMsg:e=>`Invalid card shortLink: ${e}`},Board:{isValid:i,getErrorMsg:e=>`Invalid board shortLink: ${e}`},Member:{isValid:e=>!0,getErrorMsg:e=>`Invalid member username: ${e}`},Workspace:{isValid:e=>!0,getErrorMsg:e=>`Invalid workspace name: ${e}`}},c={ari:{isValid:function(e){return o.test(e)},getErrorMsg:(e,t)=>`Invalid ${t} ARI: ${e}`},id:{isValid:n,getErrorMsg:(e,t)=>`Invalid ${t} id: ${e}`}},u=()=>({Card:{},Board:{},Member:{},Workspace:{}});var d=new WeakSet;function h(e){return Object.keys(e).reduce((t,r)=>(t[e[r]]=r,t),{})}let p=new class{constructor(){!function(e,t){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,d),a(this,"idMap",u()),a(this,"ariMap",u())}reset(){this.idMap=u(),this.ariMap=u()}getId(e,t){if(l[e].isValid(t))return this.idMap[e][t]}setId(e,t,r){if(!c.id.isValid(r))throw Error(c.id.getErrorMsg(r,e));if(!l[e].isValid(t))throw Error(l[e].getErrorMsg(t));this.idMap[e][t]=r}getAri(e,t){if(l[e].isValid(t))return this.ariMap[e][t]}setAri(e,t,r){if(!c.ari.isValid(r))throw Error(c.ari.getErrorMsg(r,e));if(!l[e].isValid(t))throw Error(l[e].getErrorMsg(t));this.ariMap[e][t]=r}setCardId(e,t){return this.setId("Card",e,t)}setBoardId(e,t){return this.setId("Board",e,t)}setMemberId(e,t){return this.setId("Member",e,t)}setWorkspaceId(e,t){return this.setId("Workspace",e,t)}getCardId(e){return this.getId("Card",e)}getBoardId(e){return this.getId("Board",e)}getMemberId(e){return this.getId("Member",e)}getWorkspaceId(e){return this.getId("Workspace",e)}setCardAri(e,t){return this.setAri("Card",e,t)}setBoardAri(e,t){return this.setAri("Board",e,t)}setMemberAri(e,t){return this.setAri("Member",e,t)}setWorkspaceAri(e,t){return this.setAri("Workspace",e,t)}getCardAri(e){return this.getAri("Card",e)}getBoardAri(e){return this.getAri("Board",e)}getMemberAri(e){return this.getAri("Member",e)}getWorkspaceAri(e){return this.getAri("Workspace",e)}__getBoardShortLinkById__DO_NOT_USE(e){if(n(e))return(function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")})(d,this,h).call(this,this.idMap.Board)[e]}};function m(e){return/^[0-9]{1,8}$/.test(e.toString())}},"./packages/invitation-tokens/src/getInvitationTokens.ts":(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});let s=()=>{let e,t=[],r=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;e=r.exec(document.cookie)?.[1];)t.push(unescape(e));if(t.length>0)return t.join(",")}},"./packages/objects/index.ts":(e,t,r)=>{"use strict";r.d(t,{X3:()=>o,bD:()=>n,CN:()=>i,Qd:()=>a});var s=r("./node_modules/fast-deep-equal/index.js");let n=r.n(s)();function o(e,t){let r=Object.keys(e).reduce((e,r)=>(e[r]=t[r],e),{});return n(e,r)}let i=e=>e;function a(e){return!!e&&"object"==typeof e&&[null,Object.prototype].includes(Object.getPrototypeOf(e))}},"./packages/quickload/src/cleanPreload.ts":(e,t,r)=>{"use strict";r.d(t,{l:()=>s});let s=e=>({isLoading:e.isLoading,start:e.start,used:e.used,url:e.url})},"./packages/quickload/src/formatUrl.ts":(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var s=r("./packages/invitation-tokens/src/getInvitationTokens.ts");let n=(e,{rootId:t,idModel:r})=>{let n=e.replace(t,r),o=window?.document?.cookie;if(RegExp("^/1/search").test(e)){let e=/dsc=([^;]+)/.exec(o)?.[1];n+=`&dsc=${e??"undefined"}`}let i=(0,s.Q)(),a=n.includes("?");return n+(i?`${a?"&":"?"}invitationTokens=${i}`:"")}},"./packages/quickload/src/getPreloadsFromPath.ts":(e,t,r)=>{"use strict";r.d(t,{m:()=>l});var s=r("./packages/dynamic-config/src/dangerouslyGetDynamicConfigSync.ts"),n=r("./packages/id-cache/index.ts"),o=r("./packages/quickload/src/formatUrl.ts");let i={header:{taskName:null,requests:[{url:"/1/member/:idMember?fields=id%2CaaBlockSyncUntil%2CaaEmail%2CaaId%2CactivityBlocked%2CavatarHash%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CcredentialsRemovedCount%2CdomainClaimed%2Cemail%2CfullName%2ChasEnterpriseDomain%2CidBoards%2CidEnterprise%2CidEnterprisesAdmin%2CidEnterprisesDeactivated%2CidEnterprisesImplicitAdmin%2CidMemberReferrer%2CidOrganizations%2CidPremOrgsAdmin%2Cinitials%2CisAaMastered%2CixUpdate%2Climits%2CloginTypes%2CmarketingOptIn%2CmemberType%2CmessagesDismissed%2CnodeId%2CnonPublic%2CnonPublicAvailable%2ConeTimeMessagesDismissed%2Cprefs%2CpremiumFeatures%2Cproducts%2CrequiresAaOnboarding%2CsessionType%2Cstatus%2Ctrophies%2Curl%2Cusername&campaigns=true&cohorts=true&enterpriseLicenses=true&enterprises=true&enterprise_filter=saml%2Cmember%2Cmember-unconfirmed%2Cowned&enterprise_fields=id%2CdisplayName%2CidAdmins%2ClogoUrl%2Cname%2Coffering%2CorganizationPrefs%2Cprefs%2Csandbox%2CsandboxExpiry&enterpriseWithRequiredConversion=true&logins=true&organizations=all&organization_fields=id%2CcreationMethod%2CdisplayName%2CenterpriseJoinRequest%2CidEnterprise%2CidEntitlement%2CjwmLink%2ClogoHash%2Cname%2Coffering%2CpremiumFeatures%2Cproducts%2Ctype&organization_enterprise=true&organization_paidAccount=true&organization_paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CisVatRegistered%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&pluginData=true&savedSearches=true",rootId:":idMember",operationName:"quickload:MemberHeader",modelName:"Member"},{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Cstarred%2Csubscribed%2Curl&board_memberships=me&boardStars=true&organizations=all&organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts",rootId:":idMember",operationName:"quickload:MemberBoards",modelName:"Member"}]},"^/b/([^/]+)":{taskName:"view-board",requests:[{url:"/1/board/:idBoard?fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2Cdesc%2CdescData%2CenterpriseOwned%2CidEnterprise%2CidMemberCreator%2CidOrganization%2CidTags%2ClabelNames%2Climits%2Cmemberships%2Cname%2CnodeId%2CpowerUps%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2CtemplateGallery%2Ctype%2Curl&organization_disable_mock=true&boardPlugins=true&customFields=true&enterprise=true&enterprise_fields=id%2CaiPrefs%2CdisplayName&labels=all&label_fields=id%2Ccolor%2CidBoard%2Cname&labels_limit=1000&members=all&member_fields=id%2CactivityBlocked%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CfullName%2CidEnterprise%2CidMemberReferrer%2CidPremOrgsAdmin%2Cinitials%2CmemberType%2CnonPublic%2CnonPublicAvailable%2Curl%2Cusername&memberships_orgMemberType=true&myPrefs=true&organization=true&organization_fields=id%2Cdesc%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Curl%2Cwebsite&organization_enterprise=true&organization_memberships=all&organization_pluginData=true&organization_tags=true&pluginData=true",rootId:":idBoard",operationName:"quickload:CurrentBoardInfo",modelName:"Board"},{url:"/1/board/:idBoard?fields=id&cards=visible&card_fields=id%2Caddress%2Cbadges%2CcardRole%2Cclosed%2Ccoordinates%2Ccover%2CcreationMethod%2CcreationMethodError%2CcreationMethodLoadingStartedAt%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2CidAttachmentCover%2CidBoard%2CidLabels%2CidList%2CidMembers%2CidShort%2CisTemplate%2Clabels%2Climits%2ClocationName%2CmirrorSourceId%2Cname%2CnodeId%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2CsingleInstrumentationId%2Cstart%2Csubscribed%2Curl&card_attachments=true&card_attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisMalicious%2CisUpload%2CmimeType%2Cname%2Cpos%2Curl&card_checklists=all&card_checklist_fields=id%2CidBoard%2CidCard%2Cname%2Cpos&card_checklist_checkItems=none&card_customFieldItems=true&card_pluginData=true&card_stickers=true&lists=open&list_fields=id%2Cclosed%2Ccolor%2CcreationMethod%2Cdatasource%2CidBoard%2Climits%2Cname%2CnodeId%2Cpos%2CsoftLimit%2Csubscribed%2Ctype",rootId:":idBoard",operationName:"quickload:CurrentBoardListsCards",modelName:"Board"},{url:"/gateway/api/graphql",rootId:":idBoard",operationName:"quickload:TrelloCurrentBoardInfo",modelName:"TrelloBoard",dynamicConfig:{key:"trello_web_native_current_board_info",value:!0},graphQLPayload:{query:'query TrelloCurrentBoardInfo($id:TrelloShortLink!){trello{boardByShortLink(shortLink:$id)@optIn(to:"TrelloBoard"){id __typename closed creationMethod creator{id __typename objectId}customFields{__typename edges{node{id __typename display{__typename cardFront}name objectId options{__typename color objectId position value{__typename text}}position type}}}description{__typename text}enterprise{id __typename displayName objectId}enterpriseOwned galleryInfo{id __typename avatarShape avatarUrl blurb byline category{__typename key}featured language{__typename description enabled language locale localizedDescription}precedence stats{__typename copyCount viewCount}}labels(first:-1){__typename edges{node{id __typename color name objectId}}}lastActivityAt limits{__typename attachments{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}boards{__typename totalMembersPerBoard{__typename disableAt status warnAt}}cards{__typename openPerBoard{__typename disableAt status warnAt}openPerList{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}totalPerList{__typename disableAt status warnAt}}checkItems{__typename perChecklist{__typename disableAt status warnAt}}checklists{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}customFieldOptions{__typename perField{__typename disableAt status warnAt}}customFields{__typename perBoard{__typename disableAt status warnAt}}labels{__typename perBoard{__typename disableAt status warnAt}}lists{__typename openPerBoard{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}}reactions{__typename perAction{__typename disableAt status warnAt}uniquePerAction{__typename disableAt status warnAt}}stickers{__typename perCard{__typename disableAt status warnAt}}}members(first:-1){__typename edges{__typename membership{__typename deactivated objectId type unconfirmed workspaceMemberType}node{id __typename activityBlocked avatarUrl bio bioData confirmed enterprise{id __typename objectId}fullName initials nonPublicData{__typename avatarUrl fullName initials}objectId url username}}}name objectId powerUpData(first:-1){__typename edges{node{id __typename access objectId powerUp{objectId}scope value}}}powerUps(filter:{access:"enabled"},first:-1){edges{__typename node{__typename objectId}objectId}}prefs{__typename background{__typename bottomColor brightness color image imageScaled{height url width}tile topColor}calendarFeedEnabled canInvite cardAging cardCovers comments hiddenPowerUpBoardButtons{__typename objectId}hideVotes invitations isTemplate permissionLevel selfJoin showCompleteStatus switcherViews{__typename enabled viewType}voting}premiumFeatures shortLink shortUrl tags(first:-1){__typename edges{node{__typename objectId}}}url viewer{__typename calendarKey email{__typename key list{id __typename objectId}position}lastSeenAt sidebar{__typename show}subscribed}workspace{id __typename description displayName enterprise{id __typename displayName objectId}limits{__typename freeBoards{__typename disableAt status warnAt}freeCollaborators{__typename disableAt status warnAt}totalMembers{__typename disableAt status warnAt}}logoHash members(first:-1){__typename edges{__typename membership{__typename deactivated objectId type unconfirmed}node{id __typename objectId}}}name objectId offering prefs{__typename associatedDomain attachmentRestrictions boardDeleteRestrict{__typename enterprise org private public}boardInviteRestrict boardVisibilityRestrict{__typename enterprise org private public}externalMembersDisabled orgInviteRestrict permissionLevel}tags(first:-1){__typename edges{node{__typename name objectId}}}url website}}}}',variables:{id:":idBoard"},operationName:"TrelloCurrentBoardInfo"}},{url:"/gateway/api/graphql",rootId:":idBoard",operationName:"quickload:TrelloBoardMirrorCards",modelName:"TrelloBoard",dynamicConfig:{key:"trello_web_mirror_cards_quickload",value:!0},graphQLPayload:{query:'query TrelloBoardMirrorCards($id:TrelloShortLink!){trello{boardMirrorCardInfo(shortLink:$id)@optIn(to:"TrelloBoardMirrorCardInfo"){id __typename mirrorCards{__typename edges{__typename node{id __typename mirrorCard{id __typename}sourceBoard{id __typename closed customFields{__typename edges{__typename node{id __typename display{__typename cardFront}name objectId options{__typename color objectId position value{__typename text}}position type}}}enterprise{id __typename objectId}labels(first:-1){__typename edges{__typename node{id __typename color name objectId}}}name objectId powerUps{edges{__typename node{__typename objectId}objectId}}prefs{background{brightness color image imageScaled{height url width}topColor}cardAging cardCovers showCompleteStatus}shortLink url workspace{id objectId}}sourceCard{id __typename attachments(first:-1){edges{node{id __typename isMalicious objectId}}}badges{__typename attachments attachmentsByType{__typename trello{__typename board card}}checkItems checkItemsChecked checkItemsEarliestDue comments description due{__typename at complete}externalSource lastUpdatedByAi location maliciousAttachments startedAt viewer{__typename subscribed voted}votes}checklists(first:-1){edges{__typename node{id __typename objectId}}}closed complete cover{__typename attachment{id __typename objectId}brightness color edgeColor powerUp{__typename objectId}previews{__typename edges{__typename node{__typename bytes height objectId scaled url width}}}size uploadedBackground{__typename objectId}}creation{__typename loadingStartedAt method}customFieldItems(first:-1){__typename edges{__typename node{__typename customField{id __typename objectId}model{id __typename objectId}objectId value{id __typename checked date number objectId text}}}}description{__typename text}due{__typename at complete reminder}isTemplate labels(first:-1){edges{__typename node{id __typename color name objectId}}}lastActivityAt limits{__typename stickers{__typename perCard{__typename disableAt}}}list@optIn(to:"TrelloListBoard"){id __typename board{id __typename objectId}closed name objectId position softLimit}location{__typename address coordinates{__typename latitude longitude}name staticMapUrl}members(first:-1){edges{__typename node{id __typename avatarUrl fullName initials nonPublicData{__typename avatarUrl fullName initials}objectId username}}}mirrorSourceId mirrorSourceNodeId name objectId pinned powerUpData{__typename edges{__typename node{id __typename objectId powerUp{__typename objectId}value}}}role shortId shortLink singleInstrumentationId stickers(first:-1){__typename edges{__typename node{__typename image imageScaled{__typename height objectId scaled url width}left objectId rotate top url zIndex}}}url}}}}}}}',variables:{id:":idBoard"},operationName:"TrelloBoardMirrorCards"}}]},"^//([^/]*([^/]+))$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"},{url:"/1/search?query=:searchTerm&partial=true&modelTypes=boards&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl",rootId:":searchTerm",operationName:"quickload:QuickBoardsSearch",modelName:"Search"}]},"^/search":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^//$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^/c/([^/]+)":{taskName:"view-board",requests:[{url:"/1/card/:idCard?fields=id%2Cbadges%2CcardRole%2Cclosed%2Ccover%2CcreationMethod%2CcreationMethodError%2CcreationMethodLoadingStartedAt%2CdateClosed%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2Cemail%2CidAttachmentCover%2CidBoard%2CidChecklists%2CidLabels%2CidList%2CidMemberCreator%2CidMembers%2CidMembersVoted%2CidShort%2CisTemplate%2Clabels%2Climits%2CmanualCoverAttachment%2CmirrorSourceId%2Cname%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2CsingleInstrumentationId%2Cstart%2Csubscribed%2Curl&attachments=true&attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisMalicious%2CisUpload%2CmimeType%2Cname%2Cpos%2Cpreviews%2Curl&customFieldItems=true&pluginData=true&stickers=true&sticker_fields=id%2Cimage%2CimageScaled%2CimageUrl%2Cleft%2Crotate%2Ctop%2CzIndex",rootId:":idCard",operationName:"quickload:PreloadCard",modelName:"Card"}],deferredPreloads:["CurrentBoardInfo","CurrentBoardListsCards"]},"^/w/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts%2Ctype&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts%2Ctype&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/w/(?!search)(?!welcome-to-trello)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Ctype%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CisVatRegistered%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/(?!search)(?!welcome-to-trello)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Ctype%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CisVatRegistered%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/w/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Ctype%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CisVatRegistered%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Ctype%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CisVatRegistered%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/u/([^/]+)/boards$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&board_organization=true&board_organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts&boardStars=true&organizations=all&organization_fields=id%2Ccredits%2Climits%2Cprefs%2CpremiumFeatures&organization_memberships=all",rootId:":idMember",operationName:"quickload:MemberBoardsHome",modelName:"Member"}]}},a=e=>!e.dynamicConfig||(0,s.a)(e.dynamicConfig.key)===e.dynamicConfig.value,l=(e=window.location.pathname,t=window.location.search,r=window.document.cookie)=>{let s=e.replace(/\?(.*)$/,""),l=Object.keys(i).find(e=>{if("header"===e)return!1;let t=i[e].requests,r=new RegExp(e);return!!t.find(a)&&r.test(s)}),c=l&&i[l].requests.filter(a),u=l&&i[l].deferredPreloads?i[l].deferredPreloads:[],d=l&&i[l].taskName||null,h=new RegExp(l||"").exec(s)?.[1]||"";RegExp("^/search$").test(e)&&(h=new URLSearchParams(t).get("q")||"");let p=(0,n.x2)(h);return{path:s,preloads:i.header.requests.filter(a).concat(c||[]).filter(({graphQLPayload:e})=>!e||p).map(({url:e,rootId:t,operationName:r,modelName:s,graphQLPayload:n})=>{let i={url:(0,o.J)(e,{rootId:t,idModel:":idMember"===t?"me":h}),operationName:r,modelName:s,queryName:r.replace("quickload:",""),taskName:d};return n&&(i.graphQLPayload={...n,variables:{id:":idMember"===t?"me":h}}),i}),deferredPreloads:u,param:h}}},"./packages/quickload/src/preloadsHash.ts":(e,t,r)=>{"use strict";r.d(t,{P:()=>n,x:()=>s});let s=({url:e,graphQLPayload:t})=>{if(!t)return e;{let{operationName:e,variables:r}=t;return`${e}:${JSON.stringify(r)}`}},n={}},"./packages/quickload/src/quickload.ts":(e,t,r)=>{"use strict";r.d(t,{I:()=>f});var s=r("./packages/developer-console-state/index.ts"),n=r("./packages/server-gate-overrides/src/index.ts"),o=r("./packages/quickload/src/cleanPreload.ts"),i=r("./packages/quickload/src/getPreloadsFromPath.ts");let a=()=>{let e="";for(let t=0;t<16;t+=1)e+="0123456789abcdef"[Math.floor(16*Math.random())];return e};var l=r("./packages/quickload/src/preloadsHash.ts");let c=function(e){try{return JSON.parse(e)}catch(e){return null}},u=function(e,t,r,o="unknown",i="quickload",l,c){let u=new Headers;u.append("Content-Type","application/json; charset=utf-8"),u.append("Accept","application/json"),u.append("X-Trello-Client-Version",window.trelloVersion||"dev-0"),u.append("X-Trello-Operation-Source",i),u.append("X-Trello-Operation-Name",o);let d=(0,n.IA)();d&&u.append(n.cS,d),l&&(u.append("X-Trello-TraceId",l),u.append("X-B3-TraceId",l),u.append("X-B3-SpanId",a()),u.append("X-Trello-Task",c||"not-implemented")),(async()=>{try{let n=s.t.value.operationNameInUrl,i=await fetch(!n||!o?e:`${e}?operationName=${o}`,{method:"POST",headers:u,body:JSON.stringify(t)});if(i.ok){let e=await i.json();r(null,[e,null])}else r([i.status,await i.text()])}catch(e){r([0,"failed to fetch"])}})()},d=function(e,t,r="unknown",o="model-loader",i,l){let u=new XMLHttpRequest,d=s.t.value.operationNameInUrl;u.open("GET",d&&r?`${e}&operationName=${r}`:e,!0),u.setRequestHeader("Accept","application/json,text/plain"),u.setRequestHeader("X-Trello-Client-Version",window.trelloVersion||"dev-0"),u.setRequestHeader("X-Trello-Operation-Source",o),u.setRequestHeader("X-Trello-Operation-Name",r),i&&(u.setRequestHeader("X-Trello-TraceId",i),u.setRequestHeader("X-B3-TraceId",i),u.setRequestHeader("X-B3-SpanId",a()),u.setRequestHeader("X-Trello-Task",l||"not-implemented"));let h=(0,n.IA)();h&&u.setRequestHeader(n.cS,h),u.onreadystatechange=function(){4===u.readyState&&(200!==u.status?t([u.status,u.responseText]):t(null,[c(u.responseText),u]))},u.send(null)},h=function(e){e in l.P&&delete l.P[e]},p=function(e,t="preload",r,s,n){if(!e)return;let o={isLoading:!0,callbacks:[],start:Date.now(),used:!1,url:e,traceId:s},i=(0,l.x)({url:e,graphQLPayload:r});if(l.P[i]=o,r)return void u(e,r,function(e,t){if(o.isLoading=!1,e){for(let t of(o.error=e,Array.from(o.callbacks)))t(e);return}for(let e of(o.data=t,Array.from(o.callbacks)))e(null,t)},t,"quickload",s,n);d(e,function(e,t){let r;if(o.isLoading=!1,e){for(r of(o.error=e,Array.from(o.callbacks)))r(e);return}for(r of(o.data=t,Array.from(o.callbacks)))r(null,t)},t,"quickload",s,n)},m={init(){let e=Math.floor(Date.now()/1e3).toString(16)+(a().slice(8)+a()),{preloads:t}=(0,i.m)();for(let{url:r,operationName:s,graphQLPayload:n,taskName:o}of t)p(r,s,n,e,o)},getPreloadsFromPath:i.m,makeUrl:function(e,t){let r,s;s=void 0===t?{}:{...t};let n=[],o=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;void 0!==(r=o.exec(document.cookie)?.[1]);)n.push(unescape(r));if(n.length>0&&(s.invitationTokens=n.join(",")),RegExp("^/1/search(/|$)").test(e)){let e=/dsc=([^;]+)/.exec(document.cookie)?.[1];e&&(s.dsc=e)}let i=[];for(let e in s){let t=s[e];i.push([e,encodeURIComponent(t)].join("="))}return[e,i.join("&")].join("?")},load(e,t=()=>{},r,s,n,i){let a=(0,l.x)({url:e}),c=l.P[a];if(void 0!==c)return c.used=!0,c.isLoading?c.callbacks.push(t):t(c.error,c.data),(0,o.l)(c);d(e,t,r,s,n,i)},getPreloadTraceId(){let{preloads:e}=(0,i.m)();for(let{url:t,graphQLPayload:r}of e){let e=(0,l.x)({url:t,graphQLPayload:r});if(e in l.P)return l.P[e].traceId}},clear(){for(let e in l.P)h(e)},markComplete(){this.status="complete"},status:"pending"};m.init();let f=window.QuickLoad=m},"./packages/server-gate-overrides/src/index.ts":(e,t,r)=>{"use strict";r.d(t,{cS:()=>a,M_:()=>o,IA:()=>l,IY:()=>i});var s=r("./packages/storage/index.ts");let n="STATSIG_OVERRIDES_SERVER",o=()=>s._q.get(n)??{gates:{},rawHeader:""},i=e=>{s._q.set(n,e)},a="X-Trello-Gate-Override",l=()=>{let e=o(),t=Object.entries(e.gates).reduce((e,[t,r])=>(e.push(`${t}: ${r}`),e),[]);return e.rawHeader&&t.push(e.rawHeader),t.join(", ")}},"./packages/shared-state/index.ts":(e,t,r)=>{"use strict";r.d(t,{oQ:()=>y,B:()=>d,QY:()=>_,r2:()=>C});var s=r("./packages/storage/index.ts"),n=r("./packages/objects/index.ts");function o(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function i(e,t){return e.get(l(e,t))}function a(e,t,r){return e.set(l(e,t),r),r}function l(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var c=new WeakMap,u=new WeakMap;class d{constructor(e){!function(e,t,r){var s;(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"value",void 0),o(this,c,void 0),o(this,u,new Set),this.value=e,a(c,this,e)}setValue(e){let t=this.value;for(let r of("function"==typeof e?this.value=e(this.value):(0,n.Qd)(e)?this.value={...this.value,...e}:this.value=e,i(u,this)))r(this.value,t)}subscribe(e,t={}){let r=(r,s)=>{let o=!0;t.onlyUpdateIfChanged&&((null===r?0:+("object"==typeof r||"function"==typeof r))?(0,n.Qd)(r)&&(o=!(0,n.X3)(r,s)):o=r!==s);o&&e(r,s)};return i(u,this).add(r),()=>{i(u,this).delete(r)}}reset(){this.value=i(c,this),a(u,this,new Set)}}function h(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,r){return e.set(m(e,t),r),r}function m(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var f=new WeakMap,g=new WeakSet;class y extends d{constructor(e,{storageKey:t,session:r=!1,syncAcrossBrowser:n=!0}){super(e),function(e,t){h(e,t),t.add(e)}(this,g),function(e,t,r){h(e,t),t.set(e,r)}(this,f,!1);let o=r?s.Y6:s._q,i="function"==typeof t?t():t;m(g,this,b).call(this,o,i,e,n)}}function b(e,t,r,s){let n=e.get(t);null!==n&&n!==r&&this.setValue(n),this.subscribe(r=>{f.get(m(f,this))||e.set(t,r)}),s&&e.listenSyncedAcrossBrowser(({key:e,newValue:s})=>{if(e!==t)return;let n=null!==s?JSON.parse(s):r;p(f,this,!0),this.setValue(n),p(f,this,!1)})}var v=r("./node_modules/react/index.js");function _(e,t={}){let[r,s]=(0,v.useState)(e.value),n=(0,v.useMemo)(()=>e.value,[e.value]);return(0,v.useEffect)(()=>{let r=e.subscribe(s,t);return n!==e.value&&s(e.value),r},[n,e,s,t]),[r,(0,v.useMemo)(()=>e.setValue.bind(e),[e])]}var w=r("./node_modules/@atlaskit/feature-gate-js-client/dist/esm/client/FeatureGates.js");function C(e,t,r={}){let[s,o]=(0,v.useState)(()=>t(e.value)),i=(0,v.useRef)(s),a=(0,v.useRef)(!1),l=w.Ay.checkGate("ghost_patch_shared_state_selector"),c=(0,v.useCallback)((e,r)=>{a.current=a.current||void 0!==r;let s=t(e);(0,n.bD)(s,i.current)||(i.current=s,o(s))},[t]);(0,v.useEffect)(()=>{a.current&&c(e.value)},[c]),(0,v.useEffect)(()=>{if(l)return;let t=e.subscribe(c,r);return a.current||c(e.value),()=>{t&&t()}},[l,e,r,c]);let{onlyUpdateIfChanged:u}=r;return(0,v.useEffect)(()=>{if(!l)return;let t=e.subscribe(c,{onlyUpdateIfChanged:u});return a.current||c(e.value),()=>{a.current=!1,t&&t()}},[l,e,u,c]),s}},"./packages/storage/index.ts":(e,t,r)=>{"use strict";r.d(t,{Y6:()=>p,_q:()=>h,yR:()=>f});var s=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/services/web-storage-service/index.js");let n={LOCAL_STORAGE:"localStorage",SESSION_STORAGE:"sessionStorage"};function o(e){let t=!!s.oR?.isAvailable,r=!!s.Rl?.isAvailable;return e===n.LOCAL_STORAGE?t:e===n.SESSION_STORAGE?r:t&&r}var i=r("./packages/browser/index.ts");class a{constructor(){!function(e,t,r){var s;(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"storage",void 0),this.storage={}}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){return this.storage[e]||null}key(e){return Object.keys(this.storage)[e]||null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t||""}}let l=[...Object.entries({"BoardWarning-":{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the board limit warnings the user has seen, and the limits of those warnings. Used to determine if a new warning needs to be shown."},HIDE_FRAGMENT_WARNINGS:{category:"functional",createdOn:"2025-05-22",owner:"cross-flow",purpose:"Hides Apollo fragment warnings when running Trello locally"},"NotificationsSeenState-":{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Keeps track of seen notifications/notification groups."},STATSIG_OVERRIDES:{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Local storage for Statsig Gates&Experiments overrides. Can be modified by going to Internal Tools -> Statsig Gates or Internal Tools -> Statsig Experiments and enabling/disabling gates for the gates or modifying values for Experiments. Not sure if the experiments functionality is exposed to users in any way. Value: object  "},STATSIG_OVERRIDES_SERVER:{category:"functional",createdOn:"2025-07-19",owner:"web-eng",purpose:"Local storage for Statsig Server Gates overrides. Can be modified by going to Internal Tools -> Statsig Server Gates and enabling/disabling gates. Value: object (ServerGateOverridesConfig from @trello/server-gate-overrides) "},"accessibleProducts-":{category:"necessary",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores the other Atlassian products in use by a user. Doesn't really matter if this is transmitted, as it's a cache of a web request. Value: {}"},action_history_:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the undo stack, not normally transmitted, but some actions do call network endpoints selectively depending on the situation."},action_history_undo_stack_:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:'Stores the "redo" stack (if an action is undone, this stack stores it so it can be redone).'},"announcement-":{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the read state for taco announcements. Sent in app/src/components/TacoAnnouncements/Announcements.tsx:68"},"attachment-viewer-magnification-preference":{category:"functional",createdOn:"2024-10-08",owner:"cross-flow",purpose:"Persists user magnification preference for the attachment viewer. Value: boolean"},autoJoinQueue:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"I suspect this may be dead code, I didn't see any usage, but it looks like this relates to the board invites system?"},autoOpenCFFE:{category:"targeting",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Sets if the fullscreen Cross Flow UI should spawn"},boardAdMinifiedState:{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores the minified state of discovery ads. Value: bool "},"boardCardComposerSettings-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Contains info from card drafts, appears to only be used locally."},"boardCardFilterSettings-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Contains saved filter info."},"boardListComposerSettings-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Used for List Composer drafts."},boardSwitcherLayout:{category:"functional",createdOn:"2025-06-03",owner:"web-eng",purpose:'Stores the layout of the board switcher. Value: "grid" | "list"'},boardSwitcherState:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the state of the board switcher."},calendar:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Calendar view preferences."},calendarZoomLevel:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Calendar (/boardName/calendar) time period setting that is changed using corresponding dropdown. Seems to be enabled only when having the Calendar powerup + `trello_xf_use_view_for_calendar_powerup` gate ENABLED Value = 'day' | 'week' | 'month' "},"cardBackState-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the setting for \"Comments & Activity\" panel when the corresponding button is clicked. Value: 'activity' | 'planner' | null"},"client-initialization-method-":{category:"functional",createdOn:"2025-05-23",owner:"cross-flow",purpose:"Stores the feature gate client initialization method"},"collapsed-lists":{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Can be modified in Board '...' menu ->  Collapse/Expand all lists or by expanding/collapsing a single list Value: { memberId: { listId: stateNumber, ... }} where stateNumber = 0 (for expanded) | 1 (collapsed)"},"collapsed-popover-section-ids":{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:'In List actions menu: stores the settings for "Automation" and "Change list color" lists being expanded or collapsed.  '},custom_action_i18n:{category:"performance",createdOn:"2025-04-16",owner:"web-eng",purpose:"We support loading translations for custom actions from server on-demand, when the client receives a notification that requires it. These translations are stored in the client's local storage."},cut:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Used for Trello clipboard functionality. If a card is cut using the `CMD+X` shortcut, contains the URL of the cut card. Otherwise, the key does not exist."},dateLastViewedNotifications:{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"This value represents the last time the user viewed their notifications (by clicking on the Notifications icon) Value: number corresponding to new Date().getTime()"},developerConsoleState:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"Object representing the developer console settings. The console can be accessed with Internal Tools -> Enable Developer Console. Value: object "},draftComments:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"Draft comments."},draft_:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"When editing board description, the draft text is saved here. Values aren't normally transmitted, but can be part of analytics data if an error is caught. Value: string"},dynamicConfigClient:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"`@trello/dynamic-config` initializes a shared state using `@trello/shared-state`.  The package also uses `@trello/storage` to read it directly before shared state is initialized, dangerously.  Values aren't normally transmitted, but can be part of analytics data if an error is caught."},dynamicConfigOverrides:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"`@trello/dynamic-config` sets and gets values from local storage through the `@trello/storage` wrapper.  Values aren't normally transmitted, but can be part of analytics data if an error is caught."},dynamicConfigStarred:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"`@trello/dynamic-config` sets and gets values from local storage through the `@trello/storage` wrapper.  Values aren't normally transmitted, but can be part of analytics data if an error is caught.  An array of dynamic config names which were marked by a star in Internal Tools -> Statsig Dynamic Configuration Value: string[]  "},dynamicConfigUserData:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"`@trello/dynamic-config` sets and gets values from local storage through the `@trello/storage` wrapper.  Values aren't normally transmitted, but can be part of analytics data if an error is caught."},"editor-placeholder-hints-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"We have a set of 6 placeholders for the description with tips for the user that we want to rotate through once per card view. We don't want it to change when a user is switching from view to edit on the same card. So, we store the index of last viewed hint in storage and only update it when the current card gets unmounted."},expanded_team_tabs:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Keeps track of expanded state of workspaces in the left sidebar. Value: string[]"},"featureGates-":{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"`@trello/feature-gate-client` sets and gets values from local storage through the `@trello/shared-state` wrapper. This call is not persistent, and is manually persisted/recalled through a call to `@trello/storage`  The package also uses `@trello/storage` to read it directly before shared state is initialized, dangerously.  Values aren't normally transmitted, but can be part of analytics data if an error is caught."},"fep.feature-flags-sort-order":{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"Stores the setting for FF sort order. Looks like a dev-only thing."},"focus-mode-show-cards":{category:"functional",createdOn:"2025-02-21",owner:"web-eng",purpose:"Used to show/hide cards in focus mode. Value: boolean. "},"focus-mode-show-time":{category:"functional",createdOn:"2025-02-21",owner:"web-eng",purpose:"Used to show/hide time in focus mode. Value: boolean. "},"focus-mode-theme":{category:"functional",createdOn:"2025-03-28",owner:"web-eng",purpose:"Persists the user's focus mode theme"},"global-theme":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Used for the color mode across the app."},home_:{category:"performance",createdOn:"2025-04-16",owner:"web-eng",purpose:"Defines where the user will go after pressing the Home button in Trello."},idCollapsedChecklists:{category:"functional",createdOn:"2024-07-30",owner:"web-eng",purpose:"Used to persis which checklists are collapsed on the card back. Value: boolean"},idLastOrganization:{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:"This is used in copying a board. Might be dead code."},inboxIds:{category:"necessary",createdOn:"2025-04-16",owner:"enterprise",purpose:"Stores inbox IDs for memberId."},inboxInfoPanelAnimation:{category:"functional",createdOn:"2025-07-14",owner:"cross-flow",purpose:"Stores inbox quick capture panel animation status (plays each time a card is added to an empty inbox)"},"inviteToJiraPermissions-":{category:"necessary",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores if a user can invite another to Jira, and if they have any restrictions."},labelState:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"In collapsed mode, the card's label name is hidden. This is controlled by showLabelsState. Might be dead code."},"last-mirrored-data-":{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores the value for the last mirrored card."},lastActivity:{category:"performance",createdOn:"2025-04-16",owner:"platform",purpose:"Contains an epoch timestamp for the last time user activity was detected, used to defer network requests when the user is idle."},lastDueDateReminder_:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:'This is set when we open Dates on a card and select a value from the "Set due date reminder" dropdown. Values aren\'t normally transmitted, but can be part of analytics data if an error is caught.a'},lastReloadTimestamp:{category:"necessary",createdOn:"2025-04-16",owner:"platform",purpose:"Stores the last time the page was refreshed. Related code refreshes the page if 5+ mins passed since last refresh. It looks like this value is set using Internal Tools -> Pick a version -> dropdowns for branch and version.  Value: Date.now() "},"lastViewedPowerUpUpdates-":{category:"functional",createdOn:"2025-07-28",owner:"ecosystem",purpose:"Tracks when users last viewed Updates for each Power-Up to show number badges for unseen updates. Keyed by member ID and contains timestamps per power-up ID."},"locale-":{category:"necessary",createdOn:"2025-04-16",owner:"platform",purpose:"Stores the user's locale. Direct localStorage access in packages/bootstrap/src/getPreferredLocale.ts:25"},"memberCohorts-":{category:"performance",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores cached member cohorts data. Doesn't seem to be used outside of useFeatureGateClientCustomAttributes.ts, might be dead code. Values aren't normally transmitted, but can be part of analytics data if an error is caught."},"memberEnterpriseData-":{category:"performance",createdOn:"2025-04-16",owner:"enterprise",purpose:"Stores cached enterprise data. Doesn't seem to be used outside of useFeatureGateClientCustomAttributes.ts, might be dead code. Values aren't normally transmitted, but can be part of analytics data if an error is caught."},"memberState-":{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"Stores user preferences like 'showSuggestions': bool"},"mirror-tab-":{category:"functional",createdOn:"2025-05-13",owner:"cross-flow",purpose:"Stores the tab of the mirror card popover."},mobilePromptClosed:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores the date when the mobile app download prompt banner was dismissed. We don't show this banner again for the next 24 hours. Values aren't normally transmitted, but can be part of analytics data if an error is caught. Value: Date.now()"},nocontext:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"When this key is set to true, right click on a card opens the system context menu instead of card context menu.  I don't see any place where this value is written to localStorage. This might be a developer-only option."},"notificationFilterState-":{category:"functional",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Preferences for filtering notifications."},notification_lock_:{category:"necessary",createdOn:"2025-04-16",owner:"platform",purpose:"This is related to browser notification API. Probably a synchronization mechanism for cases when the user has Trello opened in browser and a desktop app, and a notification arrives."},"onboardingBoardUrl-":{category:"functional",createdOn:"2025-03-19",owner:"cross-flow",purpose:"Stores an onboarding redirect url for the member"},otmd:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"Related to one time messages functionality. Value: string[]"},"personalProductivityLocalOverride-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Stores the setting from Personal Productivity Toggle. Might be a dev-only thing, but not 100% sure."},"planner:custom_view":{category:"necessary",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Persists which view to show when the user opens the planner."},"planner:weekend_view":{category:"necessary",createdOn:"2025-03-19",owner:"cross-flow",purpose:"Whether the user prefers to show weekends in the planner view. Value: boolean"},postOfficeEnvironment:{category:"necessary",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Stores the post office environment. Looks like a dev-only setting, but not 100% sure. Value: 'local' | 'production' | 'staging'"},"recentBoardsState-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores recent boards to use them for suggestions, for example in board switcher or link picker."},"recentCardsState-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores recent cards to suggest them when linking a card."},recentMentions:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores recent mentions to use them in a mention dialog."},recentlyFlaggedInvites:{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Used to track last time we showed a flag for a invite accepted notification.  Values aren't normally transmitted, but can be part of analytics data if an error is caught."},recentlyUsedFeatures:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Stores feature usage in LocalStorage and for a delayed preload on app entry only if the feature has been used by that user within a given time frame (3 days by default)."},reloadedToUpdate:{category:"necessary",createdOn:"2025-04-16",owner:"platform",purpose:"This is needed for reload-to-update functionality Sent in packages/client-updater/src/sendReloadedToUpdateEvent.ts:19"},sandboxState:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:"This seems to be a dev-only preference for Apollo."},"selected-rovo-site-id":{category:"functional",createdOn:"2025-05-09",owner:"web-eng",purpose:"Stores the selected site id for Rovo."},serverTimeDelta:{category:"performance",createdOn:"2025-04-16",owner:"platform",purpose:"Holds the difference between the current system epoch, and the epoch returned from the last API request. Updated when API requests are returned. (This appears to be older, backbone-related code)"},showDetails:{category:"performance",createdOn:"2025-04-16",owner:"platform",purpose:"Stores the setting for Show/Hide Details button in cardback Activity."},"sidebarBoardOrderState-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Stores the board sort order (alphabet, recent) in the sidebar."},sidebar_boardslist_full_show_collapsed_:{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Stores the setting for showing collapsed boards in BoardsList. Value: bool  Sent in app/src/components/WorkspaceNavigation/BoardsList.tsx:197"},"split-screen-configuration":{category:"necessary",createdOn:"2025-04-16",owner:"web-eng",purpose:'Contains information about the split screen mode. If you go to a board and click "planner" and/or "inbox" at the bottom of the page, the values in the storage update accordingly.'},"splitScreenOnboardingMessageDismissal-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Gets set after the 'split-screen-onboarding' one time message is dismissed. Value: Date.now()"},"starred-feature-flags":{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:'Stores the FFs that we mark as starred in "Statsig Feature Gates"'},"tacoShowFlags-":{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Defines the style of taco announcement that is going to be shown when the user interacts with the crouched taco Icon. Value: {     tacoExpires: date.toString(),     tacoStyle: 'maintenance' | 'normal'   }"},tacoTimeMs:{category:"functional",createdOn:"2025-04-16",owner:"web-eng",purpose:"Used to fast forward the taco announcements polling rate. Dev only"},unsupportedBrowserBannerLastDismissed:{category:"functional",createdOn:"2025-04-16",owner:"platform",purpose:'Contains Date string of the last time the "Unsupported browser version" banner was dismissed. When this date is older than 1 week, the banner is displayed again. Values aren\'t normally transmitted, but can be part of analytics data if an error is caught. Value: Date.toISOString()'},useGraphqlWebsocketPings:{category:"functional",createdOn:"2025-07-11",owner:"goo",purpose:"When set, allows the GraphQL websocket to send pings to the server. Value: boolean"},useWebSockets:{category:"necessary",createdOn:"2025-04-16",owner:"platform",purpose:"Persists a value to enable or disable web sockets. It's pass through to the window, but doesn't appear to actually do anything other than send a message to the console, and persist the value? Value: 'yes' | 'no'"},userHasSite:{category:"necessary",createdOn:"2025-04-16",owner:"cross-flow",purpose:"Is set to true when the response from /xpsearch-aggregator returns non-zero length for any of jiraSites/confluenceSites/atlasWorkspaces. Is part of a condition if an Atlassian Account login should be rendered. Value: bool"},"workspaceNavigation-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Describes the state of the sidebar (can be changed with the [ hotkey) Value: { view: bool, expandedViewStatus: string }"},"workspaceViewDismissedDefaultView-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Settings for workspace views."},"workspaceViewNavigationState-":{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"Settings for workspace views."},yourCardsSortView:{category:"functional",createdOn:"2025-04-16",owner:"enterprise",purpose:"/u/<username>/cards -- defines how the cards will be sorted: by board or by due date. Possible values: 'board' | 'date'"}}).filter(([,e])=>"necessary"===e.category),...Object.entries({newFeaturesSeen:{category:"functional",createdOn:"2025-04-08",owner:"web-eng",purpose:"Stores the seen state of new features."},searchConfigurationSession:{category:"functional",createdOn:"2025-04-08",owner:"cross-flow",purpose:"Stores cached cross-product search configuration."},searchSessionId:{category:"functional",createdOn:"2025-04-08",owner:"cross-flow",purpose:"Used in calculating a search journey."},"trello.currentUserActivityStatus":{category:"necessary",createdOn:"2025-04-08",owner:"platform",purpose:"Tracks the active/idle state of the user for the page."},typeof_:{category:"necessary",createdOn:"2025-04-08",owner:"enterprise",purpose:"Used to cache view data to avoid loading it multiple times"}}).filter(([,e])=>"necessary"===e.category)].map(([e])=>e),c={};function u(e,t,r){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e){u(this,"storage",void 0),u(this,"listeners",void 0),u(this,"errorListeners",void 0),u(this,"listenersSyncedAcrossBrowser",void 0),u(this,"storageSource","window"),u(this,"storageKind",void 0),u(this,"LISTENER_IGNORABLE_KEY_PREFIXES",/^(awc\.)/),u(this,"onStorage",e=>{let{key:t,oldValue:r,newValue:s}=e;!t||t.match(this.LISTENER_IGNORABLE_KEY_PREFIXES)||this.broadcastChangeFromOtherInstance({key:t,oldValue:r,newValue:s})}),u(this,"getAllKeys",()=>{let e="window"===this.storageSource?this.storage:this.storage.storage;return e?Object.keys(e):[]}),this.listeners=new Set,this.errorListeners=new Set,this.listenersSyncedAcrossBrowser=new Set,this.storageKind=e,(0,i.oi)()&&!function(e){let t;try{t=window[e];let r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!!(e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length)}}(e)?(this.storageSource="memory",this.storage=new a):o(e)?(this.storageSource="atlassian",e===n.SESSION_STORAGE?this.storage=s.Rl:this.storage=s.oR):(this.storageSource="window",this.storage=window[e]),window.addEventListener("storage",this.onStorage)}listen(e){this.listeners.add(e)}addErrorListener(e){this.errorListeners.add(e)}removeErrorListener(e){this.errorListeners.delete(e)}listenSyncedAcrossBrowser(e){this.listenersSyncedAcrossBrowser.add(e),this.listen(e)}unlisten(e){this.listeners.delete(e),this.listenersSyncedAcrossBrowser.delete(e)}broadcastLocalChange(e){this.listeners.forEach(t=>{t(e)})}broadcastError(e){this.errorListeners.forEach(t=>{t(e)})}broadcastChangeFromOtherInstance(e){this.listenersSyncedAcrossBrowser.forEach(t=>{t(e)})}ensureStorageSource(){o(this.storageKind)?"window"===this.storageSource&&(this.storageSource="atlassian",this.storageKind===n.SESSION_STORAGE?this.storage=s.Rl:this.storage=s.oR):"atlassian"===this.storageSource&&(this.storageSource="window",this.storage=window[this.storageKind])}isEnabled(){return!!this.storage}set(e,t){try{if(this.ensureStorageSource(),this.storage){let r=this.getRaw(e),s=JSON.stringify(t);"atlassian"===this.storageSource&&(e=>{if(e in c)return c[e];let t=l.some(t=>e.startsWith(t));return c[e]=t,t})(e)?this.storage.setStrictlyNecessaryItem(e,s):this.storage.setItem(e,s),this.broadcastLocalChange({key:e,oldValue:r,newValue:s})}}catch(t){console.warn(t),this.broadcastError({key:e,error:t})}}get(e){let t=null,r=this.getRaw(e);if(r)try{t=JSON.parse(r)}catch(e){console.warn(e)}return t}getRaw(e){return this.storage?this.storage.getItem(e):null}unset(e){this.storage&&null!==this.getRaw(e)&&this.storage.removeItem(e)}}let h=new d(n.LOCAL_STORAGE),p=new d(n.SESSION_STORAGE);var m=r("./node_modules/react/index.js");let f=(e,t)=>{let[r,s]=(0,m.useState)(t),n=(0,m.useCallback)(t=>{s(t),null===t?h.unset(e):h.set(e,t)},[e]);return(0,m.useEffect)(()=>{s(h.get(e)??r)},[]),[r,n]}}},e=>{e(e.s="./packages/quickload/src/quickload.ts")}]);
//# sourceMappingURL=quickload.c0c30f229d61df7364e7.js.map